<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Multiple Operators and Selective Upgrades :: Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/camel-k/2.4.x/installation/advanced/multi.html"> <meta name="generator" content="Antora 3.1.7"> <link rel="stylesheet" href="../../../../_/css/site-b287b96c63.css"> <meta name="application-name" content="Apache Camel"> <meta property="og:title" content="Multiple Operators and Selective Upgrades"> <meta property="og:site_name" content="Apache Camel"> <meta property="og:url" content="https://camel.apache.org"> <meta property="og:description" content="Camel is an open source integration framework that empowers you to quickly and easily integrate various systems consuming or producing data."> <meta property="og:type" content="website"> <meta property="og:image" content="https://camel.apache.org/_/img/logo-d-a567cee6fa.svg"> <link rel="manifest" href="../../../../site.webmanifest"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../../../favicon-128.png" sizes="128x128"> </head> <body class="article"> <header class="header"> <nav class="navbar" aria-label="Main menu"> <div class="navbar-brand"> <a class="nav-logo" href="../../../.."></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../blog/"> <img alt="Blog" src="/_/img/blog-4c7fa4cb60.svg"> Blog </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../docs/"> <img alt="Documentation" src="/_/img/documentation-abb1b7f8b1.svg"> Documentation </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../community/"> <img alt="Community" src="/_/img/community-2ec8a3dc8b.svg"> Community </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../download/"> <img alt="Download" src="/_/img/download-63cdd75074.svg"> Download </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../security/"> <img alt="Security" src="/_/img/security-06abe157b3.svg"> Security </a> </div> </div> <div class="navbar-fill"></div> <div class="break-row"></div> <div class="navbar-search results-hidden"> <input id="search" class="search" placeholder="Search" autocomplete="off"> <img src="../../../../_/img/cancel-1ed239489b.svg" alt="Clear" id="search-cancel"> <div id="search_results"></div> </div> <div class="navbar-tools"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg focusable="false" class="brand-icon"><use xlink:href="../../../../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg focusable="false" class="brand-icon"><use xlink:href="../../../../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg focusable="false" class="brand-icon"><use xlink:href="../../../../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg focusable="false" class="brand-icon"><use xlink:href="../../../../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button" aria-label="Menu"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <a id="top"></a> <div class="body"> <div class="nav-container" data-component="camel-k" data-version="2.4.x"> <aside class="nav" aria-label="Side menu"> <div class="panels"> <div class="nav-panel-menu is-active"> <nav class="nav-menu" data-panel="menu" aria-label="Topics"> <h3 class="title"><a href="../../index.html">Camel K</a></h3> <ul class="nav-list"> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../installation.html">Installation</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../registry/registry.html">Configure Registry</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="maven.html">Configure Maven</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../knative.html">Configure Knative</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../upgrade.html">Upgrade</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../uninstalling.html">Uninstalling</a> </li> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="advanced.html">Advanced</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="build-config.html">Build tuning</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="network.html">Network architecture</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="resources.html">Resource management</a> </li> <li class="nav-item is-current-page" data-depth="3"> <a class="nav-link" href="multi.html">Multiple Operators</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="http-proxy.html">HTTP Proxy</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="multi-architecture.html">Multi Architecture</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="offline.html">Offline</a> </li> </ul> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../cli/cli.html">Command Line Interface</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../cli/file-based-config.html">File-based Config</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../cli/modeline.html">Modeline</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../running/running.html">Run an Integration</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/dev-mode.html">Developer mode</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/dry-run.html">Dry run</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/runtime-version.html">Camel version</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/quarkus-native.html">Quarkus Native</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/camel-runtimes.html">Camel runtimes</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/import.html">Import existing Camel apps</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/run-from-github.html">Run from GitHub</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/promoting.html">Promote an Integration</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/knative-sink.html">Knative Sinks</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../languages/languages.html">Languages</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../languages/java.html">Java</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../languages/yaml.html">YAML</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../languages/xml.html">XML</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../languages/groovy.html">Groovy</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../languages/javascript.html">Javascript</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../languages/jsh.html">JSheel</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../languages/kotlin.html">Kotlin</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../configuration/configuration.html">Configuration</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../configuration/build-time-properties.html">Build time properties</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../configuration/components.html">Components</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../configuration/dependencies.html">Dependencies</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../configuration/maven-profile.html">Maven Profile</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../configuration/runtime-properties.html">Properties</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../configuration/runtime-config.html">Runtime configuration</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../configuration/runtime-resources.html">Runtime resources</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../kamelets/kamelets.html">Kamelets</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../kamelets/kamelets-distribution.html">Distribution</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../kamelets/kamelets-user.html">User Guide</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../kamelets/kamelets-dev.html">Developer Guide</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../kamelets/kameletbindings-error-handler.html">Error Handling</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../traits/traits.html">Traits</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/3scale.html">3Scale</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/affinity.html">Affinity</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/aws-secrets-manager.html">Aws Secrets Manager</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/azure-key-vault.html">Azure Key Vault</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/builder.html">Builder</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/camel.html">Camel</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/container.html">Container</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/cron.html">Cron</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/deployer.html">Deployer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/deployment.html">Deployment</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/environment.html">Environment</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/error-handler.html">Error Handler</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/gc.html">Gc</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/gcp-secret-manager.html">Gcp Secret Manager</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/hashicorp-vault.html">Hashicorp Vault</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/health.html">Health</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/ingress.html">Ingress</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/istio.html">Istio</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/jolokia.html">Jolokia</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/jvm.html">Jvm</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/kamelets.html">Kamelets</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/keda.html">Keda</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/knative-service.html">Knative Service</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/knative.html">Knative</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/logging.html">Logging</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/master.html">Master</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/mount.html">Mount</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/openapi.html">Openapi</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/owner.html">Owner</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/pdb.html">Pdb</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/platform.html">Platform</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/pod.html">Pod</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/prometheus.html">Prometheus</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/pull-secret.html">Pull Secret</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/quarkus.html">Quarkus</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/registry.html">Registry</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/resume.html">Resume</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/route.html">Route</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/security-context.html">Security Context</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/service-binding.html">Service Binding</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/service.html">Service</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/telemetry.html">Telemetry</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/toleration.html">Toleration</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/tracing.html">Tracing</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../pipeline/pipeline.html">Pipelines</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../pipeline/tekton.html">Tekton</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <span class="nav-text">Scaling</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../scaling/integration.html">Integrations</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../scaling/binding.html">Pipes</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <span class="nav-text">Observability</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../observability/logging.html">Logging</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../observability/logging/operator.html">Operator</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../observability/logging/integration.html">Integration</a> </li> </ul> </li> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../observability/monitoring.html">Monitoring</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../observability/monitoring/operator.html">Operator</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../observability/monitoring/integration.html">Integration</a> </li> </ul> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../troubleshooting/troubleshooting.html">Troubleshooting</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../troubleshooting/debugging.html">Debugging</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../troubleshooting/operating.html">Operating</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../troubleshooting/known-issues.html">Known Issues</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../architecture/architecture.html">Architecture</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../architecture/operator.html">Operator</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../architecture/cr/integration-platform.html">IntegrationPlatform</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../architecture/cr/integration.html">Integration</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../architecture/cr/integration-kit.html">IntegrationKit</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../architecture/cr/build.html">Build</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../architecture/cr/camel-catalog.html">CamelCatalog</a> </li> </ul> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../architecture/runtime.html">Runtime</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../architecture/traits.html">Traits</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../architecture/kamelets.html">Kamelets</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../architecture/incremental-image.html">Incremental Image</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <span class="nav-text">API</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../apis/camel-k.html">Camel K API</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../apis/kamelets.html">Kamelets API</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../apis/java.html">Java API</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../contributing/developers.html">Contributing</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../contributing/local-development.html">Local development</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../contributing/local-execution.html">Operator - local execution</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../contributing/remote-debugging.html">Operator - remote debug</a> </li> </ul> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../contributing/local-deployment-olm.html">Local OLM deployment</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../contributing/e2e.html">Local E2E testing</a> </li> </ul> </li> </ul> </li> </ul> </nav> </div> <div class="nav-panel-explore" data-panel="explore"> <div class="context"> <span class="title">Camel K</span> <span class="version">2.4.x</span> </div> <ul class="components"> <li class="component"> <span class="title"> <a href="../../../../manual/index.html">User manual</a> </span></li> <li class="component"><span class="title">Camel Components</span> <ul class="versions"> <li class="version"> <a href="../../../../components/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../../../../components/4.8.x/index.html">4.8.x (LTS)</a> </li> <li class="version"> <a href="../../../../components/4.4.x/index.html">4.4.x (LTS)</a> </li> <li class="version"> <a href="../../../../components/3.22.x/index.html">3.22.x (LTS)</a> </li> </ul></li> <li class="component"> <span class="title"> <a href="../../../../camel-core/index.html">Camel Core</a> </span></li> <li class="component is-current"><span class="title">Camel K</span> <ul class="versions"> <li class="version"> <a href="../../../next/index.html">Next (Pre-release)</a> </li> <li class="version is-current"> <a href="../../index.html">2.4.x</a> </li> </ul></li> <li class="component"><span class="title">Camel Kafka Connector</span> <ul class="versions"> <li class="version"> <a href="../../../../camel-kafka-connector/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../../../../camel-kafka-connector/4.8.x/index.html">4.8.x</a> </li> </ul></li> <li class="component"><span class="title">Kamelet Catalog</span> <ul class="versions"> <li class="version"> <a href="../../../../camel-kamelets/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../../../../camel-kamelets/4.8.x/index.html">4.8.x (LTS)</a> </li> <li class="version"> <a href="../../../../camel-kamelets/4.4.x/index.html">4.4.x (LTS)</a> </li> </ul></li> <li class="component"><span class="title">Camel Karaf</span> <ul class="versions"> <li class="version"> <a href="../../../../camel-karaf/3.22.x/index.html">3.22.x (LTS)</a> </li> </ul></li> <li class="component"><span class="title">Camel Quarkus</span> <ul class="versions"> <li class="version"> <a href="../../../../camel-quarkus/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../../../../camel-quarkus/3.15.x/index.html">3.15.x</a> </li> <li class="version"> <a href="../../../../camel-quarkus/3.8.x/index.html">3.8.x</a> </li> </ul></li> <li class="component"><span class="title">Camel Spring Boot</span> <ul class="versions"> <li class="version"> <a href="../../../../camel-spring-boot/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../../../../camel-spring-boot/4.8.x/index.html">4.8.x (LTS)</a> </li> <li class="version"> <a href="../../../../camel-spring-boot/4.4.x/index.html">4.4.x (LTS)</a> </li> <li class="version"> <a href="../../../../camel-spring-boot/3.22.x/index.html">3.22.x (LTS)</a> </li> </ul></li> </ul> </div> </div> </aside> </div> <main class="article"> <nav class="toolbar" aria-label="Toolbar"> <button class="nav-toggle" type="button" aria-label="Toggle submenu"></button> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="../../index.html">Camel K</a></li> <li><a href="../installation.html">Installation</a></li> <li><a href="advanced.html">Advanced</a></li> <li><a href="multi.html">Multiple Operators</a></li> </ul> </nav> <div class="page-versions"> <button class="version-menu-toggle" type="button" title="Show other versions of page">2.4.x</button> <div class="version-menu"> <a class="version" href="../../../next/installation/advanced/multi.html">Next (Pre-release)</a> <a class="version is-current" href="multi.html">2.4.x</a> </div> </div> <div class="edit-this-page"><a href="https://github.com/apache/camel-k/edit/release-2.4.x/docs/modules/ROOT/pages/installation/advanced/multi.adoc">Edit this Page</a></div> </nav> <div class="content"> <article class="doc"> <h1 class="page">Multiple Operators and Selective Upgrades</h1> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>It is possible to set up multiple Camel K operators on a cluster to watch resources on namespaces. It&#8217;s not possible to configure Camel K this way using OLM (Operator Hub), since OLM prevents two operators from watching the same namespaces, but it&#8217;s technically possible to achieve this setup manually.</p> </div> <div class="paragraph"> <p>A typical example is when you need to install multiple global operators in different namespaces in order to have multiple tenants on the cluster working with Camel K. In this multi operator situation Camel K needs to avoid that the same resources on the cluster are managed by more than one operator at the same time. Operators must not contend the integration and the reconciliation because this will most probably result in an error (actual behavior is undefined).</p> </div> <div class="paragraph"> <p>To avoid contention, Camel K uses an operator id for each operator. The operator id must be unique on the cluster and any custom resource (CR) is assigned to a specific operator using an annotation. The assigned operator will be responsible for the reconciliation of the annotated CR and explicitly manages the resource no matter where it lives.</p> </div> <div class="paragraph"> <p>In detail, the Camel K operator supports the environment variable <code>OPERATOR_ID</code>. The value is an identifier that can be equal to any string (e.g. <code>OPERATOR_ID=operator-1</code>). Once the operator is assigned with an identifier, it will <strong>only reconcile</strong> Camel K custom resources that are assigned to that ID (unannotated resources will be ignored as well).</p> </div> <div class="paragraph"> <p>By default, the Camel K operator is using the id <code>camel-k</code>. When installing many operators the instances must use a different operator id. To assign a resource to a specific operator, the user can annotate it with <code>camel.apache.org/operator.id</code>. For example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">kind: Integration
apiVersion: camel.apache.org/v1
metadata:
  annotations:
    camel.apache.org/operator.id: operator-2
# ...</code></pre> </div> </div> <div class="paragraph"> <p>By default, Camel K custom resources use the default operator id <code>camel-k</code> as a value in this annotation. And more precisely the default operator with id <code>camel-k</code> and only this specific operator is allowed to also reconcile resources that are missing the operator id annotation.</p> </div> <div class="paragraph"> <p>The annotation can be put on any resource belonging to the "camel.apache.org" group.</p> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> When a resource creates additional resources in order to proceed with the reconciliation (for example an Integration may create an IntegrationKit, which in turn creates a Build resource), the annotation will be propagated to all resources created in the process, so they&#8217;ll be all reconciled by the same operator. </td> </tr> </table></div> </div> <div class="paragraph"> <p>By using the <code>camel.apache.org/operator.id</code> annotation, it&#8217;s possible to move integrations between two or more operators running different versions of the Camel K platform, i.e. <strong>selectively upgrading or downgrading</strong> them. Just change the annotation on that particula resource to point to a new operator id:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell script hljs" data-lang="shell script">kubectl annotate integration timer-to-log camel.apache.org/operator.id=operator-2 --overwrite</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="advanced-installation-caveat"><a class="anchor" href="#advanced-installation-caveat"></a>Installation caveat</h2> <div class="sectionbody"> <div class="paragraph"> <p>In order to install more than one operator globally, you may need to change the ClusterRoleBindings to let more than one operator to have the RBAC set consistently. If you use a Kustomize installation approach, for example, you need to execute the following procedure to rename the roles and not conflicting between each other:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-none hljs">cd /install/base/config/rbac/descoped &amp;&amp; kustomize edit set namesuffix -- -$OPERATOR_ID</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="advanced-installation-integration-profile"><a class="anchor" href="#advanced-installation-integration-profile"></a>Apply custom IntegrationProfile settings</h2> <div class="sectionbody"> <div class="paragraph"> <p>Any running Camel K integration is associated to a shared IntegrationPlatform resource that contains general configuration options. The integration platform is located in the operator namespace and typically uses the same name as the operator id that this platform belongs to. Each Camel K operator uses exactly one single integration platform in a "Ready" state. IntegrationPlatform resources are somewhat "singleton" in a namespace and belong to a single operator instance.</p> </div> <div class="paragraph"> <p>There&#8217;s a way to allow customizations regarding the integration configuration. Users may add IntegrationProfile resources to an individual namespace. The profile holds custom integration platform settings for them to be used by integrations. The IntegrationProfile resource allows only a subset of the IntegrationPlatform settings for customization.</p> </div> <div class="paragraph"> <p>The custom IntegrationProfile resource uses the operator id as an annotation to bind its reconciliation to an operator instance. Also, the profile must be explicitly selected by an annotation referencing the integration profile name (any resource belonging to the "camel.apache.org" group can select a particular profile configuration).</p> </div> <div class="paragraph"> <p>To specify which profile should be used for an integration, the resource can be annotated like in the following example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">kind: Integration
apiVersion: camel.apache.org/v1
metadata:
  annotations:
    camel.apache.org/integration-profile.id: my-profile-name
# ...</code></pre> </div> </div> <div class="paragraph"> <p>The value of the <code>camel.apache.org/integration-profile.id</code> annotation must match the name of an IntegrationProfile custom resource. The profile gets automatically resolved from the annotated resource namespace or from the operator namespace. In case you need to explicitly set the integration profile namespace you can do so with the <code>camel.apache.org/integration-profile.namespace</code> annotation.</p> </div> <div class="paragraph"> <p>The selection of a IntegrationProfile enables new configuration scenarios, for example, sharing global configuration options for groups of integrations, or also providing per-operator specific configuration options e.g. when you install multiple global operators in the cluster.</p> </div> </div> </div> </article> <aside class="toc sidebar" aria-label="Table of contents" data-title="Contents" data-levels="2"> <div class="toc-menu"></div> </aside> </div> </main> </div> <div class="footer-tools"> <a href="#top" title="Reach the top of the page">Back to top</a> </div> <footer> <div class="footer"> <figure class="logo"> <img src="../../../../_/img/logo-d-a567cee6fa.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <input id="footer-toggle-overview" type="checkbox" title="Show/Hide Overview section"> <dl> <dt><label for="footer-toggle-overview">Overview</label><label for="footer-toggle-overview">&#65291;</label></dt> <dd><a href="../../../../blog/">Blog</a></dd> <dd><a href="../../../../docs/">Documentation</a></dd> <dd><a href="../../../../community/support/">Community</a></dd> <dd><a href="../../../../download/">Download</a></dd> </dl> <input id="footer-toggle-documentation" type="checkbox" title="Show/Hide Documentation section"> <dl> <dt><label for="footer-toggle-documentation">Documentation</label><label for="footer-toggle-documentation">&#65291;</label></dt> <dd><a href="../../../../manual/">User Manual</a></dd> <dd><a href="../../../../components/next/index.html">Components</a></dd> <dd><a href="../../../../camel-k/next/">Camel-K</a></dd> <dd><a href="../../../../camel-kafka-connector/next/">Camel Kafka Connector</a></dd> <dd><a href="../../../../camel-quarkus/next/">Camel Quarkus</a></dd> <dd><a href="../../../../camel-spring-boot/next/">Camel Spring Boot</a></dd> <dd><a href="../../../../camel-karaf/3.22.x/">Camel Karaf</a></dd> <dd><a href="../../../../manual/faq/index.html">FAQ</a></dd> </dl> <input id="footer-toggle-community" type="checkbox" title="Show/Hide Community section"> <dl> <dt><label for="footer-toggle-community">Community</label><label for="footer-toggle-community">&#65291;</label></dt> <dd><a href="../../../../community/support/">Support</a></dd> <dd><a href="../../../../community/contributing/">Contributing</a></dd> <dd><a href="../../../../community/mailing-list/">Mailing Lists</a></dd> <dd><a href="../../../../community/user-stories/">User stories</a></dd> <dd><a href="../../../../community/articles/">Articles</a></dd> <dd><a href="../../../../community/books/">Books</a></dd> <dd><a href="../../../../community/team/">Team</a></dd> </dl> <input id="footer-toggle-about" type="checkbox" title="Show/Hide Acknowledgements section"> <dl> <dt><label for="footer-toggle-about">About</label><label for="footer-toggle-about">&#65291;</label></dt> <dd><a href="../../../../acknowledgments/">Acknowledgments</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p class="remark"> &copy; 2004-2024 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> <div class="resources"> <div class="context"> <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a> </div> <div class="context"> <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/policies/conduct">Code of Conduct</a> </div> <div class="context"> <a href="../../../../sitemap/">Sitemap</a> </div> </div> <div class="footer-icons"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon" focusable="false"><use xlink:href="../../../../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg class="brand-icon" focusable="false"><use xlink:href="../../../../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon" focusable="false"><use xlink:href="../../../../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg class="brand-icon" focusable="false"><use xlink:href="../../../../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> </div> </footer> <script src="../../../../_/js/vendor/algoliasearch-bad45193e2.js"></script> <script src="../../../../_/js/site-c215fb6972.js"></script> <script async src="../../../../_/js/vendor/highlight-621a10fe1b.js"></script> <script async src="../../../../_/js/vendor/svg4everybody-a0c573f2b9.js"></script> <script async src="../../../../_/js/vendor/tabs-5aea11bcf5.js" data-sync-storage-key="preferred-tab"></script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Organization", "name": "Apache Camel", "url": "https://camel.apache.org", "sameAs": [ "https://twitter.com/ApacheCamel" ], "logo": "../../../../_/img/logo-d-a567cee6fa.svg", "description": "Apache Camel â„¢ is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL." } </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "BreadcrumbList", "itemListElement": [{ "@type": "ListItem", "position": 1, "name": "Apache Camel", "item": "https://camel.apache.org/" }, { "@type": "ListItem", "position": 2, "name": "Camel K", "item": "https://camel.apache.org/camel-k/2.4.x/index.html" }, { "@type": "ListItem", "position": 3, "name": "2.4.x", "item": "https://camel.apache.org/camel-k/2.4.x/index.html" }, { "@type": "ListItem", "position": 4, "name": "Installation", "item": "https://camel.apache.org/camel-k/2.4.x/installation/installation.html" }, { "@type": "ListItem", "position": 5, "name": "Advanced", "item": "https://camel.apache.org/camel-k/2.4.x/installation/advanced/advanced.html" }, { "@type": "ListItem", "position": 6, "name": "Multiple Operators", "item": "https://camel.apache.org/camel-k/2.4.x/installation/advanced/multi.html" }] } </script> </body> </html> 