<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Configuring Registry :: Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/camel-k/2.4.x/installation/registry/registry.html"> <meta name="generator" content="Antora 3.1.7"> <link rel="stylesheet" href="../../../../_/css/site-b287b96c63.css"> <meta name="application-name" content="Apache Camel"> <meta property="og:title" content="Configuring Registry"> <meta property="og:site_name" content="Apache Camel"> <meta property="og:url" content="https://camel.apache.org"> <meta property="og:description" content="Camel is an open source integration framework that empowers you to quickly and easily integrate various systems consuming or producing data."> <meta property="og:type" content="website"> <meta property="og:image" content="https://camel.apache.org/_/img/logo-d-a567cee6fa.svg"> <link rel="manifest" href="../../../../site.webmanifest"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../../../favicon-128.png" sizes="128x128"> </head> <body class="article"> <header class="header"> <nav class="navbar" aria-label="Main menu"> <div class="navbar-brand"> <a class="nav-logo" href="../../../.."></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../blog/"> <img alt="Blog" src="/_/img/blog-4c7fa4cb60.svg"> Blog </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../docs/"> <img alt="Documentation" src="/_/img/documentation-abb1b7f8b1.svg"> Documentation </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../community/"> <img alt="Community" src="/_/img/community-2ec8a3dc8b.svg"> Community </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../download/"> <img alt="Download" src="/_/img/download-63cdd75074.svg"> Download </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../security/"> <img alt="Security" src="/_/img/security-06abe157b3.svg"> Security </a> </div> </div> <div class="navbar-fill"></div> <div class="break-row"></div> <div class="navbar-search results-hidden"> <input id="search" class="search" placeholder="Search" autocomplete="off"> <img src="../../../../_/img/cancel-1ed239489b.svg" alt="Clear" id="search-cancel"> <div id="search_results"></div> </div> <div class="navbar-tools"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg focusable="false" class="brand-icon"><use xlink:href="../../../../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg focusable="false" class="brand-icon"><use xlink:href="../../../../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg focusable="false" class="brand-icon"><use xlink:href="../../../../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg focusable="false" class="brand-icon"><use xlink:href="../../../../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button" aria-label="Menu"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <a id="top"></a> <div class="body"> <div class="nav-container" data-component="camel-k" data-version="2.4.x"> <aside class="nav" aria-label="Side menu"> <div class="panels"> <div class="nav-panel-menu is-active"> <nav class="nav-menu" data-panel="menu" aria-label="Topics"> <h3 class="title"><a href="../../index.html">Camel K</a></h3> <ul class="nav-list"> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../installation.html">Installation</a> <ul class="nav-list"> <li class="nav-item is-current-page" data-depth="2"> <a class="nav-link" href="registry.html">Configure Registry</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../advanced/maven.html">Configure Maven</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../knative.html">Configure Knative</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../upgrade.html">Upgrade</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../uninstalling.html">Uninstalling</a> </li> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../advanced/advanced.html">Advanced</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../advanced/build-config.html">Build tuning</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../advanced/network.html">Network architecture</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../advanced/resources.html">Resource management</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../advanced/multi.html">Multiple Operators</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../advanced/http-proxy.html">HTTP Proxy</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../advanced/multi-architecture.html">Multi Architecture</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../advanced/offline.html">Offline</a> </li> </ul> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../cli/cli.html">Command Line Interface</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../cli/file-based-config.html">File-based Config</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../cli/modeline.html">Modeline</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../running/running.html">Run an Integration</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/dev-mode.html">Developer mode</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/dry-run.html">Dry run</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/runtime-version.html">Camel version</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/quarkus-native.html">Quarkus Native</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/camel-runtimes.html">Camel runtimes</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/import.html">Import existing Camel apps</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/run-from-github.html">Run from GitHub</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/promoting.html">Promote an Integration</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../running/knative-sink.html">Knative Sinks</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../languages/languages.html">Languages</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../languages/java.html">Java</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../languages/yaml.html">YAML</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../languages/xml.html">XML</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../languages/groovy.html">Groovy</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../languages/javascript.html">Javascript</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../languages/jsh.html">JSheel</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../languages/kotlin.html">Kotlin</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../configuration/configuration.html">Configuration</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../configuration/build-time-properties.html">Build time properties</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../configuration/components.html">Components</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../configuration/dependencies.html">Dependencies</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../configuration/maven-profile.html">Maven Profile</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../configuration/runtime-properties.html">Properties</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../configuration/runtime-config.html">Runtime configuration</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../configuration/runtime-resources.html">Runtime resources</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../kamelets/kamelets.html">Kamelets</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../kamelets/kamelets-distribution.html">Distribution</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../kamelets/kamelets-user.html">User Guide</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../kamelets/kamelets-dev.html">Developer Guide</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../kamelets/kameletbindings-error-handler.html">Error Handling</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../traits/traits.html">Traits</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/3scale.html">3Scale</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/affinity.html">Affinity</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/aws-secrets-manager.html">Aws Secrets Manager</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/azure-key-vault.html">Azure Key Vault</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/builder.html">Builder</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/camel.html">Camel</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/container.html">Container</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/cron.html">Cron</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/deployer.html">Deployer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/deployment.html">Deployment</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/environment.html">Environment</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/error-handler.html">Error Handler</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/gc.html">Gc</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/gcp-secret-manager.html">Gcp Secret Manager</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/hashicorp-vault.html">Hashicorp Vault</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/health.html">Health</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/ingress.html">Ingress</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/istio.html">Istio</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/jolokia.html">Jolokia</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/jvm.html">Jvm</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/kamelets.html">Kamelets</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/keda.html">Keda</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/knative-service.html">Knative Service</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/knative.html">Knative</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/logging.html">Logging</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/master.html">Master</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/mount.html">Mount</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/openapi.html">Openapi</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/owner.html">Owner</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/pdb.html">Pdb</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/platform.html">Platform</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/pod.html">Pod</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/prometheus.html">Prometheus</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/pull-secret.html">Pull Secret</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/quarkus.html">Quarkus</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/registry.html">Registry</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/resume.html">Resume</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/route.html">Route</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/security-context.html">Security Context</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/service-binding.html">Service Binding</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/service.html">Service</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/telemetry.html">Telemetry</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/toleration.html">Toleration</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../traits/tracing.html">Tracing</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../pipeline/pipeline.html">Pipelines</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../pipeline/tekton.html">Tekton</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <span class="nav-text">Scaling</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../scaling/integration.html">Integrations</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../scaling/binding.html">Pipes</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <span class="nav-text">Observability</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../observability/logging.html">Logging</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../observability/logging/operator.html">Operator</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../observability/logging/integration.html">Integration</a> </li> </ul> </li> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../observability/monitoring.html">Monitoring</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../observability/monitoring/operator.html">Operator</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../observability/monitoring/integration.html">Integration</a> </li> </ul> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../troubleshooting/troubleshooting.html">Troubleshooting</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../troubleshooting/debugging.html">Debugging</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../troubleshooting/operating.html">Operating</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../troubleshooting/known-issues.html">Known Issues</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../architecture/architecture.html">Architecture</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../architecture/operator.html">Operator</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../architecture/cr/integration-platform.html">IntegrationPlatform</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../architecture/cr/integration.html">Integration</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../architecture/cr/integration-kit.html">IntegrationKit</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../architecture/cr/build.html">Build</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../architecture/cr/camel-catalog.html">CamelCatalog</a> </li> </ul> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../architecture/runtime.html">Runtime</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../architecture/traits.html">Traits</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../architecture/kamelets.html">Kamelets</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../architecture/incremental-image.html">Incremental Image</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <span class="nav-text">API</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../apis/camel-k.html">Camel K API</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../apis/kamelets.html">Kamelets API</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../apis/java.html">Java API</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../contributing/developers.html">Contributing</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../../contributing/local-development.html">Local development</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../contributing/local-execution.html">Operator - local execution</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../../contributing/remote-debugging.html">Operator - remote debug</a> </li> </ul> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../contributing/local-deployment-olm.html">Local OLM deployment</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../../contributing/e2e.html">Local E2E testing</a> </li> </ul> </li> </ul> </li> </ul> </nav> </div> <div class="nav-panel-explore" data-panel="explore"> <div class="context"> <span class="title">Camel K</span> <span class="version">2.4.x</span> </div> <ul class="components"> <li class="component"> <span class="title"> <a href="../../../../manual/index.html">User manual</a> </span></li> <li class="component"><span class="title">Camel Components</span> <ul class="versions"> <li class="version"> <a href="../../../../components/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../../../../components/4.8.x/index.html">4.8.x (LTS)</a> </li> <li class="version"> <a href="../../../../components/4.4.x/index.html">4.4.x (LTS)</a> </li> <li class="version"> <a href="../../../../components/3.22.x/index.html">3.22.x (LTS)</a> </li> </ul></li> <li class="component"> <span class="title"> <a href="../../../../camel-core/index.html">Camel Core</a> </span></li> <li class="component is-current"><span class="title">Camel K</span> <ul class="versions"> <li class="version"> <a href="../../../next/index.html">Next (Pre-release)</a> </li> <li class="version is-current"> <a href="../../index.html">2.4.x</a> </li> </ul></li> <li class="component"><span class="title">Camel Kafka Connector</span> <ul class="versions"> <li class="version"> <a href="../../../../camel-kafka-connector/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../../../../camel-kafka-connector/4.8.x/index.html">4.8.x</a> </li> </ul></li> <li class="component"><span class="title">Kamelet Catalog</span> <ul class="versions"> <li class="version"> <a href="../../../../camel-kamelets/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../../../../camel-kamelets/4.8.x/index.html">4.8.x (LTS)</a> </li> <li class="version"> <a href="../../../../camel-kamelets/4.4.x/index.html">4.4.x (LTS)</a> </li> </ul></li> <li class="component"><span class="title">Camel Karaf</span> <ul class="versions"> <li class="version"> <a href="../../../../camel-karaf/3.22.x/index.html">3.22.x (LTS)</a> </li> </ul></li> <li class="component"><span class="title">Camel Quarkus</span> <ul class="versions"> <li class="version"> <a href="../../../../camel-quarkus/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../../../../camel-quarkus/3.15.x/index.html">3.15.x</a> </li> <li class="version"> <a href="../../../../camel-quarkus/3.8.x/index.html">3.8.x</a> </li> </ul></li> <li class="component"><span class="title">Camel Spring Boot</span> <ul class="versions"> <li class="version"> <a href="../../../../camel-spring-boot/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../../../../camel-spring-boot/4.8.x/index.html">4.8.x (LTS)</a> </li> <li class="version"> <a href="../../../../camel-spring-boot/4.4.x/index.html">4.4.x (LTS)</a> </li> <li class="version"> <a href="../../../../camel-spring-boot/3.22.x/index.html">3.22.x (LTS)</a> </li> </ul></li> </ul> </div> </div> </aside> </div> <main class="article"> <nav class="toolbar" aria-label="Toolbar"> <button class="nav-toggle" type="button" aria-label="Toggle submenu"></button> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="../../index.html">Camel K</a></li> <li><a href="../installation.html">Installation</a></li> <li><a href="registry.html">Configure Registry</a></li> </ul> </nav> <div class="page-versions"> <button class="version-menu-toggle" type="button" title="Show other versions of page">2.4.x</button> <div class="version-menu"> <a class="version" href="../../../next/installation/registry/registry.html">Next (Pre-release)</a> <a class="version is-current" href="registry.html">2.4.x</a> </div> </div> <div class="edit-this-page"><a href="https://github.com/apache/camel-k/edit/release-2.4.x/docs/modules/ROOT/pages/installation/registry/registry.adoc">Edit this Page</a></div> </nav> <div class="content"> <article class="doc"> <h1 class="page">Configuring Registry</h1> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Every Camel K installation needs a container registry that will be used to host integration container images. This is required to host the images that will be used by Kubernetes to execute the Camel application you&#8217;ve built.</p> </div> <div class="imageblock"> <div class="content"> <img src="../../_images/architecture/camel-k-registry.svg" alt="Container registry in action" width="800"> </div> </div> <div class="paragraph"> <p>The Camel K operator is in charge to build a Camel application and to "containerize" it, storing the result into a container registry. The same registry is used by the cluster to run the Camel application. Basically the operator push the image and the cluster pull it from the same source.</p> </div> <div class="paragraph"> <p>For the reason above it&#8217;s important that you provide a container registry which is accessible from both the operator Pod and the cluster internal mechanisms. However, a <strong>default registry</strong> is present in certain platforms such as <em>Minikube</em>, <em>Openshift</em> or <em>Docker Desktop</em>.</p> </div> <div class="paragraph"> <p>For any other platform that do not provide a default container registry, then, a registry must be provided accordingly.</p> </div> </div> </div> <div class="sect1"> <h2 id="configuring-registry-install-time"><a class="anchor" href="#configuring-registry-install-time"></a>Configure the registry at installation time</h2> <div class="sectionbody"> <div class="paragraph"> <p>Registry configuration can be set upon installation using command:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ kamel install --registry registry-host.io [--organization your-user-id-or-org] [--registry-secret my-secret-registry-conf]</code></pre> </div> </div> <div class="paragraph"> <p>Although optionals, the <code>organization</code> and <code>registry-secret</code> parameters are strongly suggested in order to secure the pull/push operations on a registry that is private, although accessible through the Internet. The secret is something that will <a href="https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/#create-a-pod-that-uses-your-secret">included at deployment time</a> as <code>imagePullSecret</code> configuration.</p> </div> <div class="paragraph"> <p>As each registry may have a slightly different way of securing the access you can use the guidelines provided in <a href="dockerhub.html" class="xref page">Docker Hub</a> registry configuration and adjust accordingly.</p> </div> </div> </div> <div class="sect1"> <h2 id="configuring-registry-after-install"><a class="anchor" href="#configuring-registry-after-install"></a>Configure the registry after installation</h2> <div class="sectionbody"> <div class="paragraph"> <p>The settings you&#8217;ve provided in the chapter above are applied to the <code>IntegrationPlatform</code> custom resource. In particular you can find them in the <code>.spec.pipeline.registry</code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: camel.apache.org/v1
kind: IntegrationPlatform
metadata:
  labels:
    app: camel-k
  name: camel-k
spec:
  build:
    registry:
      address: registry-host.io
      organization: your-user-id-or-org
      secret: my-secret-registry-conf</code></pre> </div> </div> <div class="paragraph"> <p>You can therefore update the values in the <code>IntegrationPlatform</code> in order to perform any change to the registry configuration after the Camel K operator is installed. The changes will be immediately reconciled and ready to use.</p> </div> </div> </div> <div class="sect1"> <h2 id="configuring-registry"><a class="anchor" href="#configuring-registry"></a>Container registry requirements</h2> <div class="sectionbody"> <div class="paragraph"> <p>Each platform may have its default registry of choice. And each container registry may have a slight different configuration. Please, be aware that we won&#8217;t be able to support all the available solutions.</p> </div> <div class="paragraph"> <p>The only requirement we have is that the registry must be able to produce/consume images with the following tagging convention: <code>&lt;registry-host&gt;[:&lt;registry-port&gt;]/&lt;k8s-namespace&gt;/kit-&lt;hash-code&gt;@sha256:&lt;sha256-code&gt;</code>, ie <code>10.110.251.124/default/kit-ck0612dahvgs73ffe5g0@sha256:3c9589dd093b689aee6bf5c2d35aa1fce9d0e76d5bb7da8b61d87e7a1ed6f36a</code>.</p> </div> <div class="paragraph"> <p>This should be within the standard convention adopted by <a href="https://docs.docker.com/engine/reference/commandline/pull/#pull-an-image-by-digest-immutable-identifier">pulling a Docker image by digest</a> (immutable).</p> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> you can configure Camel K to use an insecure private registry. However, your Kubernetes cluster may not be able to <a href="https://github.com/apache/camel-k/issues/4720#issuecomment-1708228367">pull images from an insecure registry without proper configuration</a>. </td> </tr> </table></div> </div> <div class="sect2"> <h3 id="configuring-registry-list"><a class="anchor" href="#configuring-registry-list"></a>Special container registry requirements</h3> <div class="paragraph"> <p>We have some hints that can help you configuring on the most common platforms:</p> </div> <div class="ulist"> <ul> <li> <p><a href="digitalocean.html" class="xref page">DigitalOcean</a></p> </li> <li> <p><a href="dockerhub.html" class="xref page">Docker Hub</a></p> </li> <li> <p><a href="github.html" class="xref page">Github Packages</a></p> </li> <li> <p><a href="gcr.html" class="xref page">Gcr.io</a></p> </li> <li> <p><a href="icr.html" class="xref page">IBM Container Registry</a></p> </li> <li> <p><a href="k3s.html" class="xref page">K3s</a></p> </li> </ul> </div> </div> </div> </div> <div class="sect1"> <h2 id="configuring-registry-run-it-yours"><a class="anchor" href="#configuring-registry-run-it-yours"></a>Run your own container registry</h2> <div class="sectionbody"> <div class="paragraph"> <p>You can also <a href="own.html" class="xref page">run your own registry</a>, but this option is recommended only for advanced use cases as it may requires certain changes in the cluster configuration, so, make sure to understand how each change may affect your cluster. As you&#8217;ve seen in the diagram above, the cluster has to be aware of the presence of the registry in order to pull the images pushed by the operator.</p> </div> </div> </div> <div class="sect1"> <h2 id="pruning-registry"><a class="anchor" href="#pruning-registry"></a>Pruning unused images from container registry</h2> <div class="sectionbody"> <div class="paragraph"> <p>Over time, while building integrations the produced images are stored in the container registry and it may become outdated and may require pruning old unused images.</p> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> Each container registry vendor can provide unique details about the pruning policy, check your vendor documentation. </td> </tr> </table></div> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> This is an unsupported functionality, use at your own risk. </td> </tr> </table></div> </div> <div class="paragraph"> <p>It&#8217;s recommended only to delete container images from container registry if the corresponding <code>Integration</code> or <code>IntegrationKit</code> doesn&#8217;t exist anymore or has no expectation to be used. Then if you delete the container image, you should also delete corresponding <code>Integrationkit</code> custom resource object.</p> </div> <div class="paragraph"> <p>Camel K materializes the Camel integration in one of the two kubernetes objects: <code>Deployment</code> or <code>CronJob</code>.</p> </div> <div class="paragraph"> <p>You have to check if the <code>Integration</code> is running or scaled down to zero pods, which is the case for CronJobs or Knative deployments.</p> </div> <div class="paragraph"> <p>Then, we can provide some general guide about how to inspect the Camel K objects to prune unused images.</p> </div> <div class="paragraph"> <p>For this guide, we assume you are connected to the container registry with <code>docker login</code>.</p> </div> <div class="paragraph"> <p>Step 1: List all Camel K container images, prefixed with <code>camel-k</code></p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-none hljs">$ docker images |grep k-kit
10.98.248.245/camel-k/camel-k-kit-cpth0mtf799b89lheon0  &lt;none&gt;  bd52ae6e32af   54 years ago    481MB
10.98.248.245/camel-k/camel-k-kit-cptguntf799b89lheok0  &lt;none&gt;  b7f347193b3c   54 years ago    471MB
10.98.248.245/camel-k/camel-k-kit-cptgv0tf799b89lheokg  &lt;none&gt;  8d2d963396ca   54 years ago    477MB
10.98.248.245/camel-k/camel-k-kit-cpth0mtf799b89lheomg  &lt;none&gt;  dc11800ef203   54 years ago    481MB
10.98.248.245/camel-k/camel-k-kit-cptgvd5f799b89lheol0  &lt;none&gt;  0bbdf20f2f49   54 years ago    479MB</code></pre> </div> </div> <div class="paragraph"> <p>Step 2: List the container images of the Camel K Integrations (don&#8217;t print the sha256 digest)</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-none hljs">$ kubectl get -A it -oyaml|grep 'image:'|sed 's/^\s*image: //g;s/@sha256.*//g'|sort|uniq
10.98.248.245/camel-k/camel-k-kit-cptguntf799b89lheok0
10.98.248.245/camel-k/camel-k-kit-cptgv0tf799b89lheokg
10.98.248.245/camel-k/camel-k-kit-cptgvd5f799b89lheol0
10.98.248.245/camel-k/camel-k-kit-cpth0mtf799b89lheon0</code></pre> </div> </div> <div class="paragraph"> <p>Step 3: Compare them and remove the container images and <code>IntegrationKit</code> from list 1 not found in list 2</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-none hljs">docker rmi dc11800ef203
kubectl delete ik/kit-cpth0mtf799b89lheomg</code></pre> </div> </div> <div class="paragraph"> <p>There is a <a href="https://github.com/apache/camel-k/blob/main/script/prune-camel-k-kit-images.sh">prune-camel-k-kit-images.sh</a> script to help you in this task. This script requires the following cli tools: <code>kubectl, comm, docker</code>. The script lists the dangling images from the container registry, it accepts two parameters with no arguments: <code>-v</code> (verbose) and <code>-p</code> (prune images).</p> </div> <div class="paragraph"> <p>An example of an execution:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-none hljs">$ prune-camel-k-kit-images.sh -p
&gt; Images from container registry, eligible for pruning.
10.98.248.245/camel-k/camel-k-kit-cpth0mtf799b89lheom0

&gt; Delete Container Images
integrationkit.camel.apache.org "kit-cpth0mtf799b89lheom0" deleted
Untagged: 10.98.248.245/camel-k/camel-k-kit-cpth0mtf799b89lheom0@sha256:3857f8e331e50ded6529641e668de8781eb3cb7b881ea14b89cfc4f6b6e9d455
Deleted: sha256:1015a6b18f164e9b086337e69a98e5850149c158cb778bac6059984756dc0528
Deleted: sha256:2f0d224916e77654c4401f6fc4b1147a9a6e3ccf713213c38e877d7b939bab81</code></pre> </div> </div> </div> </div> </article> <aside class="toc sidebar" aria-label="Table of contents" data-title="Contents" data-levels="2"> <div class="toc-menu"></div> </aside> </div> </main> </div> <div class="footer-tools"> <a href="#top" title="Reach the top of the page">Back to top</a> </div> <footer> <div class="footer"> <figure class="logo"> <img src="../../../../_/img/logo-d-a567cee6fa.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <input id="footer-toggle-overview" type="checkbox" title="Show/Hide Overview section"> <dl> <dt><label for="footer-toggle-overview">Overview</label><label for="footer-toggle-overview">&#65291;</label></dt> <dd><a href="../../../../blog/">Blog</a></dd> <dd><a href="../../../../docs/">Documentation</a></dd> <dd><a href="../../../../community/support/">Community</a></dd> <dd><a href="../../../../download/">Download</a></dd> </dl> <input id="footer-toggle-documentation" type="checkbox" title="Show/Hide Documentation section"> <dl> <dt><label for="footer-toggle-documentation">Documentation</label><label for="footer-toggle-documentation">&#65291;</label></dt> <dd><a href="../../../../manual/">User Manual</a></dd> <dd><a href="../../../../components/next/index.html">Components</a></dd> <dd><a href="../../../../camel-k/next/">Camel-K</a></dd> <dd><a href="../../../../camel-kafka-connector/next/">Camel Kafka Connector</a></dd> <dd><a href="../../../../camel-quarkus/next/">Camel Quarkus</a></dd> <dd><a href="../../../../camel-spring-boot/next/">Camel Spring Boot</a></dd> <dd><a href="../../../../camel-karaf/3.22.x/">Camel Karaf</a></dd> <dd><a href="../../../../manual/faq/index.html">FAQ</a></dd> </dl> <input id="footer-toggle-community" type="checkbox" title="Show/Hide Community section"> <dl> <dt><label for="footer-toggle-community">Community</label><label for="footer-toggle-community">&#65291;</label></dt> <dd><a href="../../../../community/support/">Support</a></dd> <dd><a href="../../../../community/contributing/">Contributing</a></dd> <dd><a href="../../../../community/mailing-list/">Mailing Lists</a></dd> <dd><a href="../../../../community/user-stories/">User stories</a></dd> <dd><a href="../../../../community/articles/">Articles</a></dd> <dd><a href="../../../../community/books/">Books</a></dd> <dd><a href="../../../../community/team/">Team</a></dd> </dl> <input id="footer-toggle-about" type="checkbox" title="Show/Hide Acknowledgements section"> <dl> <dt><label for="footer-toggle-about">About</label><label for="footer-toggle-about">&#65291;</label></dt> <dd><a href="../../../../acknowledgments/">Acknowledgments</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p class="remark"> &copy; 2004-2024 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> <div class="resources"> <div class="context"> <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a> </div> <div class="context"> <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/policies/conduct">Code of Conduct</a> </div> <div class="context"> <a href="../../../../sitemap/">Sitemap</a> </div> </div> <div class="footer-icons"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon" focusable="false"><use xlink:href="../../../../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg class="brand-icon" focusable="false"><use xlink:href="../../../../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon" focusable="false"><use xlink:href="../../../../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg class="brand-icon" focusable="false"><use xlink:href="../../../../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> </div> </footer> <script src="../../../../_/js/vendor/algoliasearch-bad45193e2.js"></script> <script src="../../../../_/js/site-c215fb6972.js"></script> <script async src="../../../../_/js/vendor/highlight-621a10fe1b.js"></script> <script async src="../../../../_/js/vendor/svg4everybody-a0c573f2b9.js"></script> <script async src="../../../../_/js/vendor/tabs-5aea11bcf5.js" data-sync-storage-key="preferred-tab"></script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Organization", "name": "Apache Camel", "url": "https://camel.apache.org", "sameAs": [ "https://twitter.com/ApacheCamel" ], "logo": "../../../../_/img/logo-d-a567cee6fa.svg", "description": "Apache Camel ™ is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL." } </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "BreadcrumbList", "itemListElement": [{ "@type": "ListItem", "position": 1, "name": "Apache Camel", "item": "https://camel.apache.org/" }, { "@type": "ListItem", "position": 2, "name": "Camel K", "item": "https://camel.apache.org/camel-k/2.4.x/index.html" }, { "@type": "ListItem", "position": 3, "name": "2.4.x", "item": "https://camel.apache.org/camel-k/2.4.x/index.html" }, { "@type": "ListItem", "position": 4, "name": "Installation", "item": "https://camel.apache.org/camel-k/2.4.x/installation/installation.html" }, { "@type": "ListItem", "position": 5, "name": "Configure Registry", "item": "https://camel.apache.org/camel-k/2.4.x/installation/registry/registry.html" }] } </script> </body> </html> 