<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Kamelets user guide :: Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/camel-k/2.4.x/kamelets/kamelets-user.html"> <meta name="generator" content="Antora 3.1.7"> <link rel="stylesheet" href="../../../_/css/site-b287b96c63.css"> <meta name="application-name" content="Apache Camel"> <meta property="og:title" content="Kamelets user guide"> <meta property="og:site_name" content="Apache Camel"> <meta property="og:url" content="https://camel.apache.org"> <meta property="og:description" content="Camel is an open source integration framework that empowers you to quickly and easily integrate various systems consuming or producing data."> <meta property="og:type" content="website"> <meta property="og:image" content="https://camel.apache.org/_/img/logo-d-a567cee6fa.svg"> <link rel="manifest" href="../../../site.webmanifest"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../../favicon-128.png" sizes="128x128"> </head> <body class="article"> <header class="header"> <nav class="navbar" aria-label="Main menu"> <div class="navbar-brand"> <a class="nav-logo" href="../../.."></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item-section navbar-item navbar-topics" href="../../../blog/"> <img alt="Blog" src="/_/img/blog-4c7fa4cb60.svg"> Blog </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../docs/"> <img alt="Documentation" src="/_/img/documentation-abb1b7f8b1.svg"> Documentation </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../community/"> <img alt="Community" src="/_/img/community-2ec8a3dc8b.svg"> Community </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../download/"> <img alt="Download" src="/_/img/download-63cdd75074.svg"> Download </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../security/"> <img alt="Security" src="/_/img/security-06abe157b3.svg"> Security </a> </div> </div> <div class="navbar-fill"></div> <div class="break-row"></div> <div class="navbar-search results-hidden"> <input id="search" class="search" placeholder="Search" autocomplete="off"> <img src="../../../_/img/cancel-1ed239489b.svg" alt="Clear" id="search-cancel"> <div id="search_results"></div> </div> <div class="navbar-tools"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg focusable="false" class="brand-icon"><use xlink:href="../../../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg focusable="false" class="brand-icon"><use xlink:href="../../../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg focusable="false" class="brand-icon"><use xlink:href="../../../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg focusable="false" class="brand-icon"><use xlink:href="../../../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button" aria-label="Menu"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <a id="top"></a> <div class="body"> <div class="nav-container" data-component="camel-k" data-version="2.4.x"> <aside class="nav" aria-label="Side menu"> <div class="panels"> <div class="nav-panel-menu is-active"> <nav class="nav-menu" data-panel="menu" aria-label="Topics"> <h3 class="title"><a href="../index.html">Camel K</a></h3> <ul class="nav-list"> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../installation/installation.html">Installation</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../installation/registry/registry.html">Configure Registry</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../installation/advanced/maven.html">Configure Maven</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../installation/knative.html">Configure Knative</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../installation/upgrade.html">Upgrade</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../installation/uninstalling.html">Uninstalling</a> </li> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../installation/advanced/advanced.html">Advanced</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../installation/advanced/build-config.html">Build tuning</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../installation/advanced/network.html">Network architecture</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../installation/advanced/resources.html">Resource management</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../installation/advanced/multi.html">Multiple Operators</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../installation/advanced/http-proxy.html">HTTP Proxy</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../installation/advanced/multi-architecture.html">Multi Architecture</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../installation/advanced/offline.html">Offline</a> </li> </ul> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../cli/cli.html">Command Line Interface</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../cli/file-based-config.html">File-based Config</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../cli/modeline.html">Modeline</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../running/running.html">Run an Integration</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../running/dev-mode.html">Developer mode</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../running/dry-run.html">Dry run</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../running/runtime-version.html">Camel version</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../running/quarkus-native.html">Quarkus Native</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../running/camel-runtimes.html">Camel runtimes</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../running/import.html">Import existing Camel apps</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../running/run-from-github.html">Run from GitHub</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../running/promoting.html">Promote an Integration</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../running/knative-sink.html">Knative Sinks</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../languages/languages.html">Languages</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../languages/java.html">Java</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../languages/yaml.html">YAML</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../languages/xml.html">XML</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../languages/groovy.html">Groovy</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../languages/javascript.html">Javascript</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../languages/jsh.html">JSheel</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../languages/kotlin.html">Kotlin</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../configuration/configuration.html">Configuration</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../configuration/build-time-properties.html">Build time properties</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../configuration/components.html">Components</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../configuration/dependencies.html">Dependencies</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../configuration/maven-profile.html">Maven Profile</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../configuration/runtime-properties.html">Properties</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../configuration/runtime-config.html">Runtime configuration</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../configuration/runtime-resources.html">Runtime resources</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="kamelets.html">Kamelets</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="kamelets-distribution.html">Distribution</a> </li> <li class="nav-item is-current-page" data-depth="2"> <a class="nav-link" href="kamelets-user.html">User Guide</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="kamelets-dev.html">Developer Guide</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="kameletbindings-error-handler.html">Error Handling</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../traits/traits.html">Traits</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/3scale.html">3Scale</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/affinity.html">Affinity</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/aws-secrets-manager.html">Aws Secrets Manager</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/azure-key-vault.html">Azure Key Vault</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/builder.html">Builder</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/camel.html">Camel</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/container.html">Container</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/cron.html">Cron</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/deployer.html">Deployer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/deployment.html">Deployment</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/environment.html">Environment</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/error-handler.html">Error Handler</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/gc.html">Gc</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/gcp-secret-manager.html">Gcp Secret Manager</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/hashicorp-vault.html">Hashicorp Vault</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/health.html">Health</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/ingress.html">Ingress</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/istio.html">Istio</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/jolokia.html">Jolokia</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/jvm.html">Jvm</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/kamelets.html">Kamelets</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/keda.html">Keda</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/knative-service.html">Knative Service</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/knative.html">Knative</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/logging.html">Logging</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/master.html">Master</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/mount.html">Mount</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/openapi.html">Openapi</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/owner.html">Owner</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/pdb.html">Pdb</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/platform.html">Platform</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/pod.html">Pod</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/prometheus.html">Prometheus</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/pull-secret.html">Pull Secret</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/quarkus.html">Quarkus</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/registry.html">Registry</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/resume.html">Resume</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/route.html">Route</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/security-context.html">Security Context</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/service-binding.html">Service Binding</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/service.html">Service</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/telemetry.html">Telemetry</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/toleration.html">Toleration</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../traits/tracing.html">Tracing</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../pipeline/pipeline.html">Pipelines</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../pipeline/tekton.html">Tekton</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <span class="nav-text">Scaling</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../scaling/integration.html">Integrations</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../scaling/binding.html">Pipes</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <span class="nav-text">Observability</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../observability/logging.html">Logging</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../observability/logging/operator.html">Operator</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../observability/logging/integration.html">Integration</a> </li> </ul> </li> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../observability/monitoring.html">Monitoring</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../observability/monitoring/operator.html">Operator</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../observability/monitoring/integration.html">Integration</a> </li> </ul> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../troubleshooting/troubleshooting.html">Troubleshooting</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../troubleshooting/debugging.html">Debugging</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../troubleshooting/operating.html">Operating</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../troubleshooting/known-issues.html">Known Issues</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../architecture/architecture.html">Architecture</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../architecture/operator.html">Operator</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../architecture/cr/integration-platform.html">IntegrationPlatform</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../architecture/cr/integration.html">Integration</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../architecture/cr/integration-kit.html">IntegrationKit</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../architecture/cr/build.html">Build</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../architecture/cr/camel-catalog.html">CamelCatalog</a> </li> </ul> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../architecture/runtime.html">Runtime</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../architecture/traits.html">Traits</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../architecture/kamelets.html">Kamelets</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../architecture/incremental-image.html">Incremental Image</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <span class="nav-text">API</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../apis/camel-k.html">Camel K API</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../apis/kamelets.html">Kamelets API</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../apis/java.html">Java API</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../contributing/developers.html">Contributing</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="../contributing/local-development.html">Local development</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../contributing/local-execution.html">Operator - local execution</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="../contributing/remote-debugging.html">Operator - remote debug</a> </li> </ul> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../contributing/local-deployment-olm.html">Local OLM deployment</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../contributing/e2e.html">Local E2E testing</a> </li> </ul> </li> </ul> </li> </ul> </nav> </div> <div class="nav-panel-explore" data-panel="explore"> <div class="context"> <span class="title">Camel K</span> <span class="version">2.4.x</span> </div> <ul class="components"> <li class="component"> <span class="title"> <a href="../../../manual/index.html">User manual</a> </span></li> <li class="component"><span class="title">Camel Components</span> <ul class="versions"> <li class="version"> <a href="../../../components/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../../../components/4.8.x/index.html">4.8.x (LTS)</a> </li> <li class="version"> <a href="../../../components/4.4.x/index.html">4.4.x (LTS)</a> </li> <li class="version"> <a href="../../../components/3.22.x/index.html">3.22.x (LTS)</a> </li> </ul></li> <li class="component"> <span class="title"> <a href="../../../camel-core/index.html">Camel Core</a> </span></li> <li class="component is-current"><span class="title">Camel K</span> <ul class="versions"> <li class="version"> <a href="../../next/index.html">Next (Pre-release)</a> </li> <li class="version is-current"> <a href="../index.html">2.4.x</a> </li> </ul></li> <li class="component"><span class="title">Camel Kafka Connector</span> <ul class="versions"> <li class="version"> <a href="../../../camel-kafka-connector/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../../../camel-kafka-connector/4.8.x/index.html">4.8.x</a> </li> </ul></li> <li class="component"><span class="title">Kamelet Catalog</span> <ul class="versions"> <li class="version"> <a href="../../../camel-kamelets/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../../../camel-kamelets/4.8.x/index.html">4.8.x (LTS)</a> </li> <li class="version"> <a href="../../../camel-kamelets/4.4.x/index.html">4.4.x (LTS)</a> </li> </ul></li> <li class="component"><span class="title">Camel Karaf</span> <ul class="versions"> <li class="version"> <a href="../../../camel-karaf/3.22.x/index.html">3.22.x (LTS)</a> </li> </ul></li> <li class="component"><span class="title">Camel Quarkus</span> <ul class="versions"> <li class="version"> <a href="../../../camel-quarkus/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../../../camel-quarkus/3.15.x/index.html">3.15.x</a> </li> <li class="version"> <a href="../../../camel-quarkus/3.8.x/index.html">3.8.x</a> </li> </ul></li> <li class="component"><span class="title">Camel Spring Boot</span> <ul class="versions"> <li class="version"> <a href="../../../camel-spring-boot/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../../../camel-spring-boot/4.8.x/index.html">4.8.x (LTS)</a> </li> <li class="version"> <a href="../../../camel-spring-boot/4.4.x/index.html">4.4.x (LTS)</a> </li> <li class="version"> <a href="../../../camel-spring-boot/3.22.x/index.html">3.22.x (LTS)</a> </li> </ul></li> </ul> </div> </div> </aside> </div> <main class="article"> <nav class="toolbar" aria-label="Toolbar"> <button class="nav-toggle" type="button" aria-label="Toggle submenu"></button> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="../index.html">Camel K</a></li> <li><a href="kamelets.html">Kamelets</a></li> <li><a href="kamelets-user.html">User Guide</a></li> </ul> </nav> <div class="page-versions"> <button class="version-menu-toggle" type="button" title="Show other versions of page">2.4.x</button> <div class="version-menu"> <a class="version" href="../../next/kamelets/kamelets-user.html">Next (Pre-release)</a> <a class="version is-current" href="kamelets-user.html">2.4.x</a> </div> </div> <div class="edit-this-page"><a href="https://github.com/apache/camel-k/edit/release-2.4.x/docs/modules/ROOT/pages/kamelets/kamelets-user.adoc">Edit this Page</a></div> </nav> <div class="content"> <article class="doc"> <h1 class="page">Kamelets user guide</h1> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>Speaking technically, a Kamelet is a resource that can be installed on any Kubernetes cluster. The following is an example of a Kamelet that we&#8217;ll use to discuss the various parts:</p> </div> <div class="listingblock"> <div class="title">telegram-text-source.kamelet.yaml</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: camel.apache.org/v1
kind: Kamelet
metadata:
  name: telegram-text-source <i class="conum" data-value="1"></i><b>(1)</b>
  annotations: <i class="conum" data-value="2"></i><b>(2)</b>
    camel.apache.org/kamelet.icon: "data:image/svg+xml;base64,PD94bW..."
  labels: <i class="conum" data-value="3"></i><b>(3)</b>
    camel.apache.org/kamelet.type: "source"
spec:
  definition: <i class="conum" data-value="4"></i><b>(4)</b>
    title: "Telegram Text Source"
    description: |-
      Receive all text messages that people send to your telegram bot.

      # Instructions
      Description can include Markdown and guide the final user to configure the Kamelet parameters.
    required:
      - botToken
    properties:
      botToken:
        title: Token
        description: The token to access your bot on Telegram
        type: string
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:password

  dataTypes: <i class="conum" data-value="5"></i><b>(5)</b>
    out:
      default: text
      types:
        text:
          mediaType: text/plain
          # schema:
  template: <i class="conum" data-value="6"></i><b>(6)</b>
    from:
      uri: telegram:bots
      parameters:
        authorizationToken: "#property:botToken"
      steps:
        - convert-body-to:
            type: "java.lang.String"
            type-class: "java.lang.String"
            charset: "UTF8"
        - filter:
            simple: "${body} != null"
        - log: "${body}"
        - to: "kamelet:sink"</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>The Kamelet ID, to be used in integrations that want to leverage the Kamelet</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>Annotations such as icon provide additional display features to the Kamelet</td> </tr> <tr> <td><i class="conum" data-value="3"></i><b>3</b></td> <td>Labels allow users to query Kamelets e.g. by kind ("source" vs. "sink")</td> </tr> <tr> <td><i class="conum" data-value="4"></i><b>4</b></td> <td>Description of the Kamelets and parameters in JSON-schema specification format</td> </tr> <tr> <td><i class="conum" data-value="5"></i><b>5</b></td> <td>The data type that the Kamelet produces. Data type specifications contain the media type of the output and also may include a schema.</td> </tr> <tr> <td><i class="conum" data-value="6"></i><b>6</b></td> <td>The route template defining the behavior of the Kamelet</td> </tr> </table></div> </div> <div class="paragraph"> <p>At a high level (more details are provided later), a Kamelet resource describes:</p> </div> <div class="ulist"> <ul> <li> <p>A metadata section containing the ID (<code>metadata</code> &#8594; <code>name</code>) of the Kamelet and other information, such as the type of Kamelet (<code>source</code> or <code>sink</code>)</p> </li> <li> <p>A JSON-schema specification (<code>definition</code>) containing a set of parameters that you can use to configure the Kamelet</p> </li> <li> <p>An optional section containing information about input and output expected by the Kamelet (<code>types</code>)</p> </li> <li> <p>A Camel flow in YAML DSL containing the implementation of the Kamelet (<code>flow</code>)</p> </li> </ul> </div> <div class="paragraph"> <p>Once <strong>installed on a Kubernetes namespace</strong>, the Kamelet can be <strong>used by any integration in that namespace</strong>.</p> </div> <div class="paragraph"> <p>Kamelets can be installed on a Kubernetes namespace with a simple command:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl apply -f telegram-text-source.kamelet.yaml</code></pre> </div> </div> <div class="paragraph"> <p>Kamelets are standard YAML files, but their common extension is <code>.kamelet.yaml</code> to help IDEs to recognize them and provide auto-completion (in the future).</p> </div> </div> </div> <div class="sect1"> <h2 id="kamelets-usage-integration"><a class="anchor" href="#kamelets-usage-integration"></a>Using Kamelets in Integrations</h2> <div class="sectionbody"> <div class="paragraph"> <p>Kamelets can be used in integrations <strong>as if they were standard Camel components</strong>. For example, suppose that you&#8217;ve created the <code>telegram-text-source</code> Kamelet in the <code>default</code> namespace on Kubernetes, then you can write the following integration to use the Kamelet:</p> </div> <div class="listingblock"> <div class="title">kamlet-route.yaml</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">- from:
    uri: "kamelet:telegram-text-source?botToken=XXXXYYYY"
    steps:
      - to: "log:info"</code></pre> </div> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> URI properties ("botToken") match the corresponding parameters in the Kamelet definition </td> </tr> </table></div> </div> <div class="paragraph"> <p>Kamelets can also be used multiple times in the same route definition. This happens usually with sink Kamelets.</p> </div> <div class="paragraph"> <p>Suppose that you&#8217;ve defined a Kamelet named "my-company-log-sink" in your Kubernetes namespace, then you can write a route like this:</p> </div> <div class="listingblock"> <div class="title">kamlet-multi-route.yaml</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">- from:
    uri: "kamelet:telegram-text-source?botToken=XXXXYYYY"
    steps:
      - to: "kamelet:my-company-log-sink?bucket=general"
      - filter:
          simple: '${body} contains "Camel"'
      - to: "kamelet:my-company-log-sink?bucket=special"</code></pre> </div> </div> <div class="paragraph"> <p>The "my-company-log-sink" will obviously define what it means to write a log in the enterprise system and what is concretely a "bucket".</p> </div> <div class="sect2"> <h3 id="_configuration"><a class="anchor" href="#_configuration"></a>Configuration</h3> <div class="paragraph"> <p>When using a Kamelet, the instance parameters (e.g. "botToken", "bucket") can be passed explicitly in the URI or you can use properties. Properties can be also loaded implicitly by the operator from Kubernetes secrets (see below).</p> </div> <div class="sect3"> <h4 id="_1_uri_based_configuration"><a class="anchor" href="#_1_uri_based_configuration"></a>1. URI based configuration</h4> <div class="paragraph"> <p>You can configure the Kamelet by passing directly the configuration parameters in the URI, as in:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">- from:
    uri: "kamelet:telegram-text-source?botToken=the-token-value"
...</code></pre> </div> </div> <div class="paragraph"> <p>In this case, "the-token-value" is passed explicitly in the URI (you can also pass a custom property placeholder as value).</p> </div> </div> <div class="sect3"> <h4 id="_2_property_based_configuration"><a class="anchor" href="#_2_property_based_configuration"></a>2. Property based configuration</h4> <div class="paragraph"> <p>An alternative way to configure the Kamelet is to provide configuration parameters as properties of the integration.</p> </div> <div class="paragraph"> <p>Taking for example a different version of the integration above:</p> </div> <div class="listingblock"> <div class="title">kamelet-properties-route.yaml</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">- from:
    uri: "kamelet:telegram-text-source"
    steps:
      - to: "kamelet:my-company-log-sink"
      - filter:
          simple: '${body} contains "Camel"'
      - to: "kamelet:my-company-log-sink/mynamedconfig"</code></pre> </div> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> The integration above does not contain URI query parameters and the last URI ("kamelet:my-company-log-sink/mynamedconfig") contains a path parameter with value "mynamedconfig" </td> </tr> </table></div> </div> <div class="paragraph"> <p>The integration above needs some configuration in order to run properly. The configuration can be provided in a property file:</p> </div> <div class="listingblock"> <div class="title">kamelet-example.properties</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># Configuration for the Telegram source Kamelet
camel.kamelet.telegram-text-source.botToken=the-token-value

# General configuration for the Company Log Kamelet
camel.kamelet.my-company-log-sink.bucket=general
# camel.kamelet.my-company-log-sink.xxx=yyy

# Specific configuration for the Company Log Kamelet corresponding to the named configuration "mynamedconfig"
camel.kamelet.my-company-log-sink.mynamedconfig.bucket=special
# When using "kamelet:my-company-log-sink/mynamedconfig", the bucket will be "special", not "general"</code></pre> </div> </div> <div class="paragraph"> <p>Then the integration can be run with the following command:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kamel run kamelet-properties-route.yaml --property file:kamelet-example.properties</code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_3_implicit_configuration_using_secrets"><a class="anchor" href="#_3_implicit_configuration_using_secrets"></a>3. Implicit configuration using secrets</h4> <div class="paragraph"> <p>Property based configuration can also be used implicitly by creating secrets in the namespace that will be used to determine the Kamelets configuration.</p> </div> <div class="paragraph"> <p>To use implicit configuration via secret, we first need to create a configuration file holding only the properties of a named configuration.</p> </div> <div class="listingblock"> <div class="title">mynamedconfig.properties</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># Only configuration related to the "mynamedconfig" named config
camel.kamelet.my-company-log-sink.mynamedconfig.bucket=special
# camel.kamelet.my-company-log-sink.mynamedconfig.xxx=yyy</code></pre> </div> </div> <div class="paragraph"> <p>We can create a secret from the file and label it so that it will be picked up automatically by the operator:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell"># Create the secret from the property file
kubectl create secret generic my-company-log-sink.mynamedconfig --from-file=mynamedconfig.properties
# Bind it to the named configuration "mynamedconfig" of the "my-company-log-sink" Kamelet
kubectl label secret my-company-log-sink.mynamedconfig camel.apache.org/kamelet=my-company-log-sink camel.apache.org/kamelet.configuration=mynamedconfig</code></pre> </div> </div> <div class="paragraph"> <p>You can now write an integration that uses the Kamelet with the named configuration:</p> </div> <div class="listingblock"> <div class="title">kamlet-namedconfig-route.yaml</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">- from:
    uri: "timer:tick"
    steps:
      - setBody:
          constant: "Hello"
      - to: "kamelet:my-company-log-sink/mynamedconfig"</code></pre> </div> </div> <div class="paragraph"> <p>You can run this integration without specifying other parameters, the Kamelet endpoint will be implicitly configured by the Camel K operator that will automatically mount the secret into the integration Pod.</p> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="kamelets-usage-binding"><a class="anchor" href="#kamelets-usage-binding"></a>Binding Kamelets in Pipes</h2> <div class="sectionbody"> <div class="paragraph"> <p>In some contexts (for example <strong>"serverless"</strong>) users often want to leverage the power of Apache Camel to be able to connect to various sources/sinks, without doing additional processing (such as transformations or other enterprise integration patterns).</p> </div> <div class="paragraph"> <p>A common use case is that of <strong>Knative Event Sources</strong>, for which the Apache Camel developers provide the concept of Kamelets and Pipes. Kamelets represent an <strong>evolution</strong> of the Camel route templates to provide an opinionated and easy to use connector to various components and services. The Kamelets allow using a declarative style of binding sources and sinks where data produced by a source, transformed in the form of actions steps and pushed to a given sink, via a resource named <strong>Pipe</strong>.</p> </div> <div class="sect2"> <h3 id="_binding_to_knative"><a class="anchor" href="#_binding_to_knative"></a>Binding to Knative</h3> <div class="paragraph"> <p>A Pipe allows to move data from a system described by a Kamelet towards a Knative destination, or from a Knative channel/broker to another external system described by a Kamelet. This means Pipes may act as event sources and sinks for the Knative eventing broker in a declarative way.</p> </div> <div class="paragraph"> <p>For example, here is a Pipe that connects a Kamelet Telegram source to the Knative broker:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: camel.apache.org/v1
kind: Pipe
metadata:
  name: telegram-to-knative
spec:
  source: <i class="conum" data-value="1"></i><b>(1)</b>
    ref:
      kind: Kamelet
      apiVersion: camel.apache.org/v1
      name: telegram-text-source
    properties:
      botToken: the-token-here
  sink: <i class="conum" data-value="2"></i><b>(2)</b>
    ref:
      kind: Broker
      apiVersion: eventing.knative.dev/v1
      name: default</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Reference to the source that provides data</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>Reference to the sink where data should be sent to</td> </tr> </table></div> </div> <div class="paragraph"> <p>This binding takes the <code>telegram-text-source</code> Kamelet, configures it using specific properties ("botToken") and makes sure that messages produced by the Kamelet are forwarded to the Knative <strong>Broker</strong> named "default".</p> </div> <div class="paragraph"> <p>Note that source and sink are specified as standard <strong>Kubernetes object references</strong> in a declarative way.</p> </div> <div class="paragraph"> <p>Knative eventing uses the CloudEvents data format by default. You may want to set some properties that specify the event attributes such as the event type.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: camel.apache.org/v1
kind: Pipe
metadata:
  name: telegram-to-knative
spec:
  source:
    ref:
      kind: Kamelet
      apiVersion: camel.apache.org/v1
      name: telegram-text-source
    properties:
      botToken: the-token-here
  sink:
    ref:
      kind: Broker
      apiVersion: eventing.knative.dev/v1
      name: default
    properties:
      type: org.apache.camel.telegram.events <i class="conum" data-value="1"></i><b>(1)</b></code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Sets the event type attribute of the CloudEvent produced by this Pipe</td> </tr> </table></div> </div> <div class="paragraph"> <p>This way you may specify event attributes before publishing to the Knative broker. Note that Camel uses a default CloudEvents event type <code>org.apache.camel.event</code> for events produced by Camel.</p> </div> <div class="paragraph"> <p>You can overwrite CloudEvent event attributes on the sink using the <code>ce.overwrite.</code> prefix when setting a property.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: camel.apache.org/v1
kind: Pipe
metadata:
  name: telegram-to-knative
spec:
  source:
    ref:
      kind: Kamelet
      apiVersion: camel.apache.org/v1
      name: telegram-text-source
    properties:
      botToken: the-token-here
  sink:
    ref:
      kind: Broker
      apiVersion: eventing.knative.dev/v1
      name: default
    properties:
      type: org.apache.camel.telegram.events
      ce.overwrite.ce-source: my-source <i class="conum" data-value="1"></i><b>(1)</b></code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Use "ce.overwrite.ce-source" to explicitly set the CloudEvents source attribute.</td> </tr> </table></div> </div> <div class="paragraph"> <p>The example shows how we can reference the "telegram-text-source" resource in a Pipe. It&#8217;s contained in the <code>source</code> section because it&#8217;s a Kamelet of type "source". A Kamelet of type "sink", by contrast, can only be used in the <code>sink</code> section of a <code>Pipe</code>.</p> </div> <div class="paragraph"> <p><strong>Under the covers, a Pipe creates an Integration</strong> resource that implements the binding, but all details of how to connect with Telegram forwarding the data to the Knative broker is fully transparent to the end user. For instance the Integration uses a <code>SinkBinding</code> concept under the covers in order to retrieve the Knative broker endpoint URL.</p> </div> <div class="paragraph"> <p>In the same way you can also connect a Kamelet source to a Knative channel.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: camel.apache.org/v1
kind: Pipe
metadata:
  name: telegram-to-knative-channel
spec:
  source: <i class="conum" data-value="1"></i><b>(1)</b>
    ref:
      kind: Kamelet
      apiVersion: camel.apache.org/v1
      name: telegram-text-source
    properties:
      botToken: the-token-here
  sink: <i class="conum" data-value="2"></i><b>(2)</b>
    ref:
      kind: InMemoryChannel
      apiVersion: messaging.knative.dev/v1
      name: messages</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Reference to the source that provides data</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>Reference to the Knative channel that acts as the sink where data should be sent to</td> </tr> </table></div> </div> <div class="paragraph"> <p>When reading data from Knative you just need to specify for instance the Knative broker as a source in the Pipe. Events consumed from Knative event stream will be pushed to the given sink of the Pipe.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: camel.apache.org/v1
kind: Pipe
metadata:
  name: knative-to-slack
spec:
  source: <i class="conum" data-value="1"></i><b>(1)</b>
    ref:
      kind: Broker
      apiVersion: eventing.knative.dev/v1
      name: default
    properties:
      type: org.apache.camel.event.messages
  sink: <i class="conum" data-value="2"></i><b>(2)</b>
    ref:
      kind: Kamelet
      apiVersion: camel.apache.org/v1
      name: slack-sink
    properties:
      channel: "#my-channel"
      webhookUrl: the-webhook-url</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Reference to the Knative broker source that provides data</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>Reference to the sink where data should be sent to</td> </tr> </table></div> </div> <div class="paragraph"> <p>Once again, the Pipe provides a declarative way of creating event sources and sinks for Knative eventing. In the example, all events of type <code>org.apache.camel.event.messages</code> get forwarded to the given Slack channel using the Webhook API.</p> </div> <div class="paragraph"> <p>When consuming events from the Knative broker you most likely need to filter and select the events to process. You can do that with the properties set on the Knative broker source reference, for instance filtering by the even type as shown in the example. The filter possibilities include CloudEvent attributes such as event type, source, subject and extensions.</p> </div> <div class="paragraph"> <p>In the background Camel K will automatically create a Knative Trigger resource for the Pipe that uses the filter attributes accordingly.</p> </div> <div class="listingblock"> <div class="title">Sample trigger created by Camel K</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: eventing.knative.dev/v1
kind: Trigger
metadata:
  name: camel-event-messages
spec:
  broker: default <i class="conum" data-value="1"></i><b>(1)</b>
  filter:
    attributes:
      type: org.apache.camel.event.messages
      myextension: my-extension-value
  subscriber:
    ref:
      apiVersion: serving.knative.dev/v1 <i class="conum" data-value="2"></i><b>(2)</b>
      kind: Service
      name: camel-service
    uri: /events/camel.event.messages</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Reference to the Knative broker source that provides data</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>Reference to the Camel K integration/pipe service</td> </tr> </table></div> </div> <div class="paragraph"> <p>The trigger calls the Camel K integration service endpoint URL and pushes events with the given filter attributes to the Pipe. All properties that you have set on the Knative broker source reference will be set as a filter attribute on the trigger resource (except for reserved properties such as <code>name</code> and <code>cloudEventsType</code>).</p> </div> <div class="paragraph"> <p>Note that Camel K creates the trigger resource only for Knative broker type event sources. In case you reference a Knative channel as a source in a Pipe Camel K assumes that the channel and the trigger are already present. Camel K will only create the subscription for the integration service on the channel.</p> </div> </div> <div class="sect2"> <h3 id="_binding_to_a_kafka_topic"><a class="anchor" href="#_binding_to_a_kafka_topic"></a>Binding to a Kafka Topic</h3> <div class="paragraph"> <p>The example seen in the previous paragraph can be also configured to push data a <a href="https://strimzi.io/">Strimzi</a> Kafka topic (Kamelets can be also configured to pull data from topics).</p> </div> <div class="paragraph"> <p>To do so, you need to:</p> </div> <div class="ulist"> <ul> <li> <p>Install Strimzi on your cluster</p> </li> <li> <p>Create a Strimzi <strong>Kafka</strong> cluster using plain listener and <strong>no authentication</strong></p> </li> <li> <p>Create a Strimzi <strong>KafkaTopic</strong> named <code>my-topic</code></p> </li> </ul> </div> <div class="paragraph"> <p>Refer to the <a href="https://strimzi.io/">Strimzi documentation</a> for instructions on how to do that.</p> </div> <div class="paragraph"> <p>The following binding can be created to push data into the <code>my-topic</code> topic:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: camel.apache.org/v1
kind: Pipe
metadata:
  name: telegram-text-source-to-kafka
spec:
  source:
    ref:
      kind: Kamelet
      apiVersion: camel.apache.org/v1
      name: telegram-text-source
    properties:
      botToken: the-token-here
  sink:
    ref: <i class="conum" data-value="1"></i><b>(1)</b>
      kind: KafkaTopic
      apiVersion: kafka.strimzi.io/v1beta1
      name: my-topic</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Kubernetes reference to a Strimzi KafkaTopic</td> </tr> </table></div> </div> <div class="paragraph"> <p>After creating it, messages will flow from Telegram to Kafka.</p> </div> </div> <div class="sect2"> <h3 id="_binding_to_an_explicit_uri"><a class="anchor" href="#_binding_to_an_explicit_uri"></a>Binding to an explicit URI</h3> <div class="paragraph"> <p>An alternative way to use a Pipe is to configure the source/sink to be an explicit Camel URI. For example, the following binding is allowed:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: camel.apache.org/v1
kind: Pipe
metadata:
  name: telegram-text-source-to-channel
spec:
  source:
    ref:
      kind: Kamelet
      apiVersion: camel.apache.org/v1
      name: telegram-text-source
    properties:
      botToken: the-token-here
  sink:
    uri: https://mycompany.com/the-service <i class="conum" data-value="1"></i><b>(1)</b></code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Pipe with explicitly URI</td> </tr> </table></div> </div> <div class="paragraph"> <p>This Pipe explicitly defines an URI where data is going to be pushed.</p> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> the <code>uri</code> option is also conventionally used in Knative to specify a non-kubernetes destination. To comply with the Knative specifications, in case an "http" or "https" URI is used, Camel will send <a href="https://cloudevents.io/">CloudEvents</a> to the destination. </td> </tr> </table></div> </div> </div> <div class="sect2"> <h3 id="_binding_with_data_types"><a class="anchor" href="#_binding_with_data_types"></a>Binding with data types</h3> <div class="paragraph"> <p>When referencing Kamelets in a binding users may choose from one of the supported input/output data types provided by the Kamelet. The supported data types are declared on the Kamelet itself and give additional information about used header names, content type and content schema.</p> </div> <div class="listingblock"> <div class="title">my-sample-source-to-log.yaml</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: camel.apache.org/v1
kind: Pipe
metadata:
  name: my-sample-source-to-log
spec:
  source:
    ref:
      kind: Kamelet
      apiVersion: camel.apache.org/v1
      name: my-sample-source
    data-types: <i class="conum" data-value="1"></i><b>(1)</b>
      out:
        format: text-plain <i class="conum" data-value="2"></i><b>(2)</b>
  sink:
    uri: "log:info"</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Specify the output data type on the referenced Kamelet source.</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>Select <code>text-plain</code> as an output data type of the <code>my-sample-source</code> Kamelet.</td> </tr> </table></div> </div> <div class="paragraph"> <p>The very same Kamelet <code>my-sample-source</code> may also provide a CloudEvents specific data type as an output which fits perfect for binding to a Knative broker.</p> </div> <div class="listingblock"> <div class="title">my-sample-source-to-knative.yaml</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: camel.apache.org/v1
kind: Pipe
metadata:
  name: my-sample-source-to-knative
spec:
  source:
    ref:
      kind: Kamelet
      apiVersion: camel.apache.org/v1
      name: my-sample-source
    data-types:
      out:
        format: application-cloud-events <i class="conum" data-value="1"></i><b>(1)</b>
  sink:
    ref:
      kind: Broker
      apiVersion: eventing.knative.dev/v1
      name: default</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Select <code>application-cloud-events</code> as an output data type of the <code>my-sample-source</code> Kamelet.</td> </tr> </table></div> </div> <div class="paragraph"> <p>Information about the supported data types can be found on the Kamelet itself.</p> </div> <div class="listingblock"> <div class="title">my-sample-source.kamelet.yaml</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: camel.apache.org/v1
kind: Kamelet
metadata:
  name: my-sample-source
  labels:
    camel.apache.org/kamelet.type: "source"
spec:
  definition:
# ...
  dataTypes:
    out: <i class="conum" data-value="1"></i><b>(1)</b>
      default: text-plain <i class="conum" data-value="2"></i><b>(2)</b>
      types: <i class="conum" data-value="3"></i><b>(3)</b>
        text-plain:
          description: Output type as plain text.
          mediaType: text/plain
        application-cloud-events:
          description: CloudEvents specific representation of the Kamelet output.
          mediaType: application/cloudevents+json
          schema: <i class="conum" data-value="4"></i><b>(4)</b>
            # ...
          dependencies: <i class="conum" data-value="5"></i><b>(5)</b>
            - "camel:cloudevents"

  template:
    from:
      uri: ...
      steps:
        - to: "kamelet:sink"</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Declared output data types of this Kamelet source</td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>The output data type used by default</td> </tr> <tr> <td><i class="conum" data-value="3"></i><b>3</b></td> <td>List of supported output types</td> </tr> <tr> <td><i class="conum" data-value="4"></i><b>4</b></td> <td>Optional Json schema describing the <code>application/cloudevents+json</code> data type</td> </tr> <tr> <td><i class="conum" data-value="5"></i><b>5</b></td> <td>Optional list of additional dependencies that are required by the data type.</td> </tr> </table></div> </div> <div class="paragraph"> <p>This way users may choose the best Kamelet data type for a specific use case when referencing Kamelets in a binding.</p> </div> </div> <div class="sect2"> <h3 id="_error_handling"><a class="anchor" href="#_error_handling"></a>Error Handling</h3> <div class="paragraph"> <p>You can configure an error handler in order to specify what to do when some event ends up with failure. See <a href="kameletbindings-error-handler.html" class="xref page">Pipes Error Handler User Guide</a> for more detail.</p> </div> </div> <div class="sect2"> <h3 id="_trait_via_annotations"><a class="anchor" href="#_trait_via_annotations"></a>Trait via annotations</h3> <div class="paragraph"> <p>You can easily tune your <code>Pipe</code> with <a href="../traits/traits.html" class="xref page">traits</a> configuration adding <code>.metadata.annotations</code>. Let&#8217;s have a look at the following example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: camel.apache.org/v1
kind: Pipe
metadata:
  name: timer-2-log-annotation
  annotations: <i class="conum" data-value="1"></i><b>(1)</b>
    trait.camel.apache.org/logging.level: DEBUG
    trait.camel.apache.org/logging.color: "false"
spec:
  source:
    uri: timer:foo
  sink:
    uri: log:bar</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Include <code>.metadata.annotations</code> to specify the list of traits we want to configure</td> </tr> </table></div> </div> <div class="paragraph"> <p>In this example, we&#8217;ve set the <code>logging</code> trait to specify certain configuration we want to apply. You can do the same with all the traits available, just by setting <code>trait.camel.apache.org/trait-name.trait-property</code> with the expected value.</p> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> if you need to specify an array of values, the syntax will be <code>trait.camel.apache.org/trait.conf: "[\"opt1\", \"opt2\", &#8230;&#8203;]"</code> </td> </tr> </table></div> </div> </div> </div> </div> <div class="sect1"> <h2 id="kamelets-troubleshooting"><a class="anchor" href="#kamelets-troubleshooting"></a>Troubleshooting</h2> <div class="sectionbody"> <div class="paragraph"> <p>A <code>Kamelet</code> is translated into a <code>Route</code> used from the <code>ntegration</code>. In order to troubleshoot any possible issue, you can have a look at the dedicated <a href="../troubleshooting/debugging.html#debugging-kamelets" class="xref page">troubleshoot section</a>.</p> </div> </div> </div> <div class="sect1"> <h2 id="kamelets-specification"><a class="anchor" href="#kamelets-specification"></a>Kamelet Specification</h2> <div class="sectionbody"> <div class="paragraph"> <p>We&#8217;re now going to describe the various parts of the Kamelet in more details.</p> </div> <div class="sect2"> <h3 id="kamelets-specification-metadata"><a class="anchor" href="#kamelets-specification-metadata"></a>Metadata</h3> <div class="paragraph"> <p>The metadata section contains important information related to the Kamelet as Kubernetes resource.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <caption class="title">Table 1. Metadata Fields</caption> <colgroup> <col> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">name</th> <th class="tableblock halign-left valign-top">Description</th> <th class="tableblock halign-left valign-top">Type</th> <th class="tableblock halign-left valign-top">Example</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">ID of the Kamelet, used to refer to the Kamelet in external routes</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">E.g. <code>telegram-text-source</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>namespace</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The Kubernetes namespace where the resource is installed</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td> <td class="tableblock halign-left valign-top"></td> </tr> </tbody> </table></div> <div class="paragraph"> <p>The following annotations and labels are also defined on the resource:</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <caption class="title">Table 2. Annotations</caption> <colgroup> <col> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">name</th> <th class="tableblock halign-left valign-top">Description</th> <th class="tableblock halign-left valign-top">Type</th> <th class="tableblock halign-left valign-top">Example</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>camel.apache.org/kamelet.icon</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">An optional icon for the Kamelet in URI data format</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">E.g. <code>data:image/svg+xml;base64,PD94bW&#8230;&#8203;</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>trait.camel.apache.org/trait-name.trait-property</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">An optional configuration setting for a trait</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">E.g. <code>trait.camel.apache.org/logging.level: DEBUG</code></p></td> </tr> </tbody> </table></div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <caption class="title">Table 3. Labels</caption> <colgroup> <col> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">name</th> <th class="tableblock halign-left valign-top">Description</th> <th class="tableblock halign-left valign-top">Type</th> <th class="tableblock halign-left valign-top">Example</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock">label: <code>camel.apache.org/kamelet.type</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Indicates if the Kamelet can be used as source, action or sink.</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">enum: <code>source</code>, <code>action</code>, <code>sink</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">E.g. <code>source</code></p></td> </tr> </tbody> </table></div> </div> <div class="sect2"> <h3 id="kamelets-specification-definition"><a class="anchor" href="#kamelets-specification-definition"></a>Definition</h3> <div class="paragraph"> <p>The definition part of a Kamelet contains a valid JSON-schema document describing general information about the Kamelet and all defined parameters.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <caption class="title">Table 4. Definition Fields</caption> <colgroup> <col> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">name</th> <th class="tableblock halign-left valign-top">Description</th> <th class="tableblock halign-left valign-top">Type</th> <th class="tableblock halign-left valign-top">Example</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>title</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the Kamelet</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">E.g. <code>Telegram Text Source</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A markdown description of the Kamelet</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">E.g. <code>Receive all text messages that people send to your telegram bot&#8230;&#8203;</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>required</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">List of required parameters (complies with JSON-schema spec)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">array: <code>string</code></p></td> <td class="tableblock halign-left valign-top"></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>properties</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Map of properties that can be configured on the Kamelet</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">map: <code>string</code> &#8594; <code>schema</code></p></td> <td class="tableblock halign-left valign-top"></td> </tr> </tbody> </table></div> <div class="paragraph"> <p>Each property defined in the Kamelet has its own schema (normally a flat schema, containing only 1 level of properties). The following table lists some common fields allowed for each property.</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <caption class="title">Table 5. Definition Parameters</caption> <colgroup> <col> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">name</th> <th class="tableblock halign-left valign-top">Description</th> <th class="tableblock halign-left valign-top">Type</th> <th class="tableblock halign-left valign-top">Example</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>title</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the property</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">E.g. <code>Token</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Simple text description of the property</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">E.g. <code>The token to access your bot on Telegram</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">JSON-schema type of the property</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">E.g. <code>string</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>x-descriptors</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Specific aids for the visual tools</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">array: <code>string</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">E.g. <code>- urn:alm:descriptor:com.tectonic.ui:password</code> displays the property as a password field in a tectonic-type form</p></td> </tr> </tbody> </table></div> </div> <div class="sect2"> <h3 id="_data_shapes"><a class="anchor" href="#_data_shapes"></a>Data shapes</h3> <div class="paragraph"> <p>Kamelets are designed to be plugged as sources or sinks in more general routes, so they can accept data as input and/or produce their own data. To help visual tools and applications to understand how to interact with the Kamelet, the specification of a Kamelet includes also information about type of data that it manages.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml"># ...
spec:
  # ...
  dataTypes:
    out: <i class="conum" data-value="1"></i><b>(1)</b>
      default: json
      types:
        json: <i class="conum" data-value="2"></i><b>(2)</b>
          mediaType: application/json
          schema: <i class="conum" data-value="3"></i><b>(3)</b>
            properties:
              # ...</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Defines the type of the <code>output</code></td> </tr> <tr> <td><i class="conum" data-value="2"></i><b>2</b></td> <td>Name of the data type</td> </tr> <tr> <td><i class="conum" data-value="3"></i><b>3</b></td> <td>Optional JSON-schema definition of the output</td> </tr> </table></div> </div> <div class="paragraph"> <p>Data shape can be indicated for the following channels:</p> </div> <div class="ulist"> <ul> <li> <p><code>in</code>: the input of the Kamelet, in case the Kamelet is of type <code>sink</code></p> </li> <li> <p><code>out</code>: the output of the Kamelet, for both <code>source</code> and <code>sink</code> Kamelets</p> </li> <li> <p><code>error</code>: an optional error data shape, for both <code>source</code> and <code>sink</code> Kamelets</p> </li> </ul> </div> <div class="paragraph"> <p>Data shapes contain the following information:</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <caption class="title">Table 6. Data Shape Options</caption> <colgroup> <col> <col> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">name</th> <th class="tableblock halign-left valign-top">Description</th> <th class="tableblock halign-left valign-top">Type</th> <th class="tableblock halign-left valign-top">Example</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>scheme</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">A specific component scheme that is used to identify the data shape</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">E.g. <code>aws2-s3</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>format</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The data shape name used to identify and reference the data type in a Pipe when choosing from multiple data type options.</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">E.g. <code>json</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>mediaType</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">The media type of the data</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">E.g. <code>application/json</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>headers</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Optional map of message headers that get set with the data shape where the map keys represent the header name and the value defines the header type information.</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>map</code></p></td> <td class="tableblock halign-left valign-top"></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>dependencies</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Optional list of additional dependencies that are required for this data type (e.g. Json marshal/unmarshal libraries)</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>list</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">E.g. <code>mvn:org.jackson:jackson-databind</code></p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>schema</code></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">An optional JSON-schema definition for the data</p></td> <td class="tableblock halign-left valign-top"><p class="tableblock"><code>object</code></p></td> <td class="tableblock halign-left valign-top"></td> </tr> </tbody> </table></div> </div> <div class="sect2"> <h3 id="_flow"><a class="anchor" href="#_flow"></a>Flow</h3> <div class="paragraph"> <p>Each Kamelet contains a YAML-based Camel DSL that provides the actual implementation of the connector.</p> </div> <div class="paragraph"> <p>For example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">spec:
  # ...
  template:
    from:
      uri: telegram:bots
      parameters:
        authorizationToken: "#property:botToken"
      steps:
        - convert-body-to:
            type: "java.lang.String"
            type-class: "java.lang.String"
            charset: "UTF8"
        - filter:
            simple: "${body} != null"
        - log: "${body}"
        - to: "kamelet:sink"</code></pre> </div> </div> <div class="paragraph"> <p>Source and sink flows will connect to the outside route via the <code>kamelet:source</code> or <code>kamelet:sink</code> special endpoints: - A source Kamelet must contain a call <strong>to</strong> <code>kamelet:sink</code> - A sink Kamelet must start <strong>from</strong> <code>kamelet:source</code></p> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> The <code>kamelet:source</code> and <code>kamelet:sink</code> endpoints are special endpoints that are only available in Kamelet route templates and will be replaced with actual references at runtime. </td> </tr> </table></div> </div> <div class="paragraph"> <p>Kamelets contain a <strong>single route template</strong> written in YAML DSL, as in the previous example.</p> </div> <div class="paragraph"> <p>Kamelets, however, can also contain additional sources in the <code>spec</code> &#8594; <code>sources</code> field. Those sources can be of any kind (not necessarily route templates) and will be added once to all the integrations where the Kamelet is used. They main role is to do advanced configuration of the integration context where the Kamelet is used, such as registering beans in the registry or adding customizers.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="kamelet-keda-user"><a class="anchor" href="#kamelet-keda-user"></a>KEDA enabled Kamelets</h2> <div class="sectionbody"> <div class="paragraph"> <p>Some Kamelets are enhanced with KEDA metadata to allow users to automatically configure autoscalers on them. Kamelets with KEDA features can be distinguished by the presence of the annotation <code>camel.apache.org/keda.type</code>, which is set to the name of a specific KEDA autoscaler.</p> </div> <div class="paragraph"> <p>A KEDA enabled Kamelet can be used in the same way as any other Kamelet, in a binding or in an integration. KEDA autoscalers are not enabled by default: they need to be manually enabled by the user via the <code>keda</code> trait.</p> </div> <div class="paragraph"> <p>In a Pipe, the KEDA trait can be enabled using annotations:</p> </div> <div class="listingblock"> <div class="title">my-keda-binding.yaml</div> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: camel.apache.org/v1
kind: Pipe
metadata:
  name: my-keda-binding
  annotations:
    trait.camel.apache.org/keda.enabled: "true"
spec:
  source:
  # ...
  sink:
  # ...</code></pre> </div> </div> <div class="paragraph"> <p>In an integration, it can be enabled using <code>kamel run</code> args, for example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kamel run my-keda-integration.yaml -t keda.enabled=true</code></pre> </div> </div> <div class="admonitionblock note"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> Make sure that the <code>my-keda-integration</code> uses at least one KEDA enabled Kamelet, otherwise enabling KEDA (without other options) will have no effect. </td> </tr> </table></div> </div> <div class="paragraph"> <p>For information on how to create KEDA enabled Kamelets, see the <a href="kamelets-dev.html#kamelet-keda-dev" class="xref page">KEDA section in the development guide</a>.</p> </div> </div> </div> </article> <aside class="toc sidebar" aria-label="Table of contents" data-title="Contents" data-levels="2"> <div class="toc-menu"></div> </aside> </div> </main> </div> <div class="footer-tools"> <a href="#top" title="Reach the top of the page">Back to top</a> </div> <footer> <div class="footer"> <figure class="logo"> <img src="../../../_/img/logo-d-a567cee6fa.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <input id="footer-toggle-overview" type="checkbox" title="Show/Hide Overview section"> <dl> <dt><label for="footer-toggle-overview">Overview</label><label for="footer-toggle-overview">&#65291;</label></dt> <dd><a href="../../../blog/">Blog</a></dd> <dd><a href="../../../docs/">Documentation</a></dd> <dd><a href="../../../community/support/">Community</a></dd> <dd><a href="../../../download/">Download</a></dd> </dl> <input id="footer-toggle-documentation" type="checkbox" title="Show/Hide Documentation section"> <dl> <dt><label for="footer-toggle-documentation">Documentation</label><label for="footer-toggle-documentation">&#65291;</label></dt> <dd><a href="../../../manual/">User Manual</a></dd> <dd><a href="../../../components/next/index.html">Components</a></dd> <dd><a href="../../../camel-k/next/">Camel-K</a></dd> <dd><a href="../../../camel-kafka-connector/next/">Camel Kafka Connector</a></dd> <dd><a href="../../../camel-quarkus/next/">Camel Quarkus</a></dd> <dd><a href="../../../camel-spring-boot/next/">Camel Spring Boot</a></dd> <dd><a href="../../../camel-karaf/3.22.x/">Camel Karaf</a></dd> <dd><a href="../../../manual/faq/index.html">FAQ</a></dd> </dl> <input id="footer-toggle-community" type="checkbox" title="Show/Hide Community section"> <dl> <dt><label for="footer-toggle-community">Community</label><label for="footer-toggle-community">&#65291;</label></dt> <dd><a href="../../../community/support/">Support</a></dd> <dd><a href="../../../community/contributing/">Contributing</a></dd> <dd><a href="../../../community/mailing-list/">Mailing Lists</a></dd> <dd><a href="../../../community/user-stories/">User stories</a></dd> <dd><a href="../../../community/articles/">Articles</a></dd> <dd><a href="../../../community/books/">Books</a></dd> <dd><a href="../../../community/team/">Team</a></dd> </dl> <input id="footer-toggle-about" type="checkbox" title="Show/Hide Acknowledgements section"> <dl> <dt><label for="footer-toggle-about">About</label><label for="footer-toggle-about">&#65291;</label></dt> <dd><a href="../../../acknowledgments/">Acknowledgments</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p class="remark"> &copy; 2004-2024 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> <div class="resources"> <div class="context"> <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a> </div> <div class="context"> <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/policies/conduct">Code of Conduct</a> </div> <div class="context"> <a href="../../../sitemap/">Sitemap</a> </div> </div> <div class="footer-icons"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon" focusable="false"><use xlink:href="../../../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg class="brand-icon" focusable="false"><use xlink:href="../../../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon" focusable="false"><use xlink:href="../../../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg class="brand-icon" focusable="false"><use xlink:href="../../../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> </div> </footer> <script src="../../../_/js/vendor/algoliasearch-bad45193e2.js"></script> <script src="../../../_/js/site-c215fb6972.js"></script> <script async src="../../../_/js/vendor/highlight-621a10fe1b.js"></script> <script async src="../../../_/js/vendor/svg4everybody-a0c573f2b9.js"></script> <script async src="../../../_/js/vendor/tabs-5aea11bcf5.js" data-sync-storage-key="preferred-tab"></script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Organization", "name": "Apache Camel", "url": "https://camel.apache.org", "sameAs": [ "https://twitter.com/ApacheCamel" ], "logo": "../../../_/img/logo-d-a567cee6fa.svg", "description": "Apache Camel  is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL." } </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "BreadcrumbList", "itemListElement": [{ "@type": "ListItem", "position": 1, "name": "Apache Camel", "item": "https://camel.apache.org/" }, { "@type": "ListItem", "position": 2, "name": "Camel K", "item": "https://camel.apache.org/camel-k/2.4.x/index.html" }, { "@type": "ListItem", "position": 3, "name": "2.4.x", "item": "https://camel.apache.org/camel-k/2.4.x/index.html" }, { "@type": "ListItem", "position": 4, "name": "Kamelets", "item": "https://camel.apache.org/camel-k/2.4.x/kamelets/kamelets.html" }, { "@type": "ListItem", "position": 5, "name": "User Guide", "item": "https://camel.apache.org/camel-k/2.4.x/kamelets/kamelets-user.html" }] } </script> </body> </html> 