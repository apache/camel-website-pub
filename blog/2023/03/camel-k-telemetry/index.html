<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../../../favicon-128.png" sizes="128x128"> <meta name="application-name" content="Apache Camel"> <meta property="og:title" content="Camel K Observability: Distributed Tracing"> <meta property="og:site_name" content="Apache Camel"> <meta property="og:url" content="https://camel.apache.org/blog/2023/03/camel-k-telemetry/"> <meta name="og:description" content="Camel K: how to configure Distributed Tracing for an Integration"> <meta property="og:type" content="website"> <meta property="og:image" content="https://camel.apache.org/blog/2023/03/camel-k-telemetry/featured.png"> <link rel="manifest" href="../../../../site.webmanifest"> <title>Camel K Observability: Distributed Tracing - Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/blog/2023/03/camel-k-telemetry/"> <link rel="stylesheet" href="../../../../_/css/site-b287b96c63.css"> </head> <body class="article"> <header class="header" aria-label="Header"> <nav class="navbar" aria-label="Main menu"> <div class="navbar-brand"> <a class="nav-logo" href="../../../../" title="Apache Camel"></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../blog/"> <img alt="Blog" src="../../../../_/img/blog-4c7fa4cb60.svg"> Blog </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../docs/"> <img alt="Documentation" src="../../../../_/img/documentation-abb1b7f8b1.svg"> Documentation </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../community/"> <img alt="Community" src="../../../../_/img/community-2ec8a3dc8b.svg"> Community </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../download/"> <img alt="Download" src="../../../../_/img/download-63cdd75074.svg"> Download </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../security/"> <img alt="Security" src="../../../../_/img/security-06abe157b3.svg"> Security </a> </div> </div> <div class="navbar-fill"></div> <div class="break-row"></div> <div class="navbar-search results-hidden"> <input id="search" class="search" placeholder="Search" autocomplete="off"> <img src="/_/img/cancel-1ed239489b.svg" alt="Clear" id="search-cancel"> <div id="search_results"></div> </div> <div class="navbar-tools"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button" aria-label="Menu"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <a id="top"></a> <div class="body"> <main role="main blog"> <article class="blog doc"> <header aria-labelledby="title"> <a class="category" href="../../../../categories/Camel-K/">CAMEL K</a><a class="category" href="../../../../categories/Features/">FEATURES</a><a class="category" href="../../../../categories/Devops/">DEVOPS</a> <h1 id="title">Camel K Observability: Distributed Tracing</h1> </header> <div class="post"> <aside aria-label="Post details"> <div class="summary">Camel K: how to configure Distributed Tracing for an Integration</div> Posted on <time itemprop="published" datetime="2023-03-09" title="Thursday, March 9, 2023">March 9, 2023</time>, by <figure> <img src="https://avatars.githubusercontent.com/u/6067789?v=4" alt="Gaëlle Fournier"> <figcaption rel="author">Gaëlle Fournier</figcaption> </figure> <h4>Share this blog</h4> <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fcamel.apache.org%2fblog%2f2023%2f03%2fcamel-k-telemetry%2f" target="_blank" rel="noopener" aria-label="Share on Facebook"> <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg> </div> </div> </a> <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=Camel%20K%20Observability%3a%20Distributed%20Tracing&url=https%3a%2f%2fcamel.apache.org%2fblog%2f2023%2f03%2fcamel-k-telemetry%2f&hashtags=ApacheCamel" target="_blank" rel="noopener" aria-label="Share on Twitter"> <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg> </div> </div> </a> <a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fcamel.apache.org%2fblog%2f2023%2f03%2fcamel-k-telemetry%2f&title=Camel%20K%20Observability%3a%20Distributed%20Tracing&summary=Camel%20K%3a%20how%20to%20configure%20Distributed%20Tracing%20for%20an%20Integration&source=https%3A%2F%2Fcamel.apache.org" target="_blank" rel="noopener" aria-label="Share on LinkedIn" title="Share on LinkedIn"> <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg> </div> </div> </a> <p> <a class="arrow prev" href="../../../../blog/2023/02/camel-k-release-1-12/" title="Previous post: Camel K 1.12 release">&#10094;</a> <a class="arrow next" href="../../../../blog/2023/03/RELEASE-4.0.0-M2/" title="Next post: RELEASE 4.0.0-M2">&#10095;</a> </p> </aside> <div class="post-content"> <img class="featured" alt="Blog post featured image" src="../../../../blog/2023/03/camel-k-telemetry/featured_hu97bbeb5929c5d2874ae394e2c9ab26e4_191399_800x0_resize_q95_gaussian_3.png" width="800" height="269"> <p>Tracing is an important approach for controlling and monitoring the experience of users, it allows us to gather more information about an integration&rsquo;s performance.</p> <p>Camel K has been providing support for distributed tracing using OpenTracing since long time. At the beginning of 2022, the <a href="https://www.cncf.io" rel="noopener nofollow noreferrer">CNCF</a> announced that they were <a href="https://www.cncf.io/blog/2022/01/31/cncf-archives-the-opentracing-project/" rel="noopener nofollow noreferrer">archiving the OpenTracing project</a> in favor of the <a href="https://opentelemetry.io/" rel="noopener nofollow noreferrer">OpenTelemetry project</a>. OpenTelemetry is the latest solution created by merging OpenTracing and OpenCensus. As a result, we decided in Camel K 1.12 to introduce the <a href="../../../../camel-k/next/traits/telemetry.html"><code>telemetry</code> trait</a> based on OpenTelemetry. At the same time we decided to deprecate the <code>tracing</code> trait based on OpenTracing.</p> <p>I&rsquo;ll walk you through the configurations needed to support Distributed tracing for your Camel integrations in this blog post.</p> <h2 id="distributed-tracing-tools">Distributed Tracing tools</h2> <p>OpenTelemetry defines the <a href="https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/protocol/otlp.md" rel="noopener nofollow noreferrer">OpenTelemetry Protocol (OTLP)</a> that allows any Distributed Tracing tool that provides an OTLP compatible collector API to be used. While OpenTelemetry is still CNCF incubating project, it has become an industry-standard and is now natively supported by many Distributed Tracings tools.</p> <p>The <code>telemetry</code> trait has been tested on Jaeger (v1.35+), OpenTelemetry Collector and Grafana Tempo at the time of writing this blog post.</p> <p>We will be using Jaeger for this blog post manipulations.</p> <h2 id="camel-k">Camel K</h2> <p>The <code>telemetry</code> trait is available starting from Camel K version 1.12, so you should first check your kamel client version</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ kamel version
</span></span><span class="line"><span class="cl">Camel K Client 1.12.0
</span></span></code></pre></div><p>To install the Camel K operator just execute</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ kamel install
</span></span></code></pre></div><p>Check if the Camel K operator is available</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ kubectl get pods -l <span class="nv">name</span><span class="o">=</span>camel-k-operator
</span></span><span class="line"><span class="cl">NAME                                READY   STATUS    RESTARTS   AGE
</span></span><span class="line"><span class="cl">camel-k-operator-5b897ddcdd-4qwqb   1/1     Running   <span class="m">0</span>          50s
</span></span></code></pre></div><p>For more information see the <a href="../../../../camel-k/next/installation/installation.html">documentation</a></p> <h2 id="install-jaeger">Install Jaeger</h2> <p>For this installation, you should first ensure that ingress is available on your kubernetes. If you are working on minikube <code>minikube addons enable ingress</code> should be enough.</p> <p>If Jaeger is not already available on your kubernetes instance, an easy way to install it on a kubernetes is to install the Jaeger operator (see <a href="https://www.jaegertracing.io/docs%29" rel="noopener nofollow noreferrer">https://www.jaegertracing.io/docs)</a>.</p> <p>In short, to install the Jaeger operator you should:</p> <ul> <li>Install cert-manager if it is not installed as it is required</li> </ul> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"> <span class="c1"># The cert manager is a prerequisite to the Jaeger operator (see https://cert-manager.io/docs/installation/)</span>
</span></span><span class="line"><span class="cl">$ kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.10.1/cert-manager.yaml
</span></span></code></pre></div><p>Wait 1 or 2 minutes, we want to ensure the cert-manager has had enough time to be fully deployed</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"> <span class="c1"># see https://www.jaegertracing.io/docs/1.42/operator/#installing-the-operator-on-kubernetes</span>
</span></span><span class="line"><span class="cl">$ kubectl create namespace observability
</span></span><span class="line"><span class="cl">$ kubectl create -f https://github.com/jaegertracing/jaeger-operator/releases/download/v1.42.0/jaeger-operator.yaml -n observability
</span></span></code></pre></div><p>Check if Jaeger-operator is available:</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ kubectl get deployment jaeger-operator -n observability
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">NAME              DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
</span></span><span class="line"><span class="cl">jaeger-operator   <span class="m">1</span>         <span class="m">1</span>         <span class="m">1</span>            <span class="m">1</span>           48s
</span></span></code></pre></div><p>To use Jaeger, you can install the AllInOne image:</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ kubectl apply -f - <span class="s">&lt;&lt; EOF
</span></span></span><span class="line"><span class="cl"><span class="s">apiVersion: jaegertracing.io/v1
</span></span></span><span class="line"><span class="cl"><span class="s">kind: Jaeger
</span></span></span><span class="line"><span class="cl"><span class="s">metadata:
</span></span></span><span class="line"><span class="cl"><span class="s">  name: instance
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span></code></pre></div><p>Check the presence of the Jaeger instance:</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ kubectl get jaeger
</span></span><span class="line"><span class="cl">NAME       STATUS    VERSION   STRATEGY   STORAGE   AGE
</span></span><span class="line"><span class="cl">instance   Running   1.42.0    allinone   memory    8s
</span></span></code></pre></div><h2 id="run-some-camel-k-integrations-with-telemetry-trait">Run some Camel K Integrations with Telemetry trait</h2> <p>Now that we have Jaeger available on the Kubernetes cluster, the next step is to run some integrations in a Kubernetes cluster where Camel K is installed. You can find the source code in the <a href="https://github.com/apache/camel-k-examples/tree/main/generic-examples/traits/telemetry" rel="noopener nofollow noreferrer">Camel K example GitHub repository</a>.</p> <p>We will be creating two integration routes as the distributed services:</p> <ul> <li><em>Inventory</em> which is also a rest service in charge of product&rsquo;s inventory management</li> </ul> <p><strong><code>InventoryService.java</code></strong></p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.camel.builder.RouteBuilder</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.camel.model.rest.RestBindingMode</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.camel.component.jackson.JacksonDataFormat</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.text.SimpleDateFormat</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.camel.Exchange</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Date</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">InventoryService</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">RouteBuilder</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">restConfiguration</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">enableCORS</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">bindingMode</span><span class="p">(</span><span class="n">RestBindingMode</span><span class="p">.</span><span class="na">json</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">rest</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">post</span><span class="p">(</span><span class="s">&#34;/notify/order/place&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="p">.</span><span class="na">to</span><span class="p">(</span><span class="s">&#34;direct:notify&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">JacksonDataFormat</span><span class="w"> </span><span class="n">invDataFormat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JacksonDataFormat</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">invDataFormat</span><span class="p">.</span><span class="na">setUnmarshalType</span><span class="p">(</span><span class="n">InventoryNotification</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">from</span><span class="p">(</span><span class="s">&#34;direct:notify&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">&#34;notifyorder--&gt; ${body}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">setHeader</span><span class="p">(</span><span class="n">Exchange</span><span class="p">.</span><span class="na">CONTENT_TYPE</span><span class="p">,</span><span class="w"> </span><span class="n">constant</span><span class="p">(</span><span class="s">&#34;application/json&#34;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">bean</span><span class="p">(</span><span class="n">InventoryNotification</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;getInventoryNotification(${body[&#39;orderId&#39;]},${body[&#39;itemId&#39;]},${body[&#39;quantity&#39;]} )&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">marshal</span><span class="p">(</span><span class="n">invDataFormat</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">&#34;Inventory Notified ${body}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">convertBodyTo</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">InventoryNotification</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">orderId</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">itemId</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">quantity</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">department</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">Date</span><span class="w"> </span><span class="n">datetime</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">InventoryNotification</span><span class="w"> </span><span class="nf">getInventoryNotification</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">orderId</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">itemId</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">quantity</span><span class="w"> </span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">InventoryNotification</span><span class="w"> </span><span class="n">invenNotification</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InventoryNotification</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">invenNotification</span><span class="p">.</span><span class="na">setOrderId</span><span class="p">(</span><span class="n">orderId</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">invenNotification</span><span class="p">.</span><span class="na">setItemId</span><span class="p">(</span><span class="n">itemId</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">invenNotification</span><span class="p">.</span><span class="na">setQuantity</span><span class="p">(</span><span class="n">quantity</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">invenNotification</span><span class="p">.</span><span class="na">setDepartment</span><span class="p">(</span><span class="s">&#34;inventory&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">SimpleDateFormat</span><span class="w"> </span><span class="n">formatter</span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SimpleDateFormat</span><span class="p">(</span><span class="s">&#34;yyyy-MM-dd &#39;at&#39; HH:mm:ss z&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">invenNotification</span><span class="p">.</span><span class="na">setDatetime</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Date</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">()));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">invenNotification</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setOrderId</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">orderId</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">orderId</span><span class="o">=</span><span class="n">orderId</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setItemId</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">itemId</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">itemId</span><span class="o">=</span><span class="n">itemId</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setQuantity</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">quantity</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">quantity</span><span class="o">=</span><span class="n">quantity</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="nf">getOrderId</span><span class="p">(){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">orderId</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="nf">getItemId</span><span class="p">(){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">itemId</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="nf">getQuantity</span><span class="p">(){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">quantity</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getDepartment</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">department</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setDepartment</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">department</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">department</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">department</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">Date</span><span class="w"> </span><span class="nf">getDatetime</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">datetime</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setDatetime</span><span class="p">(</span><span class="n">Date</span><span class="w"> </span><span class="n">datetime</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">datetime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">datetime</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><ul> <li><em>Order</em> which is a rest service called by a user to place an order for a product, that will then notify the <em>Inventory</em> service</li> </ul> <p><strong><code>OrderService.java</code></strong></p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.camel.Processor</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.camel.builder.RouteBuilder</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.camel.model.rest.RestBindingMode</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.camel.Exchange</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.camel.component.jackson.JacksonDataFormat</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.camel.processor.aggregate.GroupedBodyAggregationStrategy</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">OrderService</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">RouteBuilder</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">restConfiguration</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">enableCORS</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">bindingMode</span><span class="p">(</span><span class="n">RestBindingMode</span><span class="p">.</span><span class="na">json</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">rest</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">post</span><span class="p">(</span><span class="s">&#34;/place&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="p">.</span><span class="na">to</span><span class="p">(</span><span class="s">&#34;direct:placeorder&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">JacksonDataFormat</span><span class="w"> </span><span class="n">jacksonDataFormat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JacksonDataFormat</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">jacksonDataFormat</span><span class="p">.</span><span class="na">setUnmarshalType</span><span class="p">(</span><span class="n">Order</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">from</span><span class="p">(</span><span class="s">&#34;direct:placeorder&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">&#34;-----IN ${headers}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">marshal</span><span class="p">(</span><span class="n">jacksonDataFormat</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">&#34;inputBody --&gt; ${body}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">to</span><span class="p">(</span><span class="s">&#34;http://inventory/notify/order?bridgeEndpoint=true&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">removeHeaders</span><span class="p">(</span><span class="s">&#34;*&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">&#34;responseBody from inventory --&gt; ${body}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">setHeader</span><span class="p">(</span><span class="n">Exchange</span><span class="p">.</span><span class="na">CONTENT_TYPE</span><span class="p">,</span><span class="w"> </span><span class="n">constant</span><span class="p">(</span><span class="s">&#34;application/json&#34;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">setBody</span><span class="p">(</span><span class="n">simple</span><span class="p">(</span><span class="s">&#34;{\&#34;inventory\&#34;:${body}}&#34;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">unmarshal</span><span class="p">().</span><span class="na">json</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Order</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">Serializable</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">serialVersionUID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">1L</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">orderId</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">itemId</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">quantity</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">orderItemName</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">price</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setOrderId</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">orderId</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">orderId</span><span class="o">=</span><span class="n">orderId</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setItemId</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">itemId</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">itemId</span><span class="o">=</span><span class="n">itemId</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setQuantity</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">quantity</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">quantity</span><span class="o">=</span><span class="n">quantity</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setOrderItemName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">orderItemName</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">orderItemName</span><span class="o">=</span><span class="n">orderItemName</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setPrice</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">price</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">price</span><span class="o">=</span><span class="n">price</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="nf">getOrderId</span><span class="p">(){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">orderId</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="nf">getItemId</span><span class="p">(){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">itemId</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="nf">getQuantity</span><span class="p">(){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">quantity</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getOrderItemName</span><span class="p">(){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">orderItemName</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="nf">getPrice</span><span class="p">(){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">price</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>Let&rsquo;s run our camel integrations:</p> <ul> <li>the <em>Inventory</em> integration</li> </ul> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ kamel run InventoryService.java --name inventory <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -d camel-jackson <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t telemetry.enabled<span class="o">=</span><span class="nb">true</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t telemetry.sampler<span class="o">=</span>on <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t ingress.enabled<span class="o">=</span><span class="nb">true</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t ingress.host<span class="o">=</span>inventory.local
</span></span><span class="line"><span class="cl">Integration <span class="s2">&#34;inventory&#34;</span> created
</span></span></code></pre></div><ul> <li>the <em>Order</em> integration</li> </ul> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ kamel run OrderService.java --name order <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -d camel-jackson <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t telemetry.enabled<span class="o">=</span><span class="nb">true</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t telemetry.sampler<span class="o">=</span>on <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t telemetry.service-name<span class="o">=</span>external-order <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t ingress.enabled<span class="o">=</span><span class="nb">true</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t ingress.host<span class="o">=</span>order.local
</span></span><span class="line"><span class="cl">Integration <span class="s2">&#34;order&#34;</span> created
</span></span></code></pre></div><p>This configuration will:</p> <ul> <li>enable tracing for our integrations</li> <li>sample all traces</li> <li>send traces to OTLP API endpoint</li> </ul> <p>We are also using inventory.local and order.local host in ingress for the rest services so make sure that your DNS pointing to your cluster for both hostnames. You can execute <code>echo &quot;$(minikube ip) order.local inventory.local&quot; | sudo tee -a /etc/hosts</code> if you are working on minikube.</p> <p>As you can see we did not provide the OTLP API endpoint as Camel K automatically discovered the <strong>Jaeger</strong> OTLP API endpoint available in the namespace. For any other Distributed Tracing tool you will have to declare it through <code>-t telemetry.endpoint=xxxx</code>. The <code>telemetry</code> trait is expecting an <a href="https://opentelemetry.io/docs/concepts/sdk-configuration/otlp-exporter-configuration/#otel_exporter_otlp_traces_endpoint" rel="noopener nofollow noreferrer">OTLP trace endpoint</a>.</p> <p>Now that everything is up let&rsquo;s make some traces!</p> <h2 id="generate-some-integration-traces">Generate some integration traces</h2> <ol> <li>Let&rsquo;s place some order:</li> </ol> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ curl  http://order.local/place -d <span class="s1">&#39;{&#34;orderId&#34;:1, &#34;itemId&#34;:5, &#34;quantity&#34;:1, &#34;orderItemName&#34;:&#34;best product&#34;, &#34;price&#34;:99}&#39;</span> -H <span class="s2">&#34;Content-Type: application/json&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;inventory&#34;</span>:<span class="s2">&#34;{\&#34;orderId\&#34;:1,\&#34;itemId\&#34;:5,\&#34;quantity\&#34;:1,\&#34;department\&#34;:\&#34;inventory\&#34;,\&#34;datetime\&#34;:1678293274691}&#34;</span><span class="o">}</span>
</span></span></code></pre></div><p>If the call went well, you should have this response indicating that the inventory service has been called.</p> <p>In Jaeger&rsquo;s interface we should see the call with the spans referencing to the rest services and camel components.</p> <p><img src="full_trace.png" alt="Jaeger full trace"></p> <ol start="2"> <li>Now, we will stop collecting the traces for the <em>Order</em> integration:</li> </ol> <pre tabindex="0"><code>kamel run OrderService.java --name order \
   -d camel-jackson \
   -t ingress.enabled=true \
   -t ingress.host=order.local
Integration &#34;order&#34; updated
</code></pre><p>If we create another order:</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ curl  http://order.local/place -d <span class="s1">&#39;{&#34;orderId&#34;:2, &#34;itemId&#34;:18, &#34;quantity&#34;:1, &#34;orderItemName&#34;:&#34;another product&#34;, &#34;price&#34;:5}&#39;</span> -H <span class="s2">&#34;Content-Type: application/json&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;inventory&#34;</span>:<span class="s2">&#34;{\&#34;orderId\&#34;:2,\&#34;itemId\&#34;:18,\&#34;quantity\&#34;:1,\&#34;department\&#34;:\&#34;inventory\&#34;,\&#34;datetime\&#34;:1678293771675}&#34;</span><span class="o">}</span>
</span></span></code></pre></div><p>As we can see in Jaeger&rsquo;s interface looking for the inventory traces the call will only show the spans for inventory and no longer the order parent spans.</p> <p><img src="inventory_traces.png" alt="Jaeger inventory trace"></p> <p>As you can see, it is quite easy to improve the observability of your integrations using the new <code>telemetry</code> trait.</p> <h2 id="from-tracing-to-telemetry">From tracing to telemetry</h2> <p>We are encouraging migration from the <code>tracing</code> trait to the <code>telemetry</code> trait.</p> <p>To give you some inputs on your migration, I will show you how to collect and compare the traces using both traits.</p> <p>Let&rsquo;s deploy two different <em>Order</em> integrations to compare the traces generated :</p> <ul> <li>stop collecting the traces from <em>Inventory</em> integration</li> </ul> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">kamel run InventoryService.java --name inventory <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -d camel-jackson
</span></span><span class="line"><span class="cl">Integration <span class="s2">&#34;inventory&#34;</span> updated
</span></span></code></pre></div><ul> <li>update the <em>Order</em> integration using the <code>telemetry</code> trait</li> </ul> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ kamel run OrderService.java --name order <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -d camel-jackson <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t telemetry.enabled<span class="o">=</span><span class="nb">true</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t telemetry.sampler<span class="o">=</span>on <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t telemetry.service-name<span class="o">=</span>order-external-telemetry <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t ingress.enabled<span class="o">=</span><span class="nb">true</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t ingress.host<span class="o">=</span>order.local
</span></span><span class="line"><span class="cl">Integration <span class="s2">&#34;order&#34;</span> updated
</span></span></code></pre></div><ul> <li>the <em>Order</em> integration using the <code>tracing</code> trait</li> </ul> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ kamel run OrderService.java --name order-tracing <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -d camel-jackson <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t tracing.enabled<span class="o">=</span><span class="nb">true</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t tracing.sampler-type<span class="o">=</span>const <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t tracing.sampler-param<span class="o">=</span><span class="m">1</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t tracing.service-name<span class="o">=</span>order-external-tracing <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t ingress.enabled<span class="o">=</span><span class="nb">true</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>   -t ingress.host<span class="o">=</span>order-tracing.local
</span></span><span class="line"><span class="cl">Integration <span class="s2">&#34;order-tracing&#34;</span> created
</span></span></code></pre></div><p>Don&rsquo;t forget to ensure the new order-tracing.local hostname is configured for your kubernetes cluster!</p> <p>Let&rsquo;s create the same orders with the two order services:</p> <ul> <li>one with the order service using the new <code>telemetry</code> trait</li> </ul> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ curl  http://order.local/place -d <span class="s1">&#39;{&#34;orderId&#34;:20, &#34;itemId&#34;:5, &#34;quantity&#34;:1, &#34;orderItemName&#34;:&#34;strange product&#34;, &#34;price&#34;:10}&#39;</span> -H <span class="s2">&#34;Content-Type: application/json&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;inventory&#34;</span>:<span class="s2">&#34;{\&#34;orderId\&#34;:20,\&#34;itemId\&#34;:5,\&#34;quantity\&#34;:1,\&#34;department\&#34;:\&#34;inventory\&#34;,\&#34;datetime\&#34;:1678296117315}&#34;</span><span class="o">}</span>
</span></span></code></pre></div><ul> <li>another with the order services using the deprecated <code>tracing</code> trait</li> </ul> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ curl  http://order-tracing.local/place -d <span class="s1">&#39;{&#34;orderId&#34;:21, &#34;itemId&#34;:5, &#34;quantity&#34;:1, &#34;orderItemName&#34;:&#34;strange product&#34;, &#34;price&#34;:10}&#39;</span> -H <span class="s2">&#34;Content-Type: application/json&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span><span class="s2">&#34;inventory&#34;</span>:<span class="s2">&#34;{\&#34;orderId\&#34;:21,\&#34;itemId\&#34;:5,\&#34;quantity\&#34;:1,\&#34;department\&#34;:\&#34;inventory\&#34;,\&#34;datetime\&#34;:1678296184049}&#34;</span><span class="o">}</span>
</span></span></code></pre></div><p>As you can see, going from the <code>trancing</code> to the <code>telemetry</code> is quite effortless. On the trace side, from one protocol to another you should expect some differences in your tracing:</p> <p><img src="compare_tracing_telemetry.png" alt="Difference between OpenTracing and OpenTelemtry traces"></p> <h1 id="conclusion">Conclusion</h1> <p>This blog post showed how you can use the new <code>telemetry</code> trait and how to work with the Jaeger Distributed Tracing tool. We also took the time to see how you can migrate from the deprecated <code>tracing</code> trait to the <code>telemetry</code> trait.</p> <p>If you have any feedback, ideas or find a new issue, please <a href="https://github.com/apache/camel-k/issues" rel="noopener nofollow noreferrer">create a new issue report in GitHub</a>!</p> <div class="related"> <h3 id="related"><a class="anchor" href="#related"></a>Related posts</h3> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2022/10/camel-k-cicd/"><h1>Camel K CICD</h1></a> <time itemprop="published" datetime="2022-10-06" title="Thursday, October 6, 2022">October 6, 2022</time>, by <span rel="author">Pasquale Congiusti</span> </header> <p>In Camel K version 10, we&rsquo;ve released the CLI `promote feature that provides Camel K an opinionated way of promoting an Integration through the stages of software development. This feature unlock the possibility to combine Camel K with external tooling and let the user develop according to any automated release process. We always ear about CI/CD (Continuous Integration/Continuous Delivery and/or Deployment), and in this blog we&rsquo;re going to see how to make it for any Camel K integration.</p> <p><a class="continue" href="../../../../blog/2022/10/camel-k-cicd/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Howtos/">HOWTOS</a><a class="category" href="../../../../categories/Camel-K/">CAMEL K</a><a class="category" href="../../../../categories/Devops/">DEVOPS</a> </p> </article> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2022/07/camel-k-monitoring-ops/"><h1>Camel K Operations: monitoring</h1></a> <time itemprop="published" datetime="2022-07-05" title="Tuesday, July 5, 2022">July 5, 2022</time>, by <span rel="author">Pasquale Congiusti</span> </header> <p>Camel K offers a wide list of operations you can execute once your Integration has been deployed (likely in a production environment). When we talk about operations, the most typical question we got is &ldquo;How to monitor a Camel K Integration?&rdquo;. Fortunately, we have all the ingredients needed to let you manage this operation as smooth as possible. I&rsquo;ll walk you through the different tools and configuration needed in this blog post.</p> <p><a class="continue" href="../../../../blog/2022/07/camel-k-monitoring-ops/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Camel-K/">CAMEL K</a><a class="category" href="../../../../categories/Features/">FEATURES</a> </p> </article> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2021/07/camel-k-properties-refactoring/"><h1>Camel K 1.5 - New configuration settings</h1></a> <time itemprop="published" datetime="2021-07-20" title="Tuesday, July 20, 2021">July 20, 2021</time>, by <span rel="author">Pasquale Congiusti</span> </header> <p>Camel K version 1.5 is out. And with it, a new way of providing configuration and resources to your Integration. We have worked on a deep code refactoring in order to harmonize the existing configuration settings and add new ones to exploit the power of camel-quarkus runtime, which has become the main way to materialize an Integration. We added new features that will simplify your developer life. We also added new checks that will give you useful tips when using a feature in a wrong way.</p> <p><a class="continue" href="../../../../blog/2021/07/camel-k-properties-refactoring/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Features/">FEATURES</a><a class="category" href="../../../../categories/Camel-K/">CAMEL K</a> </p> </article> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2021/05/new-camel-k-logging-features/"><h1>New Camel K Logging Features</h1></a> <time itemprop="published" datetime="2021-05-10" title="Monday, May 10, 2021">May 10, 2021</time>, by <span rel="author">Otavio Rodolfo Piske</span> </header> <p>New Camel K Logging Features for Camel K 1.5</p> <p><a class="continue" href="../../../../blog/2021/05/new-camel-k-logging-features/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Features/">FEATURES</a><a class="category" href="../../../../categories/Camel-K/">CAMEL K</a> </p> </article> </div> </div> </div> </article> </main> </div> <div class="footer-tools"> <a title="Improve this document, receive free virtual hugs &hearts;" href="https://github.com/apache/camel-website/edit/main/content/blog/2023/03/camel-k-telemetry/index.md">Edit this Page</a> <a href="#top" title="Reach the top of the page">Back to top</a> </div> <footer> <div class="footer"> <figure class="logo"> <img class="logo" src="../../../../_/img/logo-d-a567cee6fa.svg" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <input id="footer-toggle-overview" type="checkbox" title="Show/Hide Overview section"> <dl> <dt><label for="footer-toggle-overview">Overview</label><label for="footer-toggle-overview">&#65291;</label></dt> <dd><a href="../../../../blog/">Blog</a></dd> <dd><a href="../../../../docs/">Documentation</a></dd> <dd><a href="../../../../community/support/">Community</a></dd> <dd><a href="../../../../download/">Download</a></dd> </dl> <input id="footer-toggle-documentation" type="checkbox" title="Show/Hide Documentation section"> <dl> <dt><label for="footer-toggle-documentation">Documentation</label><label for="footer-toggle-documentation">&#65291;</label></dt> <dd><a href="../../../../manual/">User Manual</a></dd> <dd><a href="../../../../components/next/index.html">Components</a></dd> <dd><a href="../../../../camel-k/next/">Camel-K</a></dd> <dd><a href="../../../../camel-kafka-connector/next/">Camel Kafka Connector</a></dd> <dd><a href="../../../../camel-quarkus/next/">Camel Quarkus</a></dd> <dd><a href="../../../../camel-spring-boot/next/">Camel Spring Boot</a></dd> <dd><a href="../../../../camel-karaf/3.22.x/">Camel Karaf</a></dd> <dd><a href="../../../../manual/faq/index.html">FAQ</a></dd> </dl> <input id="footer-toggle-community" type="checkbox" title="Show/Hide Community section"> <dl> <dt><label for="footer-toggle-community">Community</label><label for="footer-toggle-community">&#65291;</label></dt> <dd><a href="../../../../community/support/">Support</a></dd> <dd><a href="../../../../community/contributing/">Contributing</a></dd> <dd><a href="../../../../community/mailing-list">Mailing Lists</a></dd> <dd><a href="../../../../community/user-stories/">User stories</a></dd> <dd><a href="../../../../community/articles/">Articles</a></dd> <dd><a href="../../../../community/books/">Books</a></dd> <dd><a href="../../../../community/team/">Team</a></dd> </dl> <input id="footer-toggle-about" type="checkbox" title="Show/Hide Acknowledgements section"> <dl> <dt><label for="footer-toggle-about">About</label><label for="footer-toggle-about">&#65291;</label></dt> <dd><a href="../../../../acknowledgments/">Acknowledgments</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p class="remark"> &copy; 2004-2024 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> <div class="resources"> <div class="context"> <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a> </div> <div class="context"> <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/policies/conduct">Code of Conduct</a> </div> <div class="context"> <a href="../../../../sitemap/">Sitemap</a> </div> </div> <div class="footer-icons"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> </div> </footer> <script src="../../../../_/js/vendor/algoliasearch-bad45193e2.js"></script> <script src="../../../../_/js/site-c215fb6972.js"></script> <script async src="../../../../_/js/vendor/highlight-621a10fe1b.js"></script> <script async src="../../../../_/js/vendor/svg4everybody-a0c573f2b9.js"></script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Organization", "name": "Apache Camel", "url": "https:\/\/camel.apache.org\/" , "sameAs": ["https://twitter.com/ApacheCamel"] , "logo": "https:\/\/camel.apache.org\/_\/img\/logo-d.svg" , "description": "Apache Camel ™ is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL." } </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "BreadcrumbList", "itemListElement": [{ "@type": "ListItem", "position": 1 , "item": { "@id": "https://camel.apache.org/", "name": "Apache Camel" } },{ "@type": "ListItem", "position": 2 , "item": { "@id": "https://camel.apache.org/blog/", "name": "blog" } },{ "@type": "ListItem", "position": 3 , "item": { "@id": "https://camel.apache.org/blog/2023/", "name": "2023" } },{ "@type": "ListItem", "position": 4 , "item": { "@id": "https://camel.apache.org/blog/2023/03/", "name": "03" } },{ "@type": "ListItem", "position": 5 , "item": { "@id": "https://camel.apache.org/blog/2023/03/camel-k-telemetry/", "name": "camel-k-telemetry" } }] } </script> </body> </html> 