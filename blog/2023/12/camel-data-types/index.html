<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../../../favicon-128.png" sizes="128x128"> <meta name="application-name" content="Apache Camel"> <meta property="og:title" content="Camel 4 Data Types"> <meta property="og:site_name" content="Apache Camel"> <meta property="og:url" content="https://camel.apache.org/blog/2023/12/camel-data-types/"> <meta name="og:description" content="Boosting the interoperability of Camel routes and Kamelets with data type transformations"> <meta property="og:type" content="website"> <meta property="og:image" content="https://camel.apache.org/blog/2023/12/camel-data-types/featured.png"> <link rel="manifest" href="../../../../site.webmanifest"> <title>Camel 4 Data Types - Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/blog/2023/12/camel-data-types/"> <link rel="stylesheet" href="../../../../_/css/site-b287b96c63.css"> </head> <body class="article"> <header class="header" aria-label="Header"> <nav class="navbar" aria-label="Main menu"> <div class="navbar-brand"> <a class="nav-logo" href="../../../../" title="Apache Camel"></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../blog/"> <img alt="Blog" src="../../../../_/img/blog-4c7fa4cb60.svg"> Blog </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../docs/"> <img alt="Documentation" src="../../../../_/img/documentation-abb1b7f8b1.svg"> Documentation </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../community/"> <img alt="Community" src="../../../../_/img/community-2ec8a3dc8b.svg"> Community </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../download/"> <img alt="Download" src="../../../../_/img/download-63cdd75074.svg"> Download </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../security/"> <img alt="Security" src="../../../../_/img/security-06abe157b3.svg"> Security </a> </div> </div> <div class="navbar-fill"></div> <div class="break-row"></div> <div class="navbar-search results-hidden"> <input id="search" class="search" placeholder="Search" autocomplete="off"> <img src="/_/img/cancel-1ed239489b.svg" alt="Clear" id="search-cancel"> <div id="search_results"></div> </div> <div class="navbar-tools"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button" aria-label="Menu"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <a id="top"></a> <div class="body"> <main role="main blog"> <article class="blog doc"> <header aria-labelledby="title"> <a class="category" href="../../../../categories/Howtos/">HOWTOS</a><a class="category" href="../../../../categories/Transformation/">TRANSFORMATION</a> <h1 id="title">Camel 4 Data Types</h1> </header> <div class="post"> <aside aria-label="Post details"> <div class="summary">Boosting the interoperability of Camel routes and Kamelets with data type transformations</div> Posted on <time itemprop="published" datetime="2023-12-04" title="Monday, December 4, 2023">December 4, 2023</time>, by <figure> <img src="https://avatars.githubusercontent.com/u/195264?v=4" alt="Christoph Deppisch"> <figcaption rel="author">Christoph Deppisch</figcaption> </figure> <h4>Share this blog</h4> <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fcamel.apache.org%2fblog%2f2023%2f12%2fcamel-data-types%2f" target="_blank" rel="noopener" aria-label="Share on Facebook"> <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg> </div> </div> </a> <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=Camel%204%20Data%20Types&url=https%3a%2f%2fcamel.apache.org%2fblog%2f2023%2f12%2fcamel-data-types%2f&hashtags=ApacheCamel" target="_blank" rel="noopener" aria-label="Share on Twitter"> <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg> </div> </div> </a> <a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fcamel.apache.org%2fblog%2f2023%2f12%2fcamel-data-types%2f&title=Camel%204%20Data%20Types&summary=Boosting%20the%20interoperability%20of%20Camel%20routes%20and%20Kamelets%20with%20data%20type%20transformations&source=https%3A%2F%2Fcamel.apache.org" target="_blank" rel="noopener" aria-label="Share on LinkedIn" title="Share on LinkedIn"> <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg> </div> </div> </a> <p> <a class="arrow prev" href="../../../../blog/2023/11/camel-quarkus-release-3.6.0/" title="Previous post: Camel Quarkus 3.6.0 Released">&#10094;</a> <a class="arrow next" href="../../../../blog/2023/12/camel-quarkus-release-3.2.3/" title="Next post: Camel Quarkus 3.2.3 Released">&#10095;</a> </p> </aside> <div class="post-content"> <img class="featured" alt="Blog post featured image" src="../../../../blog/2023/12/camel-data-types/featured_hu44e2da4d52d3015c2b5390a83c94e7cd_447535_800x0_resize_q95_gaussian_3.png" width="800" height="470"> <p>Since Camel 4, users are able to apply data types to their individual Camel routes in order to transform the processed message content in a declarative way. The data type functionality has been added on top of the well-known <a href="../../../../manual/transformer.html">Transformer EIP</a> that is a part of Apache Camel since the beginning.</p> <p>This post gives a short introduction to the concept of data types and continues with several examples that show how to use those data types in Camel for instance as a form of Camel route contracts. The post closes with the usage of data types in Pipe definitions to specify the input/output behavior of Kamelets.</p> <h1 id="how-to-use-data-types">How to use data types</h1> <p>With the Camel version 4, users can now declare data types and do the following data type specific transformations in a route:</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DemoRoute</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">EndpointRouteBuilder</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">transformer</span><span class="p">().</span><span class="na">name</span><span class="p">(</span><span class="s">&#34;base64&#34;</span><span class="p">)</span><span class="w"> </span><span class="c1">// (1)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="p">.</span><span class="na">withDataFormat</span><span class="p">(</span><span class="n">dataFormat</span><span class="p">().</span><span class="na">base64</span><span class="p">().</span><span class="na">end</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">DataType</span><span class="w"> </span><span class="n">base64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataType</span><span class="p">(</span><span class="s">&#34;base64&#34;</span><span class="p">);</span><span class="w"> </span><span class="c1">// (2)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">from</span><span class="p">(</span><span class="n">timer</span><span class="p">(</span><span class="s">&#34;tick&#34;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="p">.</span><span class="na">setBody</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="p">.</span><span class="na">constant</span><span class="p">(</span><span class="s">&#34;Camel rocks!&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="p">.</span><span class="na">transform</span><span class="p">(</span><span class="n">base64</span><span class="p">)</span><span class="w"> </span><span class="c1">// (3)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="p">.</span><span class="na">to</span><span class="p">(</span><span class="n">log</span><span class="p">(</span><span class="s">&#34;info&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><ol> <li>Transformer declaration with a name and an implementation (e.g. data format based, endpoint uri based, custom Java class, …)</li> <li>Data Type declaration matching a transformer name</li> <li>Transform EIP using the Data Type</li> </ol> <p>The example route above forms a simple timer-to-log route with a constant plain text message body saying <em>&ldquo;Camel rocks!&rdquo;</em>.</p> <p>The route also declares a new DataType named <em>&ldquo;base64&rdquo;</em> in combination with a respective transformer implementation that uses the existing Apache Camel <em>base64</em> data format. Users of the transformer EIP can now use the data type as a target type in order to transform the message content to base64 encoding.</p> <p>This example should give you a good first impression on how to use data types in Camel. The next section adds custom data types to the picture.</p> <h1 id="custom-data-types">Custom data types</h1> <p>The previous example has been using an existing Camel data format implementation to perform the data transformation. Of course, you can also add custom transformer implementations and use them in combination with a data type.</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DemoRoute</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">EndpointRouteBuilder</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">transformer</span><span class="p">().</span><span class="na">name</span><span class="p">(</span><span class="s">&#34;uppercase&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                 </span><span class="p">.</span><span class="na">withJava</span><span class="p">(</span><span class="n">UppercaseTransformer</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"> </span><span class="c1">// (1)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">from</span><span class="p">(</span><span class="n">timer</span><span class="p">(</span><span class="s">&#34;tick&#34;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">setBody</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">               </span><span class="p">.</span><span class="na">constant</span><span class="p">(</span><span class="s">&#34;Camel rocks!&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">transform</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">DataType</span><span class="p">(</span><span class="s">&#34;uppercase&#34;</span><span class="p">))</span><span class="w"> </span><span class="c1">// (2)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">to</span><span class="p">(</span><span class="n">log</span><span class="p">(</span><span class="s">&#34;info&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><ol> <li>Directly reference the custom transformer implementation Java type</li> <li>Reference the data type by its name in a transform EIP</li> </ol> <p>The custom UppercaseTransformer Java class extends the Transformer SPI and is able to access the Message object that is being processed by the route. Also, it gets access to the data type from/to in case you want to apply very specific transformations from one data type into another.</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@DataTypeTransformer</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;uppercase&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UppercaseTransformer</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Transformer</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">transform</span><span class="p">(</span><span class="n">Message</span><span class="w"> </span><span class="n">message</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                         </span><span class="n">DataType</span><span class="w"> </span><span class="n">from</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                         </span><span class="n">DataType</span><span class="w"> </span><span class="n">to</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="n">message</span><span class="p">.</span><span class="na">setBody</span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="na">getBody</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                             </span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>This way users are able to provide their custom transformer implementations in combination with data types.</p> <p>As an alternative to specifying the transformer Java class implementation you can also perform a classpath scan which loads all available transformer implementations from a given package.</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DemoRoute</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">EndpointRouteBuilder</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">transformer</span><span class="p">().</span><span class="na">scan</span><span class="p">(</span><span class="s">&#34;org.apache.camel.demo.transform&#34;</span><span class="p">);</span><span class="w"> </span><span class="c1">// (1)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">from</span><span class="p">(</span><span class="n">timer</span><span class="p">(</span><span class="s">&#34;tick&#34;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">setBody</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">               </span><span class="p">.</span><span class="na">constant</span><span class="p">(</span><span class="s">&#34;Camel rocks!&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">transform</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">DataType</span><span class="p">(</span><span class="s">&#34;uppercase&#34;</span><span class="p">))</span><span class="w"> </span><span class="c1">// (2)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">to</span><span class="p">(</span><span class="n">log</span><span class="p">(</span><span class="s">&#34;info&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><ol> <li>Scan package &ldquo;org.apache.camel.demo.transform&rdquo; for available transformer implementations</li> <li>Reference the data type by its name in a transform EIP</li> </ol> <p>The transformer classpath discovery mechanism is based on using the <code>@DataTypeTransformer</code> annotation. The particular annotation defines the transformer &ldquo;name&rdquo; and gives optional <em>&ldquo;fromType&rdquo;</em> and <em>&ldquo;toType&rdquo;</em> filters in order to apply this specific transformer only when the type information matches.</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@DataTypeTransformer</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;uppercase&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UppercaseTransformer</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Transformer</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="c1">// ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>Last but not least, the transformer may also use the service locator pattern in order to do lazy loading via service locator lookup. You may add the transformer service locator to the <em>&ldquo;META-INF/services/org/apache/camel/datatype/transformer&rdquo;</em> folder in your project. Just add a file with the transformer name pointing to the implementing class.</p> <p><em>META-INF/services/org/apache/camel/datatype/transformer/uppercase</em></p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-properties" data-lang="properties"><span class="line"><span class="cl"><span class="na">class</span><span class="o">=</span><span class="s">org.apache.camel.demo.transformer.UppercaseTransformer</span>
</span></span></code></pre></div><p>This is how you can use custom transformer implementations and use them as part of a data type transformation in your Camel route. In the next section we move on to using predefined transformers provided by Camel components.</p> <h1 id="default-data-type-transformers">Default data type transformers</h1> <p>Camel 4 also introduces a set of default data type transformer implementations that you can directly use in your route.</p> <p>The default data type transformers in Camel can be of generic nature but may also relate to a very specific Camel component. This way each Camel component is able to provide additional data types for input and output data transformations. These Camel component specific transformers usually use the component scheme as part of the name (e.g. <em>aws2-s3:application-cloudevents</em>).</p> <p>This is a list of available data type transformers provided by Camel 4.</p> <table> <thead> <tr> <th>Data Type Name</th> <th style="text-align:center">Component</th> </tr> </thead> <tbody> <tr> <td>text-plain</td> <td style="text-align:center">camel-core-processor</td> </tr> <tr> <td>application-octet-stream</td> <td style="text-align:center">camel-core-processor</td> </tr> <tr> <td>http:application-cloudevents</td> <td style="text-align:center">camel-cloudevents</td> </tr> <tr> <td>application-cloudevents+json</td> <td style="text-align:center">camel-cloudevents</td> </tr> <tr> <td>aws2-s3:application-cloudevents</td> <td style="text-align:center">camel-aws2-s3</td> </tr> <tr> <td>aws2-sqs:application-cloudevents</td> <td style="text-align:center">camel-aws2-sqs</td> </tr> <tr> <td>aws2-ddb:application-json</td> <td style="text-align:center">camel-aws2-ddb</td> </tr> <tr> <td>azure-storage-blob:application-cloudevents</td> <td style="text-align:center">camel-azure-storage</td> </tr> <tr> <td>google-sheets:application-x-struct</td> <td style="text-align:center">camel-google-sheets</td> </tr> <tr> <td>google-storage:application-cloudevents</td> <td style="text-align:center">camel-google-storage</td> </tr> <tr> <td>application-json</td> <td style="text-align:center">camel-jackson</td> </tr> <tr> <td>application-x-struct</td> <td style="text-align:center">camel-jackson</td> </tr> <tr> <td>application-x-java-object</td> <td style="text-align:center">camel-jackson</td> </tr> <tr> <td>avro-binary</td> <td style="text-align:center">camel-jackson-avro</td> </tr> <tr> <td>avro-x-struct</td> <td style="text-align:center">camel-jackson-avro</td> </tr> <tr> <td>avro-x-java-object</td> <td style="text-align:center">camel-jackson-avro</td> </tr> </tbody> </table> <p>The combination of Camel component specific data types can be very powerful when it comes to processing the data coming from one component as an input to another component.</p> <p>As an example the next Camel route uses the <em>&ldquo;http:application-cloudevents&rdquo;</em> data type that is provided by the <em>&ldquo;camel-cloudevents&rdquo;</em> component. The data type reads data from the processed message and the Camel exchange and sets proper values according to the CloudEvents specification (e.g. <em>ce-id</em>, <em>ce-source</em>, <em>ce-type</em>).</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DemoRoute</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">EndpointRouteBuilder</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">from</span><span class="p">(</span><span class="n">timer</span><span class="p">(</span><span class="s">&#34;tick&#34;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">setBody</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">               </span><span class="p">.</span><span class="na">constant</span><span class="p">(</span><span class="s">&#34;Camel rocks!&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">transform</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">               </span><span class="k">new</span><span class="w"> </span><span class="n">DataType</span><span class="p">(</span><span class="s">&#34;http:application-cloudevents&#34;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">to</span><span class="p">(</span><span class="n">log</span><span class="p">(</span><span class="s">&#34;info&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>The route now uses the CloudEvents specific Http headers as you can see in the log output:</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Exchange[
</span></span><span class="line"><span class="cl">  Headers: {
</span></span><span class="line"><span class="cl">      CamelMessageTimestamp=1697562611364,
</span></span><span class="line"><span class="cl">      ce-id=7C4BE86A0A14A5E-0000000000000013,
</span></span><span class="line"><span class="cl">      ce-source=org.apache.camel, ce-specversion=1.0,
</span></span><span class="line"><span class="cl">      ce-time=2023-10-17T17:10:11.364Z,
</span></span><span class="line"><span class="cl">      ce-type=org.apache.camel.event,
</span></span><span class="line"><span class="cl">      Content-Type=application/json,
</span></span><span class="line"><span class="cl">      firedTime=Tue Oct 17 19:10:11 CEST 2023
</span></span><span class="line"><span class="cl">  }
</span></span><span class="line"><span class="cl">  BodyType: String
</span></span><span class="line"><span class="cl">  Body: Camel rocks!
</span></span><span class="line"><span class="cl">]
</span></span></code></pre></div><p>We can change this to the Json binding of the CloudEvents specification just by using the data type <em>&ldquo;application-cloudevents+json&rdquo;</em>. The output then looks like this:</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Exchange[
</span></span><span class="line"><span class="cl">  Headers: {
</span></span><span class="line"><span class="cl">      CamelMessageTimestamp=1697562914886,
</span></span><span class="line"><span class="cl">      Content-Type=application/cloudevents+json,
</span></span><span class="line"><span class="cl">      firedTime=Tue Oct 17 19:15:14 CEST 2023}
</span></span><span class="line"><span class="cl">  BodyType: String
</span></span><span class="line"><span class="cl">  Body: {
</span></span><span class="line"><span class="cl">      &#34;datacontenttype&#34;:&#34;application/json&#34;,
</span></span><span class="line"><span class="cl">      &#34;data&#34;:&#34;Camel rocks!&#34;,
</span></span><span class="line"><span class="cl">      &#34;specversion&#34;:&#34;1.0&#34;,
</span></span><span class="line"><span class="cl">      &#34;id&#34;:&#34;4667EE9FC3E7889-0000000000000004&#34;,
</span></span><span class="line"><span class="cl">      &#34;source&#34;:&#34;org.apache.camel&#34;,
</span></span><span class="line"><span class="cl">      &#34;time&#34;:&#34;2023-10-17T17:15:14.886Z&#34;,
</span></span><span class="line"><span class="cl">      &#34;type&#34;:&#34;org.apache.camel.event&#34;
</span></span><span class="line"><span class="cl">  }
</span></span><span class="line"><span class="cl">]
</span></span></code></pre></div><p>Each Camel component knows best about its individual domain model that may be required as an input or gets produced as an output. Therefore, adding data types to the Camel components that enable us to automatically transform the data into its individual domain model makes much sense because it adds more flexibility in using the components.</p> <p>For instance the sample above has been using a generic Http CloudEvents data type which is awesome already as it sets reasonable values according to the CloudEvents specification. In addition to that, individual Camel components may add component specific data types for CloudEvents, too. Just like the AWS S3 component adds a CloudEvent specific output data type which is able to set proper S3 bucket values as CloudEvent fields (e.g. setting the <em>s3-bucketname</em> as the <em>ce-source</em> property).</p> <p>Also, as another example the Google Sheets component adds an input data type that is able to transform a simple Json structure into a proper ValueRange (<em>com.google.api.services.sheets.v4.model</em> API) domain model object in order to write data into a spreadsheet.</p> <p>This data type simplifies the interaction with the component a lot because the user does not even need to know about the individual Google domain model object structure at all. Instead, users just provide an arbitrary Json object as an input in order to write data to a spreadsheet.</p> <p>The following route shows the interaction with the Google Sheets Camel component without data types. The user needs to provide a proper ValueRange domain model object and needs to set this in a specific message header.</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ModelToGoogleSheetsRoute</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">EndpointRouteBuilder</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">from</span><span class="p">(</span><span class="n">timer</span><span class="p">(</span><span class="s">&#34;tick&#34;</span><span class="p">).</span><span class="na">period</span><span class="p">(</span><span class="n">5000</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">setHeader</span><span class="p">(</span><span class="n">GoogleSheetsConstants</span><span class="p">.</span><span class="na">PROPERTY_PREFIX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;spreadsheetId&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">               </span><span class="p">.</span><span class="na">simple</span><span class="p">(</span><span class="s">&#34;{{sheets.spreadsheetId}}&#34;</span><span class="p">)</span><span class="w"> </span><span class="c1">// (1)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">setHeader</span><span class="p">(</span><span class="n">GoogleSheetsConstants</span><span class="p">.</span><span class="na">PROPERTY_PREFIX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;range&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">               </span><span class="p">.</span><span class="na">simple</span><span class="p">(</span><span class="s">&#34;{{sheets.range}}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">process</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">CreateValueRangeProcessor</span><span class="p">())</span><span class="w"> </span><span class="c1">// (2)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">to</span><span class="p">(</span><span class="n">googleSheets</span><span class="p">(</span><span class="s">&#34;data/append&#34;</span><span class="p">)</span><span class="w"> </span><span class="c1">// (3)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                   </span><span class="p">.</span><span class="na">clientId</span><span class="p">(</span><span class="s">&#34;{{sheets.clientId}}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                   </span><span class="p">.</span><span class="na">accessToken</span><span class="p">(</span><span class="s">&#34;{{sheets.accessToken}}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                   </span><span class="p">.</span><span class="na">refreshToken</span><span class="p">(</span><span class="s">&#34;{{sheets.refreshToken}}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                   </span><span class="p">.</span><span class="na">clientSecret</span><span class="p">(</span><span class="s">&#34;{{sheets.clientSecret}}&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CreateValueRangeProcessor</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Processor</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">Exchange</span><span class="w"> </span><span class="n">exchange</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">ValueRange</span><span class="w"> </span><span class="n">valueRange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ValueRange</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">values</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="s">&#34;java-route&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;Pineapple&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">100</span><span class="p">));</span><span class="w"> </span><span class="c1">// (4)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">valueRange</span><span class="p">.</span><span class="na">setMajorDimension</span><span class="p">(</span><span class="s">&#34;ROWS&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">valueRange</span><span class="p">.</span><span class="na">setValues</span><span class="p">(</span><span class="n">values</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">exchange</span><span class="p">.</span><span class="na">getMessage</span><span class="p">().</span><span class="na">setBody</span><span class="p">(</span><span class="n">valueRange</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">exchange</span><span class="p">.</span><span class="na">getMessage</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">               </span><span class="p">.</span><span class="na">setHeader</span><span class="p">(</span><span class="n">GoogleSheetsConstants</span><span class="p">.</span><span class="na">PROPERTY_PREFIX</span><span class="w"> </span><span class="o">+</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                                      </span><span class="s">&#34;valueInputOption&#34;</span><span class="p">,</span><span class="s">&#34;USER_ENTERED&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="n">exchange</span><span class="p">.</span><span class="na">getMessage</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">               </span><span class="p">.</span><span class="na">setHeader</span><span class="p">(</span><span class="n">GoogleSheetsConstants</span><span class="p">.</span><span class="na">PROPERTY_PREFIX</span><span class="w"> </span><span class="o">+</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                                      </span><span class="s">&#34;values&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">valueRange</span><span class="p">);</span><span class="w"> </span><span class="c1">// (5)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><ol> <li>Start the route and set some Google Sheets specific headers such as the spreadsheet id</li> <li>Use a custom processor implementation that creates a proper Google Sheets ValueRange object</li> <li>Call the Google Sheets Camel component to write data to the spreadsheet</li> <li>Construct a ValueRange domain model object that is required by the Google Sheets component. Sets the values to write into the spreadsheet (client, product and amount)</li> <li>Set the domain model object as a specific header on the message</li> </ol> <p>Using the Google Sheets component requires a lot of knowledge of the component internals and the Google Sheets domain model. Instead, you can use the Json struct data type that is provided by the Google Sheets component since Camel version 4. It automatically transforms an arbitrary Json object with custom fields into a ValueRange object.</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JsonToSheetsRoute</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">EndpointRouteBuilder</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">from</span><span class="p">(</span><span class="n">timer</span><span class="p">(</span><span class="s">&#34;tick&#34;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">setHeader</span><span class="p">(</span><span class="n">GoogleSheetsConstants</span><span class="p">.</span><span class="na">PROPERTY_PREFIX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;columnNames&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">               </span><span class="p">.</span><span class="na">constant</span><span class="p">(</span><span class="s">&#34;client,product,amount&#34;</span><span class="p">)</span><span class="w"> </span><span class="c1">// (1)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">setHeader</span><span class="p">(</span><span class="n">GoogleSheetsConstants</span><span class="p">.</span><span class="na">PROPERTY_PREFIX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;spreadsheetId&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">               </span><span class="p">.</span><span class="na">simple</span><span class="p">(</span><span class="s">&#34;{{sheets.spreadsheetId}}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">setHeader</span><span class="p">(</span><span class="n">GoogleSheetsConstants</span><span class="p">.</span><span class="na">PROPERTY_PREFIX</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;range&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">               </span><span class="p">.</span><span class="na">simple</span><span class="p">(</span><span class="s">&#34;{{sheets.range}}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">setBody</span><span class="p">().</span><span class="na">simple</span><span class="p">(</span><span class="s">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">             {&#34;client&#34;: &#34;java-route&#34;,&#34;product&#34;: &#34;Pineapple&#34;,&#34;amount&#34;: 100}
</span></span></span><span class="line"><span class="cl"><span class="s">           &#34;&#34;&#34;</span><span class="p">)</span><span class="w"> </span><span class="c1">// (2)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">transform</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">DataType</span><span class="p">(</span><span class="s">&#34;google-sheets:application-x-struct&#34;</span><span class="p">))</span><span class="w"> </span><span class="c1">// (3)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">to</span><span class="p">(</span><span class="n">googleSheets</span><span class="p">(</span><span class="s">&#34;data/append&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                   </span><span class="p">.</span><span class="na">clientId</span><span class="p">(</span><span class="s">&#34;{{sheets.clientId}}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                   </span><span class="p">.</span><span class="na">accessToken</span><span class="p">(</span><span class="s">&#34;{{sheets.accessToken}}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                   </span><span class="p">.</span><span class="na">refreshToken</span><span class="p">(</span><span class="s">&#34;{{sheets.refreshToken}}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                   </span><span class="p">.</span><span class="na">clientSecret</span><span class="p">(</span><span class="s">&#34;{{sheets.clientSecret}}&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><ol> <li>Start the route and set some Google Sheets related headers such as the spreadsheet id. Also set the custom column names that the custom Json object uses</li> <li>Use arbitrary Json object as a message body representing the values to write into the spreadsheet (client, product and amount)</li> <li>Define <em>&ldquo;google-sheets:application-x-struct&rdquo;</em> as a data type. The data type will transform the arbitrary Json object into a proper Google Sheets ValueRange domain model so that the Camel component is able to interact with the Sheets API</li> </ol> <p>This is a good example how data types are keen to simplify the usage of Camel components and increase the interoperability of components adapting the input/output data to a specific context in a declarative way (e.g. CloudEvents, Kafka, Http, JsonNode, …). There is no need to add a custom processor any more that deals with the component internals. Instead, the component itself provides a data type that is able to do the transformation.</p> <p>The next section uses this concept to create contracts for Camel routes where the input/output data of a route is well declared and all processed data gets automatically transformed based on that contract.</p> <h1 id="camel-route-contracts">Camel route contracts</h1> <p>Up to now the code samples always used the transform EIP with a data type in the route. As an alternative to that you may also specify the data type as an input/output type for the whole Camel route.</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DemoRoute</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">EndpointRouteBuilder</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">from</span><span class="p">(</span><span class="n">timer</span><span class="p">(</span><span class="s">&#34;tick&#34;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">setBody</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">               </span><span class="p">.</span><span class="na">constant</span><span class="p">(</span><span class="s">&#34;Camel rocks!&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">to</span><span class="p">(</span><span class="n">direct</span><span class="p">(</span><span class="s">&#34;ce-outbound&#34;</span><span class="p">));</span><span class="w"> </span><span class="c1">// (1)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="n">from</span><span class="p">(</span><span class="n">direct</span><span class="p">(</span><span class="s">&#34;ce-outbound&#34;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">inputType</span><span class="p">(</span><span class="s">&#34;application-cloudevents+json&#34;</span><span class="p">)</span><span class="w"> </span><span class="c1">// (2)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">           </span><span class="p">.</span><span class="na">to</span><span class="p">(</span><span class="n">log</span><span class="p">(</span><span class="s">&#34;info&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><ol> <li>Call another Camel route via direct endpoint</li> <li>Route declaring its input type as <em>&ldquo;application-cloudevents+json&rdquo;</em></li> </ol> <p>In this sample the <em>&ldquo;ce-outbound&rdquo;</em> route defines an inputType with the value <em>&ldquo;application-cloudevents+json&rdquo;</em>. This means that all calls to this route automatically perform a data type transformation to this specific input type.</p> <p>With input and output types you are able to define contracts between Camel routes leveraging the automatic data type transformations.</p> <p>As data types are declarative their usage gets even more important when it comes to using Kamelets and Pipes in Camel.</p> <h1 id="kamelet-data-types">Kamelet data types</h1> <p>The declarative nature of data types is very important for Kamelets and Pipes because here you may not have the opportunity to add a custom processor with some lines of code to do the data transformations. Instead, we use the predefined data types to apply transformations as part of a Kamelet or Pipe.</p> <p>The feature brings huge improvements in terms of interoperability of Kamelets where the output of Kamelet <em>A</em> is used as an input for Kamelet <em>B</em>, for instance when binding sources and sinks in a Pipe.</p> <h2 id="expose-data-type-information">Expose data type information</h2> <p>First of all, Kamelets may expose the supported input/output data types as part of the Kamelet specification.</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">camel.apache.org/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Kamelet</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">aws-s3-source</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">properties</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="c"># ...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">dataTypes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">out</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l">binary</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">types</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">binary</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;application-octet-stream&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">Default binary representation of the source.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">mediaType</span><span class="p">:</span><span class="w"> </span><span class="l">application/octet-stream</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">cloudevents</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;aws2-s3:application-cloudevents&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l">Data type sets CloudEvent headers on the message.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c"># ...</span><span class="w">
</span></span></span></code></pre></div><p>The sample above exposes two output data types <em>&ldquo;binary&rdquo;</em> and <em>&ldquo;cloudevents&rdquo;</em>. This means that the Kamelet is able to produce these outputs and users may choose from these when referencing the Kamelet in a Pipe.</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">camel.apache.org/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Pipe</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">aws-s3-to-http</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">integration</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">dependencies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span>- <span class="s2">&#34;camel:cloudevents&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">source</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">ref</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Kamelet</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">camel.apache.org/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">aws-s3-source</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">properties</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">bucketNameOrArn</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;{{aws.s3.bucketNameOrArn}}&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">accessKey</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;{{aws.s3.accessKey}}&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">secretKey</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;{{aws.s3.secretKey}}&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">dataTypes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">out</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l">aws2-s3:application-cloudevents</span><span class="w"> </span><span class="c"># (1)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">sink</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">ref</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Kamelet</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">camel.apache.org/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">http-sink</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">dataTypes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">in</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l">http:application-cloudevents </span><span class="w"> </span><span class="c"># (2)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">properties</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;{{http.sink.url}}&#34;</span><span class="w">
</span></span></span></code></pre></div><ol> <li>Use aws2-s3 specific CloudEvents output which sets specific headers</li> <li>Use Http binding of CloudEvents to produce a proper Http request following the CloudEvents specification</li> </ol> <p>The Pipe is able to choose input and output data types when referencing Kamelets as sources and sinks. This way you can adapt the Kamelets behavior and the combination of Kamelets becomes much more robust as the Kamelets are able to work hand in hand with increased interoperability.</p> <p>Another example shows that Kamelet data types also help to transform the message as part of a Pipe. There are various Kamelets available to transform JsonNode based workloads such as extract-field-action, insert-field-action, hoist-field-action. All these action Kamelets operate on a generic JsonNode model object. The data types help to transform the Kamelet source output into such a generic JsonNode by using the <em>&ldquo;application-x-struct&rdquo;</em> data type.</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">camel.apache.org/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Pipe</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">slack-to-kafka</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">source</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">ref</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Kamelet</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">camel.apache.org/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">slack-source</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">properties</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">channel</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;{{slack.channel}}&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;{{slack.bot.token}}&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">dataTypes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">out</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l">application-x-struct</span><span class="w"> </span><span class="c"># (1)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">steps</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span>- <span class="nt">ref</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Kamelet</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">camel.apache.org/v1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">extract-field-action</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">properties</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">field</span><span class="p">:</span><span class="w"> </span><span class="l">text</span><span class="w"> </span><span class="c"># (2)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">sink</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">ref</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">KafkaTopic</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">kafka.strimzi.io/v1beta2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;{{kafka.topic}}&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">dataTypes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">in</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">format</span><span class="p">:</span><span class="w"> </span><span class="l">plain-text</span><span class="w"> </span><span class="c"># (3)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">properties</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">brokers</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;{{kafka.bootstrapServers}}&#34;</span><span class="w">
</span></span></span></code></pre></div><ol> <li>Use &ldquo;application-x-struct&rdquo; data type that transforms the Slack Json into a generic JsonNode using the Jackson library</li> <li>Extract the &ldquo;text&rdquo; field (user input on the Slack channel) from the JsonNode and set as a new message body</li> <li>Transform the message to &ldquo;plain-text&rdquo; before sending the data to Kafka</li> </ol> <p>This example Pipe shows that data types tremendously improve the interaction between Kamelets because it is very easy to transform the message content into different data formats as part of the Pipe processing by just referencing some data types.</p> <p>The input/output data types on Kamelets perfectly complement the declarative nature of Kamelet and Pipes.</p> <h1 id="whats-next">What’s next!?</h1> <p>The data types feature is available since Camel 4 and the next step is to provide more data type transformer implementations for different types of Camel components. So please do not hesitate to provide feedback and get involved by adding more data types that everybody can use.</p> <div class="related"> <h3 id="related"><a class="anchor" href="#related"></a>Related posts</h3> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2023/01/camel-k-yaks/"><h1>Testing Camel K with YAKS</h1></a> <time itemprop="published" datetime="2023-01-31" title="Tuesday, January 31, 2023">January 31, 2023</time>, by <span rel="author">Christoph Deppisch</span> </header> <p>This post describes the steps to test a Camel K integration with YAKS both locally and on the Kubernetes platform. What is YAKS? YAKS is an Open Source test automation platform that leverages Behavior Driven Development concepts for running tests locally and on Cloud infrastructure (e.g. Kubernetes or OpenShift). This means that the testing tool is able to run your tests both as local tests and natively on Kubernetes. The framework is specifically designed to verify Serverless and Microservice applications and aims for integration testing with the application under test up and running in a production-like environment.</p> <p><a class="continue" href="../../../../blog/2023/01/camel-k-yaks/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Howtos/">HOWTOS</a><a class="category" href="../../../../categories/Camel-K/">CAMEL K</a><a class="category" href="../../../../categories/Test/">TEST</a><a class="category" href="../../../../categories/YAKS/">YAKS</a> </p> </article> </div> </div> </div> </article> </main> </div> <div class="footer-tools"> <a title="Improve this document, receive free virtual hugs &hearts;" href="https://github.com/apache/camel-website/edit/main/content/blog/2023/12/camel-data-types/index.md">Edit this Page</a> <a href="#top" title="Reach the top of the page">Back to top</a> </div> <footer> <div class="footer"> <figure class="logo"> <img class="logo" src="../../../../_/img/logo-d-a567cee6fa.svg" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <input id="footer-toggle-overview" type="checkbox" title="Show/Hide Overview section"> <dl> <dt><label for="footer-toggle-overview">Overview</label><label for="footer-toggle-overview">&#65291;</label></dt> <dd><a href="../../../../blog/">Blog</a></dd> <dd><a href="../../../../docs/">Documentation</a></dd> <dd><a href="../../../../community/support/">Community</a></dd> <dd><a href="../../../../download/">Download</a></dd> </dl> <input id="footer-toggle-documentation" type="checkbox" title="Show/Hide Documentation section"> <dl> <dt><label for="footer-toggle-documentation">Documentation</label><label for="footer-toggle-documentation">&#65291;</label></dt> <dd><a href="../../../../manual/">User Manual</a></dd> <dd><a href="../../../../components/next/index.html">Components</a></dd> <dd><a href="../../../../camel-k/next/">Camel-K</a></dd> <dd><a href="../../../../camel-kafka-connector/next/">Camel Kafka Connector</a></dd> <dd><a href="../../../../camel-quarkus/next/">Camel Quarkus</a></dd> <dd><a href="../../../../camel-spring-boot/next/">Camel Spring Boot</a></dd> <dd><a href="../../../../camel-karaf/3.22.x/">Camel Karaf</a></dd> <dd><a href="../../../../manual/faq/index.html">FAQ</a></dd> </dl> <input id="footer-toggle-community" type="checkbox" title="Show/Hide Community section"> <dl> <dt><label for="footer-toggle-community">Community</label><label for="footer-toggle-community">&#65291;</label></dt> <dd><a href="../../../../community/support/">Support</a></dd> <dd><a href="../../../../community/contributing/">Contributing</a></dd> <dd><a href="../../../../community/mailing-list">Mailing Lists</a></dd> <dd><a href="../../../../community/user-stories/">User stories</a></dd> <dd><a href="../../../../community/articles/">Articles</a></dd> <dd><a href="../../../../community/books/">Books</a></dd> <dd><a href="../../../../community/team/">Team</a></dd> </dl> <input id="footer-toggle-about" type="checkbox" title="Show/Hide Acknowledgements section"> <dl> <dt><label for="footer-toggle-about">About</label><label for="footer-toggle-about">&#65291;</label></dt> <dd><a href="../../../../acknowledgments/">Acknowledgments</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p class="remark"> &copy; 2004-2024 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> <div class="resources"> <div class="context"> <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a> </div> <div class="context"> <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/policies/conduct">Code of Conduct</a> </div> <div class="context"> <a href="../../../../sitemap/">Sitemap</a> </div> </div> <div class="footer-icons"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> </div> </footer> <script src="../../../../_/js/vendor/algoliasearch-bad45193e2.js"></script> <script src="../../../../_/js/site-c215fb6972.js"></script> <script async src="../../../../_/js/vendor/highlight-621a10fe1b.js"></script> <script async src="../../../../_/js/vendor/svg4everybody-a0c573f2b9.js"></script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Organization", "name": "Apache Camel", "url": "https:\/\/camel.apache.org\/" , "sameAs": ["https://twitter.com/ApacheCamel"] , "logo": "https:\/\/camel.apache.org\/_\/img\/logo-d.svg" , "description": "Apache Camel ™ is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL." } </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "BreadcrumbList", "itemListElement": [{ "@type": "ListItem", "position": 1 , "item": { "@id": "https://camel.apache.org/", "name": "Apache Camel" } },{ "@type": "ListItem", "position": 2 , "item": { "@id": "https://camel.apache.org/blog/", "name": "blog" } },{ "@type": "ListItem", "position": 3 , "item": { "@id": "https://camel.apache.org/blog/2023/", "name": "2023" } },{ "@type": "ListItem", "position": 4 , "item": { "@id": "https://camel.apache.org/blog/2023/12/", "name": "12" } },{ "@type": "ListItem", "position": 5 , "item": { "@id": "https://camel.apache.org/blog/2023/12/camel-data-types/", "name": "camel-data-types" } }] } </script> </body> </html> 