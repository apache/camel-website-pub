<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../../../favicon-128.png" sizes="128x128"> <meta name="application-name" content="Apache Camel"> <meta property="og:title" content="Camel Textual Route debugging in Vim"> <meta property="og:site_name" content="Apache Camel"> <meta property="og:url" content="https://camel.apache.org/blog/2022/09/vimdap/"> <meta name="og:description" content="Camel Textual Route debugging in Vim"> <meta property="og:type" content="website"> <meta property="og:image" content="https://camel.apache.org/_/img/logo-d.svg"> <link rel="manifest" href="../../../../site.webmanifest"> <title>Camel Textual Route debugging in Vim - Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/blog/2022/09/vimdap/"> <link rel="stylesheet" href="../../../../_/css/site-b287b96c63.css"> </head> <body class="article"> <header class="header" aria-label="Header"> <nav class="navbar" aria-label="Main menu"> <div class="navbar-brand"> <a class="nav-logo" href="../../../../" title="Apache Camel"></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../blog/"> <img alt="Blog" src="../../../../_/img/blog-4c7fa4cb60.svg"> Blog </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../docs/"> <img alt="Documentation" src="../../../../_/img/documentation-abb1b7f8b1.svg"> Documentation </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../community/"> <img alt="Community" src="../../../../_/img/community-2ec8a3dc8b.svg"> Community </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../download/"> <img alt="Download" src="../../../../_/img/download-63cdd75074.svg"> Download </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../security/"> <img alt="Security" src="../../../../_/img/security-06abe157b3.svg"> Security </a> </div> </div> <div class="navbar-fill"></div> <div class="break-row"></div> <div class="navbar-search results-hidden"> <input id="search" class="search" placeholder="Search" autocomplete="off"> <img src="/_/img/cancel-1ed239489b.svg" alt="Clear" id="search-cancel"> <div id="search_results"></div> </div> <div class="navbar-tools"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button" aria-label="Menu"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <a id="top"></a> <div class="body"> <main role="main blog"> <article class="blog doc"> <header aria-labelledby="title"> <a class="category" href="../../../../categories/Tooling/">TOOLING</a> <h1 id="title">Camel Textual Route debugging in Vim</h1> </header> <div class="post"> <aside aria-label="Post details"> <div class="summary">Camel Textual Route debugging in Vim</div> Posted on <time itemprop="published" datetime="2022-09-14" title="Wednesday, September 14, 2022">September 14, 2022</time>, by <figure> <img src="https://avatars.githubusercontent.com/u/89964868?v=4" alt="Navya"> <figcaption rel="author">Navya</figcaption> </figure> <h4>Share this blog</h4> <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fcamel.apache.org%2fblog%2f2022%2f09%2fvimdap%2f" target="_blank" rel="noopener" aria-label="Share on Facebook"> <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg> </div> </div> </a> <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=Camel%20Textual%20Route%20debugging%20in%20Vim&url=https%3a%2f%2fcamel.apache.org%2fblog%2f2022%2f09%2fvimdap%2f&hashtags=ApacheCamel" target="_blank" rel="noopener" aria-label="Share on Twitter"> <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg> </div> </div> </a> <a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fcamel.apache.org%2fblog%2f2022%2f09%2fvimdap%2f&title=Camel%20Textual%20Route%20debugging%20in%20Vim&summary=Camel%20Textual%20Route%20debugging%20in%20Vim&source=https%3A%2F%2Fcamel.apache.org" target="_blank" rel="noopener" aria-label="Share on LinkedIn" title="Share on LinkedIn"> <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg> </div> </div> </a> <p> <a class="arrow prev" href="../../../../blog/2022/09/RELEASE-3.18.2/" title="Previous post: RELEASE 3.18.2">&#10094;</a> <a class="arrow next" href="../../../../blog/2022/09/camel-karavan-3.18.3/" title="Next post: Karavan Preview Release 3.18.3">&#10095;</a> </p> </aside> <div class="post-content"> <p>A month before it became easier to provide language support inside Vim, Neovim using coc.nvim -<a href="../../../../blog/2022/07/coc-nvim-camel-lsp/">See this blog post</a>. It is now time to use Camel Debug Adapter in Vim<a href="https://github.com/camel-tooling/camel-dap-client-vim" rel="noopener nofollow noreferrer">camel-tooling/camel-dap-client-vim</a>.</p> <h1 id="vim-debug-adapter-client-for-apache-camel">VIM Debug Adapter client for Apache Camel</h1> <p>I just got the debug integration for camel in vim running using <a href="https://github.com/puremourning/vimspector" rel="noopener nofollow noreferrer">vimspector</a>.</p> <p><img src="images/vimdap.gif" alt="Demo"></p> <h2 id="install">Install</h2> <p>Install the vimspector using vim-plug plugin manager.</p> <ul> <li> <p>Inside <code>.vimrc</code> file:</p> </li> <li> <p><code>Plug 'puremourning/vimspector'</code></p> </li> <li> <p><code>:PlugInstall</code></p> </li> </ul> <h1 id="how-to-get-camel-debug-adapter-serverjar-file">How to get Camel Debug Adapter server.jar file?</h1> <ul> <li>I found 2 releases of camel DAP server here - <a href="https://github.com/camel-tooling/camel-debug-adapter/tags" rel="noopener nofollow noreferrer">https://github.com/camel-tooling/camel-debug-adapter/tags</a> but it doesn&rsquo;t contain any jar files. To get a jar file either you can compile the source or download from the Maven Central repository.</li> <li>To download from Maven Central repository</li> </ul> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">cd</span> /home
</span></span><span class="line"><span class="cl">curl -LO https://repo1.maven.org/maven2/com/github/camel-tooling/camel-dap-server/0.4.0/camel-dap-server-0.4.0.jar
</span></span></code></pre></div><h1 id="inside-vimrc-file">Inside .vimrc file:</h1> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-viml" data-lang="viml"><span class="line"><span class="cl">  <span class="nx">call</span> <span class="nx">plug</span>#<span class="nx">begin</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="c">  &#34; The default plugin directory will be as follows:</span>
</span></span><span class="line"><span class="cl"><span class="c">  &#34;   - Vim (Linux/macOS): &#39;~/.vim/plugged&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c">  &#34;   - Vim (Windows): &#39;~/vimfiles/plugged&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c">  &#34;   - Neovim (Linux/macOS/Windows): stdpath(&#39;data&#39;) . &#39;/plugged&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c">  &#34; You can specify a custom plugin directory by passing it as the argument</span>
</span></span><span class="line"><span class="cl"><span class="c">  &#34;   - e.g. `call plug#begin(&#39;~/.vim/plugged&#39;)`</span>
</span></span><span class="line"><span class="cl"><span class="c">  &#34;   - Avoid using standard Vim directory names like &#39;plugin&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c">  &#34;</span>
</span></span><span class="line"><span class="cl"><span class="c">  &#34;</span>
</span></span><span class="line"><span class="cl"><span class="c">  &#34; Use release branch (recommend)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Plug</span> <span class="s1">&#39;neoclide/coc.nvim&#39;</span><span class="p">,</span> {<span class="s1">&#39;branch&#39;</span>: <span class="s1">&#39;release&#39;</span>}
</span></span><span class="line"><span class="cl">  <span class="nx">Plug</span> <span class="s1">&#39;puremourning/vimspector&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">call</span> <span class="nx">plug</span>#<span class="nx">end</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="c">
</span></span></span><span class="line"><span class="cl"><span class="c">  &#34; https://github.com/puremourning/vimspector/blob/master/README.md#human-mode</span>
</span></span><span class="line"><span class="cl">  <span class="k">let</span> <span class="nx">g</span>:<span class="nx">vimspector_enable_mappings</span> <span class="p">=</span> <span class="s1">&#39;HUMAN&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c">
</span></span></span><span class="line"><span class="cl"><span class="c">  &#34; Vimspector key mappings</span>
</span></span><span class="line"><span class="cl">  <span class="nx">nnoremap</span> <span class="p">&lt;</span><span class="nx">Leader</span><span class="p">&gt;</span><span class="nx">dd</span> :<span class="nx">call</span> <span class="nx">vimspector</span>#<span class="nx">Launch</span><span class="p">()&lt;</span><span class="nx">CR</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">nnoremap</span> <span class="p">&lt;</span><span class="nx">Leader</span><span class="p">&gt;</span><span class="nx">dt</span> :<span class="nx">call</span> <span class="nx">vimspector</span>#<span class="nx">ToggleBreakpoint</span><span class="p">()&lt;</span><span class="nx">CR</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">nnoremap</span> <span class="p">&lt;</span><span class="nx">Leader</span><span class="p">&gt;</span><span class="nx">dc</span> :<span class="nx">call</span> <span class="nx">vimspector</span>#<span class="nx">Continue</span><span class="p">()&lt;</span><span class="nx">CR</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">nnoremap</span> <span class="p">&lt;</span><span class="nx">Leader</span><span class="p">&gt;</span><span class="nx">de</span> :<span class="nx">call</span> <span class="nx">vimspector</span>#<span class="nx">Reset</span><span class="p">()&lt;</span><span class="nx">CR</span><span class="p">&gt;</span>
</span></span></code></pre></div><h1 id="configure-camel-example-debug-gadget">Configure camel-example Debug Gadget</h1> <p>Place this content in <code>cust_camel-debug-adapter.json</code> in your vimspector directory (path might be different for you)</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">cd</span> ~/.vim/plugged/vimspector/gadgets/linux/.gadgets.d
</span></span></code></pre></div><p>Vimspector adapter configuration:</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;adapters&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;cust_camel-debug-adapter&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">         <span class="nt">&#34;command&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;java&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;-jar&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;/home/camel-dap-server-0.4.0.jar&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h1 id="vimspector-config">Vimspector Config</h1> <p>Create a file called <code>.vimspector.json</code> in the project root and then place the following content</p> <p>Vimspector debugger configuration:</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl"> <span class="nt">&#34;configurations&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="nt">&#34;Camel Debug Adapter - Attach&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&#34;adapter&#34;</span><span class="p">:</span> <span class="s2">&#34;cust_camel-debug-adapter&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">     <span class="nt">&#34;configuration&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;request&#34;</span><span class="p">:</span> <span class="s2">&#34;attach&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;sourcePaths&#34;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&#34;${workspaceRoot}/src/main/java&#34;</span> <span class="p">],</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;hostName&#34;</span><span class="p">:</span> <span class="s2">&#34;localhost&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;port&#34;</span><span class="p">:</span> <span class="s2">&#34;${JVMDebugPort}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">       <span class="nt">&#34;stepFilters&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">         <span class="nt">&#34;skipClasses&#34;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&#34;$$JDK&#34;</span> <span class="p">]</span>
</span></span><span class="line"><span class="cl">       <span class="p">}</span>
</span></span><span class="line"><span class="cl">     <span class="p">}</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span><span class="line"><span class="cl"> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h1 id="how-to-attach-camel-application-to-vimspector-for-debugging">How to attach Camel application to vimspector for debugging</h1> <ul> <li>To test the Camel application debugging need a working example. Lot of good examples are provided in this repo, <a href="https://github.com/apache/camel-examples" rel="noopener nofollow noreferrer">camel-examples</a>.</li> <li>To enable Camel Textual Route debugging, now we can use directly <code>mvn camel:debug</code>.</li> </ul> <h2 id="make-the-following-changes-and-run-your-camel-application-in-window-1">Make the following changes and run your camel application in window-1</h2> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">  <span class="nb">cd</span> ~/camel-examples/examples/main
</span></span></code></pre></div><ul> <li>vim src/main/java/org/apache/camel/example/MyBean.java</li> <li>Add the following content inside <code>MyBean.java</code> file:</li> </ul> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.apache.camel.example</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyBean</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">hi</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">MyBean</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">hi</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">hi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hi</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">hello</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">hi</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34; Begin ? &#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">bye</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">hi</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34; End ? &#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><ul> <li>vim src/main/java/org/apache/camel/example/MyRouteBuilder.java</li> <li>Inside <code>MyRouteBuilder.java</code> file:</li> </ul> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">org.apache.camel.example</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.camel.builder.RouteBuilder</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyRouteBuilder</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">RouteBuilder</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">from</span><span class="p">(</span><span class="s">&#34;timer:foo&#34;</span><span class="p">).</span><span class="na">routeId</span><span class="p">(</span><span class="s">&#34;foo&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">bean</span><span class="p">(</span><span class="s">&#34;myBean&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;hello&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">&#34;${body}&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">bean</span><span class="p">(</span><span class="s">&#34;myBean&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;bye&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="na">log</span><span class="p">(</span><span class="s">&#34;${body}&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><ul> <li>Compile the source to reflect the new changes</li> </ul> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">mvn compile
</span></span></code></pre></div><ul> <li>Launch this example in Camel debug mode:</li> </ul> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"> mvn camel:debug
</span></span></code></pre></div><h2 id="attach-this-camel-example-to-vimspector-for-camel-textual-route-debugging-in-window-2">Attach this camel example to Vimspector for Camel Textual Route Debugging in window-2</h2> <ul> <li>Open this file in vim <code>src/main/java/org/apache/camel/example/MyRouteBuilder.java</code> and then use the following keys to set the breakpoints.</li> <li>Start the Camel debugger by again using the following keys.</li> <li>Enter <code>1099</code> as port number when it is prompted for user input in vimspector.</li> <li>Now you should be able to debug your camel application and again use the following key mappings to instruct the debugger.</li> </ul> <h1 id="debug-it">Debug It</h1> <p>Now everything is in place. Open the main MyRouteBuilder file and start debugging by <code>Esc + \</code>:</p> <table> <thead> <tr> <th>Key</th> <th>Function</th> </tr> </thead> <tbody> <tr> <td><code>dd</code></td> <td>To start the camel debugger</td> </tr> <tr> <td><code>dt</code></td> <td>To set the breakpoints</td> </tr> <tr> <td><code>dc</code></td> <td>To go to the next breakpoint</td> </tr> <tr> <td><code>ctrl+ww</code></td> <td>To move around the vimspector</td> </tr> <tr> <td><code>:VimspectortToggleLog</code> to see the vimspector logs.</td> <td></td> </tr> <tr> <td><code>cat $HOME/.vimspector.log</code> same logs can also be seen here</td> <td></td> </tr> </tbody> </table> <h1 id="mappings">Mappings</h1> <p>The goal is to provide keymapping to use controllers of the debugger more easily. To know more about these mappings please follow this doc - <a href="https://github.com/puremourning/vimspector/blob/master/README.md#human-mode" rel="noopener nofollow noreferrer">https://github.com/puremourning/vimspector/blob/master/README.md#human-mode</a></p> <p>Try the following mappings, by adding the following before loading vimspector:</p> <div class="highlight"><pre tabindex="0" class="chroma"><code class="language-viml" data-lang="viml"><span class="line"><span class="cl"><span class="k">let</span> <span class="nx">g</span>:<span class="nx">vimspector_enable_mappings</span> <span class="p">=</span> <span class="s1">&#39;HUMAN&#39;</span>
</span></span></code></pre></div><table> <thead> <tr> <th>Key</th> <th>Mapping</th> <th>Function</th> </tr> </thead> <tbody> <tr> <td><code>F5</code></td> <td><code>&lt;Plug&gt;VimspectorContinue</code></td> <td>When debugging, continue. Otherwise start debugging.</td> </tr> <tr> <td><code>F3</code></td> <td><code>&lt;Plug&gt;VimspectorStop</code></td> <td>Stop debugging.</td> </tr> <tr> <td><code>F4</code></td> <td><code>&lt;Plug&gt;VimspectorRestart</code></td> <td>Restart debugging with the same configuration.</td> </tr> <tr> <td><code>F6</code></td> <td><code>&lt;Plug&gt;VimspectorPause</code></td> <td>Pause debuggee.</td> </tr> <tr> <td><code>F9</code></td> <td><code>&lt;Plug&gt;VimspectorToggleBreakpoint</code></td> <td>Toggle line breakpoint on the current line.</td> </tr> <tr> <td><code>&lt;leader&gt;F9</code></td> <td><code>&lt;Plug&gt;VimspectorToggleConditionalBreakpoint</code></td> <td>Toggle conditional line breakpoint or logpoint on the current line.</td> </tr> <tr> <td><code>F8</code></td> <td><code>&lt;Plug&gt;VimspectorAddFunctionBreakpoint</code></td> <td>Add a function breakpoint for the expression under cursor</td> </tr> <tr> <td><code>&lt;leader&gt;F8</code></td> <td><code>&lt;Plug&gt;VimspectorRunToCursor</code></td> <td>Run to Cursor</td> </tr> </tbody> </table> <div class="related"> <h3 id="related"><a class="anchor" href="#related"></a>Related posts</h3> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2022/08/sublime-editor/"><h1>LSP-camel extension for camells integration with sublime text to enable Apache Camel Language Server</h1></a> <time itemprop="published" datetime="2022-08-16" title="Tuesday, August 16, 2022">August 16, 2022</time>, by <span rel="author">Navya</span> </header> <p>Two weeks before it became easier to provide language support inside coc.nvim -See this blog post. It is now the case for sublime, thanks to camells. It is an extension for camells to enable Apache Camel language server support. Camel Language Server Support Demo For instance, code completion for XML with Camel DSL. The capabilities are based on the Camel Language Server. For instance, code completion for JAVA with Camel DSL.</p> <p><a class="continue" href="../../../../blog/2022/08/sublime-editor/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Tooling/">TOOLING</a> </p> </article> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2022/07/coc-nvim-camel-lsp/"><h1>An extension for coc.nvim to enable Apache Camel Language Server</h1></a> <time itemprop="published" datetime="2022-07-15" title="Friday, July 15, 2022">July 15, 2022</time>, by <span rel="author">Navya</span> </header> <p>Two weeks before it became easier to provide language support inside emacs -See this blog post. It is now the case for vim, thanks to coc.camel. It is an extension for coc.nvim to enable Apache Camel language server support. Camel Language Server Support Demo For instance, code completion for XML with Camel DSL. The capabilities are based on the Camel Language Server. For instance, code completion for JAVA with Camel DSL.</p> <p><a class="continue" href="../../../../blog/2022/07/coc-nvim-camel-lsp/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Tooling/">TOOLING</a> </p> </article> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2022/06/emacs/"><h1>Client implementation of the Apache Camel Language Server Protocol for Emacs</h1></a> <time itemprop="published" datetime="2022-06-09" title="Thursday, June 9, 2022">June 9, 2022</time>, by <span rel="author">Navya</span> </header> <p>Text Editing capabilities of Camel URI with Camel XML DSL The capabilities are based on the Camel Language Server. For instance, code completion of Camel URI with Camel XML Dsl: Diagnostic of Camel URI attribute value with Camel XML Dsl: Diagnostic of Camel URI attribute name with Camel XML Dsl: How to configure Emacs? For the convenience to have all the Emacs configuration in one directory, should use ~/.emacs.d/init.el In a ~/.</p> <p><a class="continue" href="../../../../blog/2022/06/emacs/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Tooling/">TOOLING</a> </p> </article> </div> </div> </div> </article> </main> </div> <div class="footer-tools"> <a title="Improve this document, receive free virtual hugs &hearts;" href="https://github.com/apache/camel-website/edit/main/content/blog/2022/09/vimdap/index.md">Edit this Page</a> <a href="#top" title="Reach the top of the page">Back to top</a> </div> <footer> <div class="footer"> <figure class="logo"> <img class="logo" src="../../../../_/img/logo-d-a567cee6fa.svg" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <input id="footer-toggle-overview" type="checkbox" title="Show/Hide Overview section"> <dl> <dt><label for="footer-toggle-overview">Overview</label><label for="footer-toggle-overview">&#65291;</label></dt> <dd><a href="../../../../blog/">Blog</a></dd> <dd><a href="../../../../docs/">Documentation</a></dd> <dd><a href="../../../../community/support/">Community</a></dd> <dd><a href="../../../../download/">Download</a></dd> </dl> <input id="footer-toggle-documentation" type="checkbox" title="Show/Hide Documentation section"> <dl> <dt><label for="footer-toggle-documentation">Documentation</label><label for="footer-toggle-documentation">&#65291;</label></dt> <dd><a href="../../../../manual/">User Manual</a></dd> <dd><a href="../../../../components/next/index.html">Components</a></dd> <dd><a href="../../../../camel-k/next/">Camel-K</a></dd> <dd><a href="../../../../camel-kafka-connector/next/">Camel Kafka Connector</a></dd> <dd><a href="../../../../camel-quarkus/next/">Camel Quarkus</a></dd> <dd><a href="../../../../camel-spring-boot/next/">Camel Spring Boot</a></dd> <dd><a href="../../../../camel-karaf/3.22.x/">Camel Karaf</a></dd> <dd><a href="../../../../manual/faq/index.html">FAQ</a></dd> </dl> <input id="footer-toggle-community" type="checkbox" title="Show/Hide Community section"> <dl> <dt><label for="footer-toggle-community">Community</label><label for="footer-toggle-community">&#65291;</label></dt> <dd><a href="../../../../community/support/">Support</a></dd> <dd><a href="../../../../community/contributing/">Contributing</a></dd> <dd><a href="../../../../community/mailing-list">Mailing Lists</a></dd> <dd><a href="../../../../community/user-stories/">User stories</a></dd> <dd><a href="../../../../community/articles/">Articles</a></dd> <dd><a href="../../../../community/books/">Books</a></dd> <dd><a href="../../../../community/team/">Team</a></dd> </dl> <input id="footer-toggle-about" type="checkbox" title="Show/Hide Acknowledgements section"> <dl> <dt><label for="footer-toggle-about">About</label><label for="footer-toggle-about">&#65291;</label></dt> <dd><a href="../../../../acknowledgments/">Acknowledgments</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p class="remark"> &copy; 2004-2024 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> <div class="resources"> <div class="context"> <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a> </div> <div class="context"> <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/policies/conduct">Code of Conduct</a> </div> <div class="context"> <a href="../../../../sitemap/">Sitemap</a> </div> </div> <div class="footer-icons"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> </div> </footer> <script src="../../../../_/js/vendor/algoliasearch-bad45193e2.js"></script> <script src="../../../../_/js/site-c215fb6972.js"></script> <script async src="../../../../_/js/vendor/highlight-621a10fe1b.js"></script> <script async src="../../../../_/js/vendor/svg4everybody-a0c573f2b9.js"></script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Organization", "name": "Apache Camel", "url": "https:\/\/camel.apache.org\/" , "sameAs": ["https://twitter.com/ApacheCamel"] , "logo": "https:\/\/camel.apache.org\/_\/img\/logo-d.svg" , "description": "Apache Camel â„¢ is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL." } </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "BreadcrumbList", "itemListElement": [{ "@type": "ListItem", "position": 1 , "item": { "@id": "https://camel.apache.org/", "name": "Apache Camel" } },{ "@type": "ListItem", "position": 2 , "item": { "@id": "https://camel.apache.org/blog/", "name": "blog" } },{ "@type": "ListItem", "position": 3 , "item": { "@id": "https://camel.apache.org/blog/2022/", "name": "2022" } },{ "@type": "ListItem", "position": 4 , "item": { "@id": "https://camel.apache.org/blog/2022/09/", "name": "09" } },{ "@type": "ListItem", "position": 5 , "item": { "@id": "https://camel.apache.org/blog/2022/09/vimdap/", "name": "vimdap" } }] } </script> </body> </html> 