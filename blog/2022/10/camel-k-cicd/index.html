<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../../../favicon-128.png" sizes="128x128"> <meta name="application-name" content="Apache Camel"> <meta property="og:title" content="Camel K CICD"> <meta property="og:site_name" content="Apache Camel"> <meta property="og:url" content="https://camel.apache.org/blog/2022/10/camel-k-cicd/"> <meta name="og:description" content="Continuous Integration, Continuous Delivery and Continuous Deployment in Camel K"> <meta property="og:type" content="website"> <meta property="og:image" content="https://camel.apache.org/blog/2022/10/camel-k-cicd/featured.png"> <link rel="manifest" href="../../../../site.webmanifest"> <title>Camel K CICD - Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/blog/2022/10/camel-k-cicd/"> <link rel="stylesheet" href="../../../../_/css/site-b287b96c63.css"> </head> <body class="article"> <header class="header" aria-label="Header"> <nav class="navbar" aria-label="Main menu"> <div class="navbar-brand"> <a class="nav-logo" href="../../../../" title="Apache Camel"></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../blog/"> <img alt="Blog" src="../../../../_/img/blog-4c7fa4cb60.svg"> Blog </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../docs/"> <img alt="Documentation" src="../../../../_/img/documentation-abb1b7f8b1.svg"> Documentation </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../community/"> <img alt="Community" src="../../../../_/img/community-2ec8a3dc8b.svg"> Community </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../download/"> <img alt="Download" src="../../../../_/img/download-63cdd75074.svg"> Download </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../security/"> <img alt="Security" src="../../../../_/img/security-06abe157b3.svg"> Security </a> </div> </div> <div class="navbar-fill"></div> <div class="break-row"></div> <div class="navbar-search results-hidden"> <input id="search" class="search" placeholder="Search" autocomplete="off"> <img src="/_/img/cancel-1ed239489b.svg" alt="Clear" id="search-cancel"> <div id="search_results"></div> </div> <div class="navbar-tools"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button" aria-label="Menu"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <a id="top"></a> <div class="body"> <main role="main blog"> <article class="blog doc"> <header aria-labelledby="title"> <a class="category" href="../../../../categories/Howtos/">HOWTOS</a><a class="category" href="../../../../categories/Camel-K/">CAMEL K</a><a class="category" href="../../../../categories/Devops/">DEVOPS</a> <h1 id="title">Camel K CICD</h1> </header> <div class="post"> <aside aria-label="Post details"> <div class="summary">Continuous Integration, Continuous Delivery and Continuous Deployment in Camel K</div> Posted on <time itemprop="published" datetime="2022-10-06" title="Thursday, October 6, 2022">October 6, 2022</time>, by <figure> <img src="https://avatars.githubusercontent.com/u/23169723?v=4" alt="Pasquale Congiusti"> <figcaption rel="author">Pasquale Congiusti</figcaption> </figure> <h4>Share this blog</h4> <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fcamel.apache.org%2fblog%2f2022%2f10%2fcamel-k-cicd%2f" target="_blank" rel="noopener" aria-label="Share on Facebook"> <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg> </div> </div> </a> <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=Camel%20K%20CICD&url=https%3a%2f%2fcamel.apache.org%2fblog%2f2022%2f10%2fcamel-k-cicd%2f&hashtags=ApacheCamel" target="_blank" rel="noopener" aria-label="Share on Twitter"> <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg> </div> </div> </a> <a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fcamel.apache.org%2fblog%2f2022%2f10%2fcamel-k-cicd%2f&title=Camel%20K%20CICD&summary=Continuous%20Integration%2c%20Continuous%20Delivery%20and%20Continuous%20Deployment%20in%20Camel%20K&source=https%3A%2F%2Fcamel.apache.org" target="_blank" rel="noopener" aria-label="Share on LinkedIn" title="Share on LinkedIn"> <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg> </div> </div> </a> <p> <a class="arrow prev" href="../../../../blog/2022/10/RELEASE-3.19.0/" title="Previous post: RELEASE 3.19.0">&#10094;</a> <a class="arrow next" href="../../../../blog/2022/10/Emacsdap/" title="Next post: Camel Textual Route debugging in Emacs">&#10095;</a> </p> </aside> <div class="post-content"> <img class="featured" alt="Blog post featured image" src="../../../../blog/2022/10/camel-k-cicd/featured_hu3a489a9de14187e7ae8b057665bba314_83347_800x0_resize_q95_gaussian_3.png" width="800" height="453"> <p>In <a href="../../../../blog/2022/09/camel-k-release-1-10/">Camel K version 10</a>, we&rsquo;ve released the CLI `promote feature that provides Camel K an opinionated way of promoting an Integration through the stages of software development. This feature unlock the possibility to combine Camel K with external tooling and let the user develop according to any automated release process. We always ear about CI/CD (Continuous Integration/Continuous Delivery and/or Deployment), and in this blog we&rsquo;re going to see how to make it for any Camel K integration.</p> <p>The application I&rsquo;m building is a REST API backed by a PostgreSQL database. It will be realized with Camel K Integration via YAML DSL. The source code is stored in Github and the idea is to build a <strong>Continuous Delivery</strong> pipeline that can be manually triggered when we want to provide a release. The pipeline will:</p> <ol> <li>checkout the code repository with the latest changes,</li> <li>release the Integration in a development environment,</li> <li>run a complete suite of automated test,</li> <li>promote to production environment and</li> <li>run some smoke test on the production endpoints as last check stage.</li> </ol> <p>It should sound quite a familiar development process. We may just need to implement the first 3 tasks as a basic <strong>Continuous Integration</strong>, but, given the presence of <code>kamel promote</code> we can easily extend it to a CD pipeline. But that&rsquo;s not all. As an additional feature we&rsquo;re finally reusing the CD to enable a <strong>Continuous Deployment</strong> process triggering the pipeline when any change is pushed to the repo. Your journey from code to production has never been that fast!!</p> <p>As a supporting pipeline application, I&rsquo;ve chosen to use Tekton because it gives us the flexibility needed to run all the tasks required. However, you may adapt this example to any other pipeline application out there, the concepts are very generic.</p> <h1 id="tekton-installation">Tekton installation</h1> <p>Let&rsquo;s start installing Tekton. You can install Tekton pipelines operator following the <a href="https://tekton.dev/docs/pipelines/install/#installing-tekton-pipelines-on-kubernetes" rel="noopener nofollow noreferrer">Tekton official installation guide</a>.</p> <h1 id="camel-k-operator-installation">Camel K operator installation</h1> <p>We need now to prepare the Kubernetes namespaces that we&rsquo;re using to separate <strong>development</strong> and <strong>production</strong> environment.</p> <pre tabindex="0"><code>kubectl create namespace development
kubectl create namespace production
kamel install -n development
kamel install -n production -x camel-k-prod
</code></pre><p>NOTE: make sure development and production operators share the same container registry as required by <code>kamel promote</code>.</p> <h1 id="application-development">Application development</h1> <p>You can find the source code in this <a href="https://github.com/squakez/camel-k-rest-cicd" rel="noopener nofollow noreferrer">Camel K REST example github repository</a>.</p> <h2 id="camel-k-integration">Camel K Integration</h2> <p>We&rsquo;re programming through YAML DSL, but here you can put any Camel DSL you prefer:</p> <pre tabindex="0"><code># camel-k: dependency=mvn:io.quarkus:quarkus-jdbc-postgresql
# camel-k: build-property=quarkus.datasource.camel.db-kind=postgresql
# camel-k: config=secret:my-datasource
# camel-k: trait=service.node-port=true

- rest:
    get:
      - to: &#34;direct:get&#34;
        path: &#34;/customers/{name}&#34;
      - to: &#34;direct:getall&#34;
        path: &#34;/customers/&#34;
    post:
      - to: &#34;direct:post&#34;
        path: &#34;/customers/&#34;
    delete:
      - to: &#34;direct:delete&#34;
        path: &#34;/customers/{name}&#34;
- from:
    uri: &#34;direct:getall&#34;
    steps:
      - set-body:
          simple: &#34;select * from customers&#34;
      - to: log:info
      - to: jdbc:camel
      - set-body:
          simple: &#34;${bodyAs(String)}&#34;
- from:
    uri: &#34;direct:get&#34;
    steps:
      - set-body:
          simple: &#34;select * from customers where name=&#39;${header.name}&#39;&#34;
      - to: log:info
      - to: jdbc:camel
      - set-body:
          simple: &#34;${bodyAs(String)}&#34;
- from:
    uri: &#34;direct:post&#34;
    steps:
      - unmarshal:
          json:
            library: Jackson
      - to: log:info
      - set-body:
          simple: &#34;insert into customers (name, city) values (&#39;${body[name]}&#39;, &#39;${body[city]}&#39;)&#34;
      - to: jdbc:camel

- from:
    uri: &#34;direct:delete&#34;
    steps:
      - set-body:
          simple: &#34;delete from customers where name = &#39;${header.name}&#39;&#34;
      - to: log:info
      - to: jdbc:camel
</code></pre><h2 id="database-preparation">Database preparation</h2> <p>As you may have noticed, the Integration above requires a Postgres database. In the repo, I&rsquo;ve provided a very basic configuration for a development and a production environment.</p> <pre tabindex="0"><code>kubectl apply -f db/conf-dev.yaml -n development
kubectl create secret generic my-datasource --from-file db/datasource-dev.properties -n development

kubectl apply -f db/conf-prod.yaml -n production
kubectl create secret generic my-datasource --from-file db/datasource-prod.properties -n production
</code></pre><p>In this example, I&rsquo;ve chosen to deploy the two separated databases in the same namespaces of the applications. You may follow any other topology required by your organization.</p> <p>NOTE: the database settings are not meant to be used in any production environment without applying proper security policies. The Pod running is ephemeral, so, anything stored there will be lost when restarting.</p> <h3 id="initialize-db">Initialize DB</h3> <p>Before starting any activity, we need to create a table as required by our application:</p> <pre tabindex="0"><code>kubectl exec -it postgres-dev-xxxxxxxx-yyyyy -n development -- psql -U postgresadmin --password postgresdb -c &#39;CREATE TABLE customers (name TEXT PRIMARY KEY, city TEXT)&#39;

kubectl exec -it postgres-prod-xxxxxxxx-yyyyy -n production -- psql -U postgresadmin --password postgresdb -c &#39;CREATE TABLE customers (name TEXT PRIMARY KEY, city TEXT)&#39;
</code></pre><p>We have our baseline installed. You can even run manually the Integration and it should work correctly. But we don&rsquo;t like manual stuff, do we? Checking endpoint in a browser and visually confirm all is good, then promoting the Integration and running another round of verification. We prefer having an automated pipeline and dedicate all our time to code new features instead!</p> <h1 id="continuous-integration-and-continuous-delivery-pipeline">Continuous Integration and Continuous Delivery pipeline</h1> <p>As I mentioned at the beginning, our pipeline will take care to automatically checkout the code from the repository and run a series of tasks to run and verify that all is working as expected. This is quite straightforward translated into code:</p> <pre tabindex="0"><code>apiVersion: tekton.dev/v1beta1
kind: Pipeline
metadata:
  name: pipeline-cicd
spec:
  description: |
    CICD pipeline for a microservice
  params:
  - name: repo-url
    type: string
    description: The git repo URL to clone from.
  - name: repo-branch
    type: string
    description: The git repo branch.
  workspaces:
  - name: shared-data
    description: |
      This workspace contains the cloned repo files, so they can be read by the
      next task.
  tasks:
  # 1. checkout the code repository with the latest changes,
  - name: fetch-source
    taskRef:
      name: git-clone
    workspaces:
    - name: output
      workspace: shared-data
    params:
    - name: url
      value: $(params.repo-url)
    - name: revision
      value: $(params.repo-branch)
  # 2. release the Integration in a development environment,
  - name: kamel-run
    runAfter: [&#34;fetch-source&#34;]
    taskRef:
      name: kamel-run
    workspaces:
    - name: source
      workspace: shared-data
    params:
      - name: filename
        value: my-rest.yaml
      - name: namespace
        value: development
  # 3. run a complete suite of automated test,
  - name: e2e-test
    runAfter: [&#34;kamel-run&#34;]
    taskRef:
      name: execute-test
    workspaces:
    - name: source
      workspace: shared-data
    params:
      - name: script
        value: test/e2e-test.sh
      - name: hostname
        value: $(tasks.kamel-run.results.integration-name).development
  # 4. promote to production environment and
  - name: kamel-promote
    runAfter: [&#34;e2e-test&#34;]
    taskRef:
      name: kamel-promote
    workspaces:
    - name: source
      workspace: shared-data
    params:
      - name: integration-name
        value: $(tasks.kamel-run.results.integration-name)
      - name: namespace
        value: development
      - name: to
        value: production
  # 5. run some smoke test on the production endpoints as last check stage.
  - name: smoke-test
    runAfter: [&#34;kamel-promote&#34;]
    taskRef:
      name: execute-test
    workspaces:
    - name: source
      workspace: shared-data
    params:
      - name: script
        value: test/smoke-test.sh
      - name: hostname
        value: $(tasks.kamel-run.results.integration-name).production
</code></pre><p>The <code>Pipeline</code> expect from us to provide just a <code>repo-url</code> and a <code>repo-branch</code>. The repo will contain the Integration source code but to also the suite of test, so that everything is self-contained and &ldquo;consumable&rdquo; from the same pipeline. Also CI configuration is there (someone would call this <strong>devops</strong>&hellip;). We use a <code>workspace</code> that is a way provided by Tekton to share resources among the different tasks (which will run as a separate <code>Pod</code>).</p> <p>As you can see, we have configured several <code>Tasks</code> and we can see them in details.</p> <p>The <code>git-clone</code> task is taken from <a href="https://hub.tekton.dev/tekton/task/git-clone" rel="noopener nofollow noreferrer">Tekton hub</a> and it is in charge to checkout the code. You can see the detailed configuration in the documentation page.</p> <p>The <code>kamel-run</code> task is in charge to run an Integration in a given namespace. It accepts a source filename (the Integration code) and the namespace where to run the Integration. The output is the name of the integration (we will need it both for testing and for following promotion):</p> <pre tabindex="0"><code>apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: kamel-run
  description: Run an integration with Kamel CLI
spec:
  params:
    - name: filename
      description: the integration source we want to run
    - name: namespace
      description: the namespace where to run the integration
  results:
    - name: integration-name
      description: The name of the integration
  workspaces:
  - name: source
  steps:
  - name: run
    # The container provides the kamel binary we need
    image: docker.io/apache/camel-k:1.10.0
    script: |
      cd $(workspaces.source.path)
      # Run the integration and let&#39;s use the output to scrape the integration name
      # We need to use the --wait option in order to wait until the Integration is running
      kamel_output=$(kamel run $(params.filename) -n $(params.namespace) --wait)
      echo $kamel_output | grep -oP &#39;Integration &#34;.*?&#34; (updated|created)&#39; | awk -F &#39; &#39; &#39;{print $2}&#39; | sed &#34;s/\&#34;//g&#34; | tr -d &#39;\n&#39; | tee $(results.integration-name.path)
</code></pre><p>Interesting to note that for this task we&rsquo;re using <code>image: docker.io/apache/camel-k:1.10.0</code> that have the <code>kamel</code> CLI configured (and that&rsquo;s exactly what we need for this task).</p> <p>Then we can identify a generic <code>execute-test</code> task that we&rsquo;re reusing both for end to end test and smoke test (phases 3 and 5). This is in charge to run any arbitrary script and in our case they are <code>curl</code> commands that are testing the API endpoints. You can see that they expect a script file and an hostname (which represents the Integration service host to test):</p> <pre tabindex="0"><code>apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: execute-test
  description: Execute some smoke test
spec:
  params:
    - name: script
      description: the script to execute
    - name: hostname
      description: the hostname we want to test
  workspaces:
  - name: source
  steps:
  - name: test
    # use any image containing the tooling required by your test
    image: alpine/curl
    script: |
      cd $(workspaces.source.path)
      $(params.script) $(params.hostname)
</code></pre><p>The test in our case is simple (ie, we are using <code>alpine/curl</code>), but you can have here as much as complexity as your suite of test requires:</p> <pre tabindex="0"><code># Create a user
curl --header &#34;Content-Type: application/json&#34; \
  --request POST \
  --data &#39;{&#34;name&#34;:&#34;my-name&#34;,&#34;city&#34;:&#34;my-city&#34;}&#39; \
  http://$1/customers/
# Read the user
HTTP_GET=$(curl -o /dev/null -s -w &#34;%{http_code}\n&#34; http://$1/customers/my-name)
if [[ &#34;$HTTP_GET&#34; != &#34;200&#34; ]]; then
    echo &#34;ERROR: expected a 200 HTTP code&#34;
    exit 1
fi
# Delete the user
HTTP_DELETE=$(curl -o /dev/null -s -w &#34;%{http_code}\n&#34; --request DELETE http://$1/customers/my-name)
if [[ &#34;$HTTP_DELETE&#34; != &#34;200&#34; ]]; then
    echo &#34;ERROR: expected a 200 HTTP code&#34;
    exit 2
fi
</code></pre><p>So far, we may stop if we&rsquo;re just interested in a CI pipeline. But you can see that with a bit of automation, we can get the benefit of a full CD solution. The last <code>Task</code> we can develope is the <code>kamel-promote</code> that is very similar to the <code>kamel-run</code>, but takes care to perform the environment promotion:</p> <pre tabindex="0"><code>apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: kamel-promote
  description: promote an Integration to an higher environment
spec:
  params:
    - name: integration-name
      description: the integration we want to promote
    - name: namespace
      description: the namespace source
    - name: to
      description: the namespace destination
  workspaces:
  - name: source
  steps:
  - name: promote
    image: docker.io/apache/camel-k:1.10.0
    script: |
      kamel promote $(params.integration-name) -n $(params.namespace) --to $(params.to)
</code></pre><p>Finally we need to configure a <code>PipelineRun</code> which is in charge to run the pipeline (in this case it will be manually triggered):</p> <pre tabindex="0"><code>apiVersion: tekton.dev/v1beta1
kind: PipelineRun
metadata:
  name: pipeline-cicd-run
spec:
  pipelineRef:
    name: pipeline-cicd
  taskRunSpecs:
    - pipelineTaskName: kamel-run
      taskServiceAccountName: camel-k-pipeline-sa
    - pipelineTaskName: kamel-promote
      taskServiceAccountName: camel-k-pipeline-sa
  podTemplate:
    securityContext:
      fsGroup: 65532
  workspaces:
  - name: shared-data
    volumeClaimTemplate:
      spec:
        accessModes:
        - ReadWriteOnce
        resources:
          requests:
            storage: 1Gi
  - name: git-credentials
    secret:
      secretName: git-credentials
  params:
  - name: repo-url
    value: https://github.com/squakez/camel-k-rest-cicd.git
  - name: repo-branch
    value: main
</code></pre><p>You can see that we provide here the repository information plus some <code>Service Account</code> configuration required for the <code>kamel-run</code> and <code>kamel-promote</code> tasks.</p> <h2 id="install-the-pipeline">Install the pipeline</h2> <p>Before running the pipeline we need to create a service account in the development namespace in order to be able to work both on <code>development</code> and <code>production</code>:</p> <pre tabindex="0"><code>kubectl apply -f ci/sa.yaml -n development
kubectl apply -f ci/rolebinding.yaml -n development
</code></pre><p>We also need to install the <a href="https://hub.tekton.dev/tekton/task/git-clone" rel="noopener nofollow noreferrer"><code>git-clone</code> task from Tekton hub</a> in <code>development</code> namespace:</p> <pre tabindex="0"><code>kubectl apply -f https://raw.githubusercontent.com/tektoncd/catalog/main/task/git-clone/0.8/git-clone.yaml -n development
</code></pre><p>We can now install the pipeline (we have merged also the <code>Tasks</code> within it):</p> <pre tabindex="0"><code>kubectl apply -f ci/pipeline.yaml -n development
</code></pre><h3 id="run-the-pipeline">Run the pipeline</h3> <p>The pipeline is installed and ready to go. It only miss someone to pull the trigger. Let&rsquo;s dare:</p> <pre tabindex="0"><code>kubectl apply -f ci/pipeline-run.yaml -n development
</code></pre><p>We should be able to monitor it by running:</p> <pre tabindex="0"><code>kubectl get pipelinerun pipeline-cicd-run -w -n development
</code></pre><p>If there is any error, the process will stop and we can check pipeline more in details via:</p> <pre tabindex="0"><code>kubectl get pipelinerun pipeline-cicd-run -o yaml -n development
</code></pre><p>If all is good, we&rsquo;ll have an Integration running in <code>development</code> namespace (the <code>promote</code> does not care to stop it) and one running in <code>production</code> namespace (possibly the one exposed to the world).</p> <h1 id="continuous-deployment">Continuous Deployment</h1> <p>We have everything we need now to continue with the latest step of automation that will be triggering our process as soon as we have our code pushed to the repo. This last <code>Trigger</code> will transform our pipeline in a <strong>Continuous Deployment</strong> pipeline. The solution proposed is based on the blog posted originally at <a href="https://www.arthurkoziel.com/tutorial-tekton-triggers-with-github-integration/" rel="noopener nofollow noreferrer">https://www.arthurkoziel.com/tutorial-tekton-triggers-with-github-integration/</a></p> <p>The idea is to expose a webhook that will take care to trigger the pipeline. We can configure Github (or Gitlab or any other Git repository type) to call that webhook on each push to the repo (or Pull Request, or any action you need according to your development process).</p> <p>Once a user <code>push</code> some code to the repo, then, our <code>Pipeline</code> will start, resulting in the source code released in production right away.</p> <h2 id="pipeline-code">Pipeline code</h2> <p>The repository we&rsquo;re using as example, has a <code>feat/cd</code> branch where you can find all the code required. In the <code>cd</code> directory you can find all you need to run the example.</p> <h3 id="install-triggers">Install triggers</h3> <p>We first need to <a href="https://tekton.dev/docs/triggers/install/" rel="noopener nofollow noreferrer">install the Tekton <code>Triggers</code></a> as described in the official documentation. Once this is done, we&rsquo;ll need some configuration for a <code>Service Account</code>. You can find the configuration required in the <code>cd</code> folder of our example project:</p> <pre tabindex="0"><code>kubectl apply -f cd/cd-triggers-sa.yaml -n development
</code></pre><h3 id="listen-for-a-push">Listen for a push</h3> <p>Now we can have provide all the required configuration to let our cluster wait for a git push event. We start defining an <code>EventListener</code>:</p> <pre tabindex="0"><code>apiVersion: triggers.tekton.dev/v1alpha1
kind: EventListener
metadata:
  name: github-push
spec:
  serviceAccountName: tekton-triggers-cd
  triggers:
    - name: github-listener
      interceptors:
        - ref:
            name: &#34;github&#34;
          params:
            # You may want to include a secure interceptor
            - name: &#34;eventTypes&#34;
              value: [&#34;push&#34;]
      template:
        ref: github-push-pipeline-template
</code></pre><p>This one will be in charge to filter the call received by the webhook. You can see that there is already defined an <code>interceptor</code> whose goal is to filter the events we accept. For the sake of simplicity, I&rsquo;ve just provided an example interceptor to filter only the <code>push</code> events. In a real environment you probably want to secure the incoming requests with some authorization token. The <code>github</code> interceptor will allow you to provide any kind of security.</p> <p>The other thing we have provided is a <code>template</code> referenced to <code>github-push-pipeline-template</code>, that is the trigger we want to pull when a <code>push</code> event is received. Let&rsquo;s look how this <code>TriggerTemplate</code> is declared:</p> <pre tabindex="0"><code>apiVersion: triggers.tekton.dev/v1alpha1
kind: TriggerTemplate
metadata:
  name: github-push-pipeline-template
spec:
  resourcetemplates:
    - apiVersion: tekton.dev/v1beta1
      kind: PipelineRun
      metadata:
        generateName: github-push-pipeline-run-
      spec:
        pipelineRef:
          name: pipeline-cicd
        taskRunSpecs:
          - pipelineTaskName: kamel-run
            taskServiceAccountName: camel-k-pipeline-sa
          - pipelineTaskName: kamel-promote
            taskServiceAccountName: camel-k-pipeline-sa
        podTemplate:
          securityContext:
            fsGroup: 65532
        workspaces:
        - name: shared-data
          volumeClaimTemplate:
            spec:
              accessModes:
              - ReadWriteOnce
              resources:
                requests:
                  storage: 1Gi
        params:
        - name: repo-url
          value: https://github.com/squakez/camel-k-rest-cicd.git
        - name: repo-branch
          value: feat/cd
</code></pre><p>It should sound very familiar as it is a template based on the <code>Trigger</code> we&rsquo;ve developed previously. It takes care to call the same <code>Pipeline</code> but this time will generate a new name every time (required because we don&rsquo;t call the <code>PipelineRun</code> explicitly) and it will work over the <code>feat/cd</code> branch.</p> <p>Both yaml are merged into a single configuration:</p> <pre tabindex="0"><code>kubectl apply -f cd/cd-triggers.yaml -n development
</code></pre><p>Now everyting is ready but the last step required is to create an <code>Ingress</code> webhook and bind to the <code>EventListener</code> so that, everytime the webhook is called, a <code>Pipeline</code> is started.</p> <pre tabindex="0"><code>apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: my-cd-pipeline
  annotations:
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/ssl-redirect: &#34;false&#34;
spec:
  rules:
    - http:
        paths:
          - path: /my-cd-pipeline
            pathType: Exact
            backend:
              service:
                # Will forward events to an EventListener called github-push
                name: el-github-push
                port:
                  number: 8080
</code></pre><p>It&rsquo;s important to notice how we &ldquo;linked&rdquo; the <code>Ingress</code> to a <code>Service</code> named <code>el-github-push</code>. This service is created by the <code>EventListener</code> by prepending <code>el-</code> to the listener name.</p> <p>NOTE: you may want to enable the addon on minikube via <code>minikube addons enable ingress</code></p> <pre tabindex="0"><code>kubectl apply -f wh-ingress.yaml -n development
</code></pre><p>We&rsquo;re ready to see what is the host we need to call to trigger the <code>Pipeline</code>:</p> <pre tabindex="0"><code>kubectl get ingress -n development
</code></pre><p>NOTE: if you want to use this on minikube you can see the local host via <code>minikube service list</code> (to simuate a webhook post locally)</p> <p>So, now we&rsquo;re ready to configure our Github repository and wait for any code change that will trigger our CD pipeline. We can start watching it in the while:</p> <pre tabindex="0"><code>kubectl get pipelinerun -n development -w
</code></pre><h3 id="github-repository-configuration">Github repository configuration</h3> <p>We need now to go on our Github repository and configure the webhook. Enter in &ldquo;Settings &raquo; Webhooks&rdquo; and create a new Webhook. You will need to fill the form with a &ldquo;Payload URL&rdquo; (take the host appearing in the <code>kubectl get ingress -n development</code> and use as http://1.2.3.4/my-cd-pipeline), a &ldquo;Content type&rdquo; (application/json) and a secret (you may skip this as we did not configure the secret on the <code>EventListener</code>). You can also choose the events to send. In our case we&rsquo;re interested in the <code>push</code> only, but your pipeline may require to be triggered when other events on the repo happen. Once done, you can have a look at the result of the test <code>ping</code> that it&rsquo;s sent after your first setting.</p> <p>You can also watch the <code>Pod</code> created by the event listener to see if the <code>ping</code> has reached out your cluster:</p> <pre tabindex="0"><code>k logs -n development el-github-push-674dcb5f4-blbrb -f
</code></pre><p>If all is good, let&rsquo;s keep monitoring that <code>Pod</code> and make any change to your repository. As soon as you push, you should see it flowing in your log like:</p> <pre tabindex="0"><code>{&#34;severity&#34;:&#34;info&#34;,&#34;timestamp&#34;:&#34;2022-10-04T11:02:30.537Z&#34;,&#34;logger&#34;:&#34;eventlistener&#34;,&#34;caller&#34;:&#34;sink/sink.go:409&#34;,&#34;message&#34;:&#34;ResolvedParams : []&#34;,&#34;eventlistener&#34;:&#34;github-push&#34;,&#34;namespace&#34;:&#34;development&#34;,&#34;/triggers-eventid&#34;:&#34;b7fda1d3-044e-402a-b2c2-900afd849681&#34;,&#34;eventlistenerUID&#34;:&#34;98b1322c-1793-425a-8577-8fec3e708b3f&#34;,&#34;/triggers-eventid&#34;:&#34;b7fda1d3-044e-402a-b2c2-900afd849681&#34;,&#34;/trigger&#34;:&#34;github-listener&#34;}
{&#34;severity&#34;:&#34;info&#34;,&#34;timestamp&#34;:&#34;2022-10-04T11:02:30.539Z&#34;,&#34;logger&#34;:&#34;eventlistener&#34;,&#34;caller&#34;:&#34;resources/create.go:98&#34;,&#34;message&#34;:&#34;Generating resource: kind: &amp;APIResource{Name:pipelineruns,Namespaced:true,Kind:PipelineRun,Verbs:[delete deletecollection get list patch create update watch],ShortNames:[pr prs],SingularName:pipelinerun,Categories:[tekton tekton-pipelines],Group:tekton.dev,Version:v1beta1,StorageVersionHash:RcAKAgPYYoo=,}, name: github-push-pipeline-run-&#34;}
{&#34;severity&#34;:&#34;info&#34;,&#34;timestamp&#34;:&#34;2022-10-04T11:02:30.539Z&#34;,&#34;logger&#34;:&#34;eventlistener&#34;,&#34;caller&#34;:&#34;resources/create.go:106&#34;,&#34;message&#34;:&#34;For event ID \&#34;b7fda1d3-044e-402a-b2c2-900afd849681\&#34; creating resource tekton.dev/v1beta1, Resource=pipelineruns&#34;}
</code></pre><p>That means the <code>Pipeline</code> was triggered and in a few minutes you should have your shining new feature available in production!</p> <h3 id="test-webhook-locally">Test webhook locally</h3> <p>During the development of your pipeline (or if you want to use a local cluster such as <code>minikube</code>), you may be interested in simulating the push event. This should be as easy as running something like:</p> <pre tabindex="0"><code>http post http://192.168.49.2:32698/my-cd-pipeline X-GitHub-Event:push json=test
</code></pre><h1 id="conclusion">Conclusion</h1> <p>It was a long post, but, I am sure you appreciated the effort we&rsquo;ve put in wrapping up all the resources required to have a full CICD experience on a Camel K integration. The possibility offered by Tekton or any other pipeline application on Kubernetes are a great complement on the experience we are providing with the <code>kamel promote</code> feature.</p> <h2 id="caveat">Caveat</h2> <p>While working on this blog, I&rsquo;ve spotted a problem that may <a href="https://github.com/apache/camel-k/issues/3673" rel="noopener nofollow noreferrer">prevent you updating the Integration</a> via <code>kamel promote</code> on a production environment. It was promptly fixed and available by using <code>1.11</code> or <code>1.10</code> nightly releases. You can change the <code>Tasks</code> configured to use <code>docker.io/testcamelk/camel-k:1.11.0-nightly</code> instead of <code>docker.io/apache/camel-k:1.10.0</code></p> <div class="related"> <h3 id="related"><a class="anchor" href="#related"></a>Related posts</h3> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2022/09/camel-k-release-1-10/"><h1>Camel K 1.10 release</h1></a> <time itemprop="published" datetime="2022-09-05" title="Monday, September 5, 2022">September 5, 2022</time>, by <span rel="author">Pasquale Congiusti</span> </header> <p>It&rsquo;s been a long ride to bring our beloved Camel (K) from 1.9.0 to 1.10.0. We&rsquo;re particularly happy as we had the time to introduce many features and enhancements that we had planned in our 2022 roadmap back at the beginning of the year. As usual let&rsquo;s start by acknowledging the tech stack on top of Camel K and the new exciting versions our fellows have baked: Apache Camel K Runtime 1.</p> <p><a class="continue" href="../../../../blog/2022/09/camel-k-release-1-10/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Releases/">RELEASES</a><a class="category" href="../../../../categories/Camel-K/">CAMEL K</a> </p> </article> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2022/07/camel-k-monitoring-ops/"><h1>Camel K Operations: monitoring</h1></a> <time itemprop="published" datetime="2022-07-05" title="Tuesday, July 5, 2022">July 5, 2022</time>, by <span rel="author">Pasquale Congiusti</span> </header> <p>Camel K offers a wide list of operations you can execute once your Integration has been deployed (likely in a production environment). When we talk about operations, the most typical question we got is &ldquo;How to monitor a Camel K Integration?&rdquo;. Fortunately, we have all the ingredients needed to let you manage this operation as smooth as possible. I&rsquo;ll walk you through the different tools and configuration needed in this blog post.</p> <p><a class="continue" href="../../../../blog/2022/07/camel-k-monitoring-ops/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Camel-K/">CAMEL K</a><a class="category" href="../../../../categories/Features/">FEATURES</a> </p> </article> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2022/04/camel-k-release-1-9/"><h1>Camel K 1.9 release</h1></a> <time itemprop="published" datetime="2022-04-28" title="Thursday, April 28, 2022">April 28, 2022</time>, by <span rel="author">Pasquale Congiusti</span> </header> <p>Attention, attention: time for a new exciting Camel K release! On behalf of Camel K community I am happy to announce the latest 1.9.0. Camel K release. As usual let&rsquo;s use this blog to share with you the new stack of exciting technology we&rsquo;ll be using in this version: Apache Camel K Runtime 1.13.0 Apache Camel Quarkus 2.8.0 Apache Camel 3.16.0 Apache Camel Kamelets 0.8.0 Thanks to Apache Camel, Camel Quarkus and Kamelet Catalog contributors for the great efforts they&rsquo;ve put in those new releases as well.</p> <p><a class="continue" href="../../../../blog/2022/04/camel-k-release-1-9/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Releases/">RELEASES</a><a class="category" href="../../../../categories/Camel-K/">CAMEL K</a> </p> </article> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2022/03/camel-k-roadmap-2022/"><h1>Camel K 2022 Roadmap</h1></a> <time itemprop="published" datetime="2022-03-01" title="Tuesday, March 1, 2022">March 1, 2022</time>, by <span rel="author">Pasquale Congiusti</span> </header> <p>Signpost png from pngtree.com/ During the last weeks we&rsquo;ve been asked questions around the direction we&rsquo;re willing to take on the future development of Camel K. I think it would be good to have some blog in order to let the community understand where our efforts are going. It will be useful for every Camel K user and Camel K developer, as a guide for the future development of the project.</p> <p><a class="continue" href="../../../../blog/2022/03/camel-k-roadmap-2022/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Roadmap/">ROADMAP</a><a class="category" href="../../../../categories/Camel-K/">CAMEL K</a> </p> </article> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2022/01/camel-k-release-1-8/"><h1>Camel K 1.8 release</h1></a> <time itemprop="published" datetime="2022-01-26" title="Wednesday, January 26, 2022">January 26, 2022</time>, by <span rel="author">Pasquale Congiusti</span> </header> <p>Image copyright: stockunlimited Time for a new release! Time for Camel K 1.8 version. Keep reading to discover what&rsquo;s new in Camel K! This is the set of technologies on which Camel K 1.8 is based: Apache Camel K Runtime 1.11.0 Apache Camel Quarkus 2.6.0 Apache Camel 3.14.0 Apache Camel Kamelets 0.7.0 As usual, thanks to Apache Camel, Camel Quarkus and Kamelet Catalog contributors for the great efforts they&rsquo;ve put in those new releases as well.</p> <p><a class="continue" href="../../../../blog/2022/01/camel-k-release-1-8/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Releases/">RELEASES</a><a class="category" href="../../../../categories/Camel-K/">CAMEL K</a> </p> </article> </div> </div> </div> </article> </main> </div> <div class="footer-tools"> <a title="Improve this document, receive free virtual hugs &hearts;" href="https://github.com/apache/camel-website/edit/main/content/blog/2022/10/camel-k-cicd/index.md">Edit this Page</a> <a href="#top" title="Reach the top of the page">Back to top</a> </div> <footer> <div class="footer"> <figure class="logo"> <img class="logo" src="../../../../_/img/logo-d-a567cee6fa.svg" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <input id="footer-toggle-overview" type="checkbox" title="Show/Hide Overview section"> <dl> <dt><label for="footer-toggle-overview">Overview</label><label for="footer-toggle-overview">&#65291;</label></dt> <dd><a href="../../../../blog/">Blog</a></dd> <dd><a href="../../../../docs/">Documentation</a></dd> <dd><a href="../../../../community/support/">Community</a></dd> <dd><a href="../../../../download/">Download</a></dd> </dl> <input id="footer-toggle-documentation" type="checkbox" title="Show/Hide Documentation section"> <dl> <dt><label for="footer-toggle-documentation">Documentation</label><label for="footer-toggle-documentation">&#65291;</label></dt> <dd><a href="../../../../manual/">User Manual</a></dd> <dd><a href="../../../../components/next/index.html">Components</a></dd> <dd><a href="../../../../camel-k/next/">Camel-K</a></dd> <dd><a href="../../../../camel-kafka-connector/next/">Camel Kafka Connector</a></dd> <dd><a href="../../../../camel-quarkus/next/">Camel Quarkus</a></dd> <dd><a href="../../../../camel-spring-boot/next/">Camel Spring Boot</a></dd> <dd><a href="../../../../camel-karaf/3.22.x/">Camel Karaf</a></dd> <dd><a href="../../../../manual/faq/index.html">FAQ</a></dd> </dl> <input id="footer-toggle-community" type="checkbox" title="Show/Hide Community section"> <dl> <dt><label for="footer-toggle-community">Community</label><label for="footer-toggle-community">&#65291;</label></dt> <dd><a href="../../../../community/support/">Support</a></dd> <dd><a href="../../../../community/contributing/">Contributing</a></dd> <dd><a href="../../../../community/mailing-list">Mailing Lists</a></dd> <dd><a href="../../../../community/user-stories/">User stories</a></dd> <dd><a href="../../../../community/articles/">Articles</a></dd> <dd><a href="../../../../community/books/">Books</a></dd> <dd><a href="../../../../community/team/">Team</a></dd> </dl> <input id="footer-toggle-about" type="checkbox" title="Show/Hide Acknowledgements section"> <dl> <dt><label for="footer-toggle-about">About</label><label for="footer-toggle-about">&#65291;</label></dt> <dd><a href="../../../../acknowledgments/">Acknowledgments</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p class="remark"> &copy; 2004-2024 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> <div class="resources"> <div class="context"> <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a> </div> <div class="context"> <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/policies/conduct">Code of Conduct</a> </div> <div class="context"> <a href="../../../../sitemap/">Sitemap</a> </div> </div> <div class="footer-icons"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> </div> </footer> <script src="../../../../_/js/vendor/algoliasearch-bad45193e2.js"></script> <script src="../../../../_/js/site-c215fb6972.js"></script> <script async src="../../../../_/js/vendor/highlight-621a10fe1b.js"></script> <script async src="../../../../_/js/vendor/svg4everybody-a0c573f2b9.js"></script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Organization", "name": "Apache Camel", "url": "https:\/\/camel.apache.org\/" , "sameAs": ["https://twitter.com/ApacheCamel"] , "logo": "https:\/\/camel.apache.org\/_\/img\/logo-d.svg" , "description": "Apache Camel ™ is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL." } </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "BreadcrumbList", "itemListElement": [{ "@type": "ListItem", "position": 1 , "item": { "@id": "https://camel.apache.org/", "name": "Apache Camel" } },{ "@type": "ListItem", "position": 2 , "item": { "@id": "https://camel.apache.org/blog/", "name": "blog" } },{ "@type": "ListItem", "position": 3 , "item": { "@id": "https://camel.apache.org/blog/2022/", "name": "2022" } },{ "@type": "ListItem", "position": 4 , "item": { "@id": "https://camel.apache.org/blog/2022/10/", "name": "10" } },{ "@type": "ListItem", "position": 5 , "item": { "@id": "https://camel.apache.org/blog/2022/10/camel-k-cicd/", "name": "camel-k-cicd" } }] } </script> </body> </html> 