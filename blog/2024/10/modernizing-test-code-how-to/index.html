<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../../../../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../../../../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../../../../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../../../../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../../../../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../../../../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../../../../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../../../../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../../../../favicon-128.png" sizes="128x128"> <meta name="application-name" content="Apache Camel"> <meta property="og:title" content="Modernizing Camel&#39;s Test Support Code: How To"> <meta property="og:site_name" content="Apache Camel"> <meta property="og:url" content="https://camel.apache.org/blog/2024/10/modernizing-test-code-how-to/"> <meta name="og:description" content="Modernizing Camel&#39;s Test Support Code: How To"> <meta property="og:type" content="website"> <meta property="og:image" content="https://camel.apache.org/blog/2024/10/modernizing-test-code-how-to/camel-featured.jpg"> <link rel="manifest" href="../../../../site.webmanifest"> <title>Modernizing Camel&#39;s Test Support Code: How To - Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/blog/2024/10/modernizing-test-code-how-to/"> <link rel="stylesheet" href="../../../../_/css/site-b287b96c63.css"> </head> <body class="article"> <header class="header" aria-label="Header"> <nav class="navbar" aria-label="Main menu"> <div class="navbar-brand"> <a class="nav-logo" href="../../../../" title="Apache Camel"></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../blog/"> <img alt="Blog" src="../../../../_/img/blog-4c7fa4cb60.svg"> Blog </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../docs/"> <img alt="Documentation" src="../../../../_/img/documentation-abb1b7f8b1.svg"> Documentation </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../community/"> <img alt="Community" src="../../../../_/img/community-2ec8a3dc8b.svg"> Community </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../download/"> <img alt="Download" src="../../../../_/img/download-63cdd75074.svg"> Download </a> <a class="navbar-item-section navbar-item navbar-topics" href="../../../../security/"> <img alt="Security" src="../../../../_/img/security-06abe157b3.svg"> Security </a> </div> </div> <div class="navbar-fill"></div> <div class="break-row"></div> <div class="navbar-search results-hidden"> <input id="search" class="search" placeholder="Search" autocomplete="off"> <img src="/_/img/cancel-1ed239489b.svg" alt="Clear" id="search-cancel"> <div id="search_results"></div> </div> <div class="navbar-tools"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg focusable="false" class="brand-icon"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button" aria-label="Menu"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <a id="top"></a> <div class="body"> <main role="main blog"> <article class="blog doc"> <header aria-labelledby="title"> <a class="category" href="../../../../categories/Camel/">CAMEL</a><a class="category" href="../../../../categories/Test/">TEST</a> <h1 id="title">Modernizing Camel&#39;s Test Support Code: How To</h1> </header> <div class="post"> <aside aria-label="Post details"> <div class="summary">Modernizing Camel&#39;s Test Support Code: How To</div> Posted on <time itemprop="published" datetime="2024-10-24" title="Thursday, October 24, 2024">October 24, 2024</time>, by <figure> <img src="https://avatars.githubusercontent.com/u/1851560?v=4" alt="Otavio Rodolfo Piske"> <figcaption rel="author">Otavio Rodolfo Piske</figcaption> </figure> <h4>Share this blog</h4> <a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fcamel.apache.org%2fblog%2f2024%2f10%2fmodernizing-test-code-how-to%2f" target="_blank" rel="noopener" aria-label="Share on Facebook"> <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg> </div> </div> </a> <a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=Modernizing%20Camel%27s%20Test%20Support%20Code%3a%20How%20To&url=https%3a%2f%2fcamel.apache.org%2fblog%2f2024%2f10%2fmodernizing-test-code-how-to%2f&hashtags=ApacheCamel" target="_blank" rel="noopener" aria-label="Share on Twitter"> <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg> </div> </div> </a> <a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fcamel.apache.org%2fblog%2f2024%2f10%2fmodernizing-test-code-how-to%2f&title=Modernizing%20Camel%27s%20Test%20Support%20Code%3a%20How%20To&summary=Modernizing%20Camel%27s%20Test%20Support%20Code%3a%20How%20To&source=https%3A%2F%2Fcamel.apache.org" target="_blank" rel="noopener" aria-label="Share on LinkedIn" title="Share on LinkedIn"> <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false"><path d="M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z"/></svg> </div> </div> </a> <p> <a class="arrow prev" href="../../../../blog/2024/10/RELEASE-4.4.4/" title="Previous post: RELEASE 4.4.4">&#10094;</a> </p> </aside> <div class="post-content"> <img class="featured" alt="Blog post featured image" src="../../../../blog/2024/10/modernizing-test-code-how-to/camel-featured_hub707044659e15e836f8cdfa574067585_576199_800x0_resize_q95_gaussian.jpg" width="800" height="452"> <p>Earlier <a href="../../../../blog/2024/09/modernizing-test-support">I wrote a blog post</a> about a multi-release effort to clean up some of the legacy test code for Camel 4. In this blog post, I will dive into more details about how to adjust your code to use the modernized interfaces.</p> <h1 id="new-interfaces">New Interfaces</h1> <p>Camel 4.9 will introduce two new interfaces to <code>CamelTestSupport</code> that will help users adjust their code and will help us with future maintenance of the test support code. These interfaces provide a stable APIs for code needing to configure the test behavior and the context configuration. The new interfaces are:</p> <ul> <li><code>ConfigurableTest</code>: that indicates that the test is configurable. This interface defines the methods <code>configureTest</code> and <code>testConfiguration</code>.</li> <li><code>ConfigurableContext</code>: that indicates that the context used in the test is configurable. This interface defines the methods <code>configureContext</code> and <code>camelContextConfiguration</code>.</li> </ul> <p>During test setup, our code calls these methods at the most appropriate time. As such, user code doesn&rsquo;t necessarily need to worry about when to call them.</p> <p>Users willing to future-proof their code can leverage the two configuration methods provided by each of these interfaces and adjust their code so that the configuration is done inside them.</p> <p>We have updated our <a href="../../../../components/next/others/test-junit5.html">JUnit 5 testing documentation</a> to describe the migration steps in more details.</p> <h1 id="removal-of-deprecated-interfaces">Removal of Deprecated Interfaces</h1> <p>Originally, the plan was to remove the deprecated interfaces. However, removing these methods would unnecessarily cause overhead when migrating from Camel 3, and would violate the goal of Camel 4 being as close as possible to a drop-in replacement for 3. Therefore, these APIs will not be removed at this point.</p> <div class="related"> <h3 id="related"><a class="anchor" href="#related"></a>Related posts</h3> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2024/09/modernizing-test-support/"><h1>Modernizing Camel&#39;s Test Support Code: What You Need to Know</h1></a> <time itemprop="published" datetime="2024-09-11" title="Wednesday, September 11, 2024">September 11, 2024</time>, by <span rel="author">Otavio Rodolfo Piske</span> </header> <p>The first law of software complexity says that &ldquo;a well-designed system will degrade into a badly designed system over time&rdquo;. This law can be ruthless for open source projects receiving hundreds of contributions every month. That&rsquo;s why projects must refactor code, evaluate APIs, review tests, and modernize code to leverage the latest and greatest features from Java. Camel Test Support One area in Camel that has had little attention until recently was our test support code.</p> <p><a class="continue" href="../../../../blog/2024/09/modernizing-test-support/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Camel/">CAMEL</a><a class="category" href="../../../../categories/Test/">TEST</a> </p> </article> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2024/09/chunking-dsl/"><h1>Unlocking Efficient Data Processing with the Chunking DSL</h1></a> <time itemprop="published" datetime="2024-09-06" title="Friday, September 6, 2024">September 6, 2024</time>, by <span rel="author">Otavio Rodolfo Piske</span> </header> <p>Chunking is a crucial aspect of data processing that can significantly impact retrieval quality, query latency, costs, and even the accuracy of Large Language Model (LLM) outputs. In this blog post, we&rsquo;ll explore what chunking is, its importance, and how the new Chunking DSL in Apache Camel 4.8.0 improves data processing workflows. The Problem with Traditional Chunking Approaches Before Camel 4.8.0, applications using Camel would have to implement custom chunking logic or rely on external libraries.</p> <p><a class="continue" href="../../../../blog/2024/09/chunking-dsl/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Camel/">CAMEL</a><a class="category" href="../../../../categories/AI/">AI</a> </p> </article> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2023/11/camel-4-performance-improvements-2/"><h1>The Rise and Fall of the Performance Monsters</h1></a> <time itemprop="published" datetime="2023-11-26" title="Sunday, November 26, 2023">November 26, 2023</time>, by <span rel="author">Otavio Rodolfo Piske</span> </header> <p>Introduction Apache Camel has always been committed to delivering top-notch performance. As the development of Camel 4 progressed, so did the dedication to enhancing its performance. In this blog post, we&rsquo;ll explore the advances made in the pursuit of efficiency, focusing on key improvements introduced between Camel 4.1 and 4.2, with a few important improvements for the upcoming 4.3. Camel 4.1: A Leap Forward in Type Conversion One of the notable enhancements in Camel 4.</p> <p><a class="continue" href="../../../../blog/2023/11/camel-4-performance-improvements-2/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Features/">FEATURES</a><a class="category" href="../../../../categories/Camel/">CAMEL</a> </p> </article> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2023/05/camel-4-performance-improvements/"><h1>Hunting performance monsters on the back of a Camel</h1></a> <time itemprop="published" datetime="2023-05-25" title="Thursday, May 25, 2023">May 25, 2023</time>, by <span rel="author">Otavio Rodolfo Piske</span> </header> <p>Introduction We are thrilled to share the remarkable advancements in the performance of Apache Camel 4, achieved through our diligent efforts in addressing a critical JVM issue (JDK-8180450). In this article, we will delve into the details of our investigation, the tools employed, and the subsequent optimizations that have propelled Apache Camel 4 to new heights of speed and efficiency. Identifying the Performance Challenge The JVM issue JDK-8180450, known for its potential performance penalties during type checking, became our focal point.</p> <p><a class="continue" href="../../../../blog/2023/05/camel-4-performance-improvements/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Features/">FEATURES</a><a class="category" href="../../../../categories/Camel/">CAMEL</a> </p> </article> <article class="blog doc"> <header aria-label="Blog post"> <a href="../../../../blog/2022/03/resume-api-v2/"><h1>Introducing the Resume API v2</h1></a> <time itemprop="published" datetime="2022-03-22" title="Tuesday, March 22, 2022">March 22, 2022</time>, by <span rel="author">Otavio Rodolfo Piske</span> </header> <p>The need to process larger quantities of data has been a growing concern and necessity within our community. For the last few releases we have been working to create mechanisms to simplify how our users can consume data at scale. Although Camel is no stranger to consuming data at scale, recent trends in computing and systems architecture introduce the need for behaviors that improve agility, speed and scalability when doing so.</p> <p><a class="continue" href="../../../../blog/2022/03/resume-api-v2/">Continue reading &#10095;</a></p> <p> <a class="category" href="../../../../categories/Features/">FEATURES</a><a class="category" href="../../../../categories/Camel/">CAMEL</a> </p> </article> </div> </div> </div> </article> </main> </div> <div class="footer-tools"> <a title="Improve this document, receive free virtual hugs &hearts;" href="https://github.com/apache/camel-website/edit/main/content/blog/2024/10/modernizing-test-code-how-to/index.md">Edit this Page</a> <a href="#top" title="Reach the top of the page">Back to top</a> </div> <footer> <div class="footer"> <figure class="logo"> <img class="logo" src="../../../../_/img/logo-d-a567cee6fa.svg" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <input id="footer-toggle-overview" type="checkbox" title="Show/Hide Overview section"> <dl> <dt><label for="footer-toggle-overview">Overview</label><label for="footer-toggle-overview">&#65291;</label></dt> <dd><a href="../../../../blog/">Blog</a></dd> <dd><a href="../../../../docs/">Documentation</a></dd> <dd><a href="../../../../community/support/">Community</a></dd> <dd><a href="../../../../download/">Download</a></dd> </dl> <input id="footer-toggle-documentation" type="checkbox" title="Show/Hide Documentation section"> <dl> <dt><label for="footer-toggle-documentation">Documentation</label><label for="footer-toggle-documentation">&#65291;</label></dt> <dd><a href="../../../../manual/">User Manual</a></dd> <dd><a href="../../../../components/next/index.html">Components</a></dd> <dd><a href="../../../../camel-k/next/">Camel-K</a></dd> <dd><a href="../../../../camel-kafka-connector/next/">Camel Kafka Connector</a></dd> <dd><a href="../../../../camel-quarkus/next/">Camel Quarkus</a></dd> <dd><a href="../../../../camel-spring-boot/next/">Camel Spring Boot</a></dd> <dd><a href="../../../../camel-karaf/3.22.x/">Camel Karaf</a></dd> <dd><a href="../../../../manual/faq/index.html">FAQ</a></dd> </dl> <input id="footer-toggle-community" type="checkbox" title="Show/Hide Community section"> <dl> <dt><label for="footer-toggle-community">Community</label><label for="footer-toggle-community">&#65291;</label></dt> <dd><a href="../../../../community/support/">Support</a></dd> <dd><a href="../../../../community/contributing/">Contributing</a></dd> <dd><a href="../../../../community/mailing-list">Mailing Lists</a></dd> <dd><a href="../../../../community/user-stories/">User stories</a></dd> <dd><a href="../../../../community/articles/">Articles</a></dd> <dd><a href="../../../../community/books/">Books</a></dd> <dd><a href="../../../../community/team/">Team</a></dd> </dl> <input id="footer-toggle-about" type="checkbox" title="Show/Hide Acknowledgements section"> <dl> <dt><label for="footer-toggle-about">About</label><label for="footer-toggle-about">&#65291;</label></dt> <dd><a href="../../../../acknowledgments/">Acknowledgments</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p class="remark"> &copy; 2004-2024 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> <div class="resources"> <div class="context"> <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a> </div> <div class="context"> <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/policies/conduct">Code of Conduct</a> </div> <div class="context"> <a href="../../../../sitemap/">Sitemap</a> </div> </div> <div class="footer-icons"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg class="brand-icon" focusable="false"><use href="../../../../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> </div> </footer> <script src="../../../../_/js/vendor/algoliasearch-bad45193e2.js"></script> <script src="../../../../_/js/site-c215fb6972.js"></script> <script async src="../../../../_/js/vendor/highlight-621a10fe1b.js"></script> <script async src="../../../../_/js/vendor/svg4everybody-a0c573f2b9.js"></script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Organization", "name": "Apache Camel", "url": "https:\/\/camel.apache.org\/" , "sameAs": ["https://twitter.com/ApacheCamel"] , "logo": "https:\/\/camel.apache.org\/_\/img\/logo-d.svg" , "description": "Apache Camel â„¢ is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL." } </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "BreadcrumbList", "itemListElement": [{ "@type": "ListItem", "position": 1 , "item": { "@id": "https://camel.apache.org/", "name": "Apache Camel" } },{ "@type": "ListItem", "position": 2 , "item": { "@id": "https://camel.apache.org/blog/", "name": "blog" } },{ "@type": "ListItem", "position": 3 , "item": { "@id": "https://camel.apache.org/blog/2024/", "name": "2024" } },{ "@type": "ListItem", "position": 4 , "item": { "@id": "https://camel.apache.org/blog/2024/10/", "name": "10" } },{ "@type": "ListItem", "position": 5 , "item": { "@id": "https://camel.apache.org/blog/2024/10/modernizing-test-code-how-to/", "name": "modernizing-test-code-how-to" } }] } </script> </body> </html> 