<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Route Template :: Apache Camel</title> <link rel="canonical" href="https://camel.apache.org/manual/route-template.html"> <meta name="generator" content="Antora 3.1.7"> <link rel="stylesheet" href="../_/css/site-b287b96c63.css"> <meta name="application-name" content="Apache Camel"> <meta property="og:title" content="Route Template"> <meta property="og:site_name" content="Apache Camel"> <meta property="og:url" content="https://camel.apache.org"> <meta property="og:description" content="Camel is an open source integration framework that empowers you to quickly and easily integrate various systems consuming or producing data."> <meta property="og:type" content="website"> <meta property="og:image" content="https://camel.apache.org/_/img/logo-d-a567cee6fa.svg"> <link rel="manifest" href="../site.webmanifest"> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../apple-touch-icon-57x57.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../apple-touch-icon-114x114.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../apple-touch-icon-72x72.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../apple-touch-icon-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="../apple-touch-icon-60x60.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../apple-touch-icon-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="../apple-touch-icon-76x76.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../apple-touch-icon-152x152.png"> <link rel="icon" type="image/png" href="../favicon-196x196.png" sizes="196x196"> <link rel="icon" type="image/png" href="../favicon-96x96.png" sizes="96x96"> <link rel="icon" type="image/png" href="../favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="../favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="../favicon-128.png" sizes="128x128"> </head> <body class="article"> <header class="header"> <nav class="navbar" aria-label="Main menu"> <div class="navbar-brand"> <a class="nav-logo" href=".."></a> <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> <a class="navbar-item-section navbar-item navbar-topics" href="../blog/"> <img alt="Blog" src="/_/img/blog-4c7fa4cb60.svg"> Blog </a> <a class="navbar-item-section navbar-item navbar-topics" href="../docs/"> <img alt="Documentation" src="/_/img/documentation-abb1b7f8b1.svg"> Documentation </a> <a class="navbar-item-section navbar-item navbar-topics" href="../community/"> <img alt="Community" src="/_/img/community-2ec8a3dc8b.svg"> Community </a> <a class="navbar-item-section navbar-item navbar-topics" href="../download/"> <img alt="Download" src="/_/img/download-63cdd75074.svg"> Download </a> <a class="navbar-item-section navbar-item navbar-topics" href="../security/"> <img alt="Security" src="/_/img/security-06abe157b3.svg"> Security </a> </div> </div> <div class="navbar-fill"></div> <div class="break-row"></div> <div class="navbar-search results-hidden"> <input id="search" class="search" placeholder="Search" autocomplete="off"> <img src="../_/img/cancel-1ed239489b.svg" alt="Clear" id="search-cancel"> <div id="search_results"></div> </div> <div class="navbar-tools"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg focusable="false" class="brand-icon"><use xlink:href="../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg focusable="false" class="brand-icon"><use xlink:href="../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg focusable="false" class="brand-icon"><use xlink:href="../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg focusable="false" class="brand-icon"><use xlink:href="../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> <button class="navbar-burger" data-target="topbar-nav" type="button" aria-label="Menu"> <span></span> <span></span> <span></span> </button> </div> </nav> </header> <a id="top"></a> <div class="body"> <div class="nav-container" data-component="manual" data-version=""> <aside class="nav" aria-label="Side menu"> <div class="panels"> <div class="nav-panel-menu is-active"> <nav class="nav-menu" data-panel="menu" aria-label="Topics"> <h3 class="title"><a href="index.html">User manual</a></h3> <ul class="nav-list"> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="getting-started.html">Getting started</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="book-getting-started.html">Getting Started with Apache Camel</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="what-are-the-dependencies.html">What are the dependencies?</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <span class="nav-text">Resources &amp; Guides</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="/community/books/">Books</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="building.html">Building</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camel-console.html">Camel Developer Console</a> </li> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="camel-jbang.html">Camel JBang</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="camel-jbang-kubernetes.html">Camel Kubernetes plugin</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="camel-jbang-k.html">Camel K plugin</a> </li> </ul> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camel-maven-plugin.html">Camel Maven Plugin</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camel-component-maven-plugin.html">Camel Component Maven Plugin</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camel-report-maven-plugin.html">Camel Maven Report Plugin</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camel-maven-archetypes.html">Camel Maven Archetypes</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="configuring-route-startup-ordering-and-autostartup.html">Configuring route startup ordering and autostartup</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="component-dsl.html">Component DSL</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="Endpoint-dsl.html">Endpoint DSL</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dataformat-dsl.html">DataFormat DSL</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="examples.html">Examples</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="graceful-shutdown.html">Graceful Shutdown</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="error-handler.html">Error handler</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="using-propertyplaceholder.html">How to use Camel property placeholders</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="variables.html">How to use Variables</a> </li> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="testing.html">Testing</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="test-infra.html">Test Infra</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="notify-builder.html">NotifyBuilder</a> </li> <li class="nav-item" data-depth="3"> <a class="nav-link" href="advice-with.html">AdviceWith</a> </li> </ul> </li> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="rest-dsl.html">Working with REST and Rest DSL</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="rest-dsl-openapi.html">Rest DSL contract first</a> </li> </ul> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="writing-components.html">Writing Components</a> </li> <li class="nav-item" data-depth="2"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="release-guide.html">Release guide</a> <ul class="nav-list"> <li class="nav-item" data-depth="3"> <a class="nav-link" href="release-guide-website.html">Adding doc versions to the website</a> </li> </ul> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="improving-the-documentation.html">Improving the Documentation</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="migration-and-upgrade.html">Migration and Upgrade</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camel-3-migration-guide.html">Camel 2.x to 3.0 Migration Guide</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camel-3x-upgrade-guide.html">Camel 3.x Upgrade Guide</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camel-4-migration-guide.html">Camel 3.x to 4.0 Migration Guide</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camel-4x-upgrade-guide.html">Camel 4.x Upgrade Guide</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="architecture.html">Architecture</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="backlog-debugger.html">Backlog debugger</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="backlog-tracer.html">Backlog Tracer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="batch-consumer.html">Batch Consumer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="bean-binding.html">Bean Binding</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="bean-integration.html">Bean Integration</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="browsable-endpoint.html">BrowsableEndpoint</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camelcontext.html">CamelContext</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="camelcontext-autoconfigure.html">CamelContext Auto Configuration</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="clustering.html">Clustering and Load Balancing</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="component.html">Component</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="data-format.html">Data Format</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="debugger.html">Debugger</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="delay-interceptor.html">Delayer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="endpoint.html">Endpoints</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="endpoint-annotations.html">Endpoint Annotations</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="exception-clause.html">Exception Clause</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="exchange-pooling.html">Exchange Pooling</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="http-session-handling.html">HTTP-Session Handling</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="parameter-binding-annotations.html">Parameter Binding Annotations</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="pojo-producing.html">POJO Producing</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="pojo-consuming.html">POJO Consuming</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="producertemplate.html">ProducerTemplate</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="consumertemplate.html">ConsumerTemplate</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="error-handler.html">Error Handler</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="exchange.html">Message Exchange</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="exchange-pattern.html">Exchange Pattern</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="using-exchange-pattern-annotations.html">Using Exchange pattern annotations</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="expression.html">Expressions</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../components/4.8.x/eips/content-enricher.html">Content Enrichment</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="injector.html">Injector</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="../components/4.8.x/eips/intercept.html">Intercept</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="jmx.html">JMX</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="lifecycle.html">Camel Lifecycle</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="oncompletion.html">OnCompletion</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="pluggable-class-resolvers.html">Pluggable Class Resolvers</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="predicate.html">Predicates</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="processor.html">Processor</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="registry.html">Registry</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="route-builder.html">RouteBuilder</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="lambda-route-builder.html">LambdaRouteBuilder</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="route-controller.html">RouteController</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="route-policy.html">RoutePolicy</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="route-configuration.html">RouteConfiguration</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="context-reload.html">ContextReload</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="route-reload.html">RouteReload</a> </li> <li class="nav-item is-current-page" data-depth="2"> <a class="nav-link" href="route-template.html">RouteTemplate</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="routes.html">Routes</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="startup-condition.html">Startup Condition</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="stream-caching.html">Stream caching</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="transformer.html">Transformer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="threading-model.html">Threading Model</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="tracer.html">Tracer</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="type-converter.html">Type Converter</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="uris.html">URIs</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="uuidgenerator.html">UuidGenerator</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="validator.html">Validator</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="health-check.html">Health Checks</a> </li> </ul> </li> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <span class="nav-text">Domain Specific Languages</span> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="dsl.html">Camel Domain Specific Language</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="languages.html">Languages</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="java-dsl.html">Java DSL</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="spring.html">Spring support</a> </li> </ul> </li> </ul> </li> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <button class="nav-item-toggle" type="button" aria-label="Expand or contract topic"></button> <a class="nav-link" href="faq/index.html">FAQ</a> <ul class="nav-list"> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/can-i-get-commercial-support.html">Can I get commercial support?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="/community/support/">How can I get help?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-i-get-the-source-code.html">How can I get the source code?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-work.html">How does Camel work?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-the-website-work.html">How does the website work?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-become-a-committer.html">How do I become a committer?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-compile-the-code.html">How do I compile the code?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-edit-the-website.html">How do I edit the website?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/running-camel-standalone.html">Running Camel standalone</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-is-a-router.html">What is a router?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-is-camel.html">What is Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-is-the-license.html">What is the license?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="languages.html">What languages are supported?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/what-platforms-are-supported.html">What platforms are supported?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-the-name-camel.html">Why the name Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-specify-which-method-to-use-when-using-beans-in-routes.html">How do I specify which method to use when using beans in routes?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-i-create-a-custom-component-or-endpoint.html">How can I create a custom component or endpoint?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-i-get-the-remote-connection-ip-address-from-the-camel-cxf-consumer-.html">How can I get the remote connection IP address from the camel-cxf consumer ?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-i-stop-a-route-from-a-route.html">How can I stop a route from a route?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-can-webservice-clients-see-remote-faults-with-stacktraces-when-using-camel-cxf.html">How can webservice clients see remote faults with stacktraces when using camel-cxf?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-does-camel-look-up-beans-and-endpoints.html">How does Camel look up beans and endpoints?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-change-the-logging.html">How do I change the logging?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-configure-endpoints.html">How do I configure endpoints?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-configure-password-options-on-camel-endpoints-without-the-value-being-encoded.html">How do I configure password options on Camel endpoints without the value being encoded?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-configure-the-default-maximum-cache-size-for-producercache-or-producertemplate.html">How do I configure the default maximum cache size for ProducerCache or ProducerTemplate?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-configure-the-maximum-endpoint-cache-size-for-camelcontext.html">How do I configure the maximum endpoint cache size for CamelContext?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-debug-my-route.html">How do I debug my route?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-disable-jmx.html">How do I disable JMX?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-enable-streams-when-debug-logging-messages-in-camel.html">How do I enable streams when debug logging messages in Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-handle-failures-when-consuming-for-example-from-a-ftp-server.html">How do I handle failures when consuming for example from a FTP server?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-import-rests-from-other-xml-files.html">How do I import rests from other XML files?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-import-routes-from-other-xml-files.html">How do I import routes from other XML files?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-let-jetty-match-wildcards.html">How do I let Jetty match wildcards?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-name-my-routes.html">How do I name my routes?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-restart-camelcontext.html">How do I restart CamelContext?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-retrieve-the-thrown-exception-during-processing-an-exchange.html">How do I retrieve the thrown Exception during processing an Exchange?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-retry-failed-messages-forever.html">How do I retry failed messages forever?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-retry-processing-a-message-from-a-certain-point-back-or-an-entire-route.html">How do I retry processing a message from a certain point back or an entire route?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-reuse-the-contexttestsupport-class-in-my-unit-tests.html">How do I reuse the ContextTestSupport class in my unit tests?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-set-the-max-chars-when-debug-logging-messages-in-camel.html">How do I set the max chars when debug logging messages in Camel?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-uris-with-parameters-in-xml.html">How do I use URIs with parameters in XML?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-write-a-custom-processor-which-sends-multiple-messages.html">How do I write a custom Processor which sends multiple messages?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-should-i-invoke-my-pojos-or-spring-services.html">How should I invoke my POJOs or Spring Services?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-avoid-sending-some-or-all-message-headers.html">How to avoid sending some or all message headers?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-remove-the-http-protocol-headers-in-the-camel-message.html">How to remove the http protocol headers in the camel message?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-send-the-same-message-to-multiple-endpoints.html">How to send the same message to multiple endpoints?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-switch-the-cxf-consumer-between-http-and-https-without-touching-the-spring-configuration.html">How to switch the CXF consumer between HTTP and HTTPS without touching the Spring configuration?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-to-use-a-dynamic-uri-in-to.html">How to use a dynamic URI in to()?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/is-there-an-ide.html">Is there an IDE?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/using-getin-or-getout-methods-on-exchange.html">Using getIn or getOut methods on Exchange</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-cant-i-use-sign-in-my-password.html">Why can&#8217;t I use + sign in my password?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-can-i-not-use-when-or-otherwise-in-a-java-camel-route.html">Why can I not use when or otherwise in a Java Camel route?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-ftp-component-not-download-any-files.html">Why does FTP component not download any files?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-my-file-consumer-not-pick-up-the-file-and-how-do-i-let-the-file-consumer-use-the-camel-error-handler.html">Why does my file consumer not pick up the file, and how do I let the file consumer use the Camel error handler?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-useoriginalmessage-with-error-handler-not-work-as-expected.html">Why does useOriginalMessage with error handler not work as expected?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-do-my-message-lose-its-headers-during-routing.html">Why do my message lose its headers during routing?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-is-my-message-body-empty.html">Why is my message body empty?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-is-my-processor-not-showing-up-in-jconsole.html">Why is my processor not showing up in JConsole?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-is-the-exception-null-when-i-use-onexception.html">Why is the exception null when I use onException?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-use-multiple-camelcontext.html">Why use multiple CamelContext?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-enable-debug-logging.html">How do I enable debug logging?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-use-log4j.html">How do I use log4j?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-make-my-jms-endpoint-transactional.html">How Do I Make My JMS Endpoint Transactional?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-i-set-the-mep-when-interacting-with-jbi.html">How do I set the MEP when interacting with JBI?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-the-direct-event-seda-and-vm-endpoints-compare.html">How do the direct, event, seda and vm endpoints compare?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/how-do-the-timer-and-quartz-endpoints-compare.html">How do the Timer and Quartz endpoints compare?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-my-jms-route-only-consume-one-message-at-once.html">Why does my JMS route only consume one message at once?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/exception-beandefinitionstoreexception.html">Exception - BeanDefinitionStoreException</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/exception-orgapachecamelnosuchendpointexception.html">Exception - org.apache.camel.NoSuchEndpointException</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/exception-orgxmlsaxsaxparseexception.html">Exception - org.xml.sax.SAXParseException</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/memory-leak-when-adding-and-removing-routes-at-runtime.html">Memory leak when adding and removing routes at runtime</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-camel-use-too-many-threads-with-producertemplate.html">Why does Camel use too many threads with ProducerTemplate?</a> </li> <li class="nav-item" data-depth="2"> <a class="nav-link" href="faq/why-does-maven-not-download-dependencies.html">Why does maven not download dependencies?</a> </li> </ul> </li> </ul> </li> <li class="nav-item" data-depth="0"> <ul class="nav-list"> <li class="nav-item" data-depth="1"> <span class="nav-text"><strong>Reference</strong></span> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../components/4.8.x/index.html">Components</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../components/4.8.x/dataformats/index.html">Data Formats</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../components/4.8.x/languages/index.html">Languages</a> </li> <li class="nav-item" data-depth="1"> <a class="nav-link" href="../components/4.8.x/eips/enterprise-integration-patterns.html">EIPs</a> </li> </ul> </li> </ul> </nav> </div> <div class="nav-panel-explore" data-panel="explore"> <div class="context"> <span class="title noversion">User manual</span> </div> <ul class="components"> <li class="component is-current"> <span class="title"> <a href="index.html">User manual</a> </span></li> <li class="component"><span class="title">Camel Components</span> <ul class="versions"> <li class="version"> <a href="../components/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../components/4.8.x/index.html">4.8.x (LTS)</a> </li> <li class="version"> <a href="../components/4.4.x/index.html">4.4.x (LTS)</a> </li> <li class="version"> <a href="../components/3.22.x/index.html">3.22.x (LTS)</a> </li> </ul></li> <li class="component"> <span class="title"> <a href="../camel-core/index.html">Camel Core</a> </span></li> <li class="component"><span class="title">Camel K</span> <ul class="versions"> <li class="version"> <a href="../camel-k/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../camel-k/2.4.x/index.html">2.4.x</a> </li> </ul></li> <li class="component"><span class="title">Camel Kafka Connector</span> <ul class="versions"> <li class="version"> <a href="../camel-kafka-connector/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../camel-kafka-connector/4.8.x/index.html">4.8.x</a> </li> </ul></li> <li class="component"><span class="title">Kamelet Catalog</span> <ul class="versions"> <li class="version"> <a href="../camel-kamelets/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../camel-kamelets/4.8.x/index.html">4.8.x (LTS)</a> </li> <li class="version"> <a href="../camel-kamelets/4.4.x/index.html">4.4.x (LTS)</a> </li> </ul></li> <li class="component"><span class="title">Camel Karaf</span> <ul class="versions"> <li class="version"> <a href="../camel-karaf/3.22.x/index.html">3.22.x (LTS)</a> </li> </ul></li> <li class="component"><span class="title">Camel Quarkus</span> <ul class="versions"> <li class="version"> <a href="../camel-quarkus/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../camel-quarkus/3.15.x/index.html">3.15.x</a> </li> <li class="version"> <a href="../camel-quarkus/3.8.x/index.html">3.8.x</a> </li> </ul></li> <li class="component"><span class="title">Camel Spring Boot</span> <ul class="versions"> <li class="version"> <a href="../camel-spring-boot/next/index.html">Next (Pre-release)</a> </li> <li class="version"> <a href="../camel-spring-boot/4.8.x/index.html">4.8.x (LTS)</a> </li> <li class="version"> <a href="../camel-spring-boot/4.4.x/index.html">4.4.x (LTS)</a> </li> <li class="version"> <a href="../camel-spring-boot/3.22.x/index.html">3.22.x (LTS)</a> </li> </ul></li> </ul> </div> </div> </aside> </div> <main class="article"> <nav class="toolbar" aria-label="Toolbar"> <button class="nav-toggle" type="button" aria-label="Toggle submenu"></button> <nav class="breadcrumbs" aria-label="breadcrumbs"> <ul> <li><a href="index.html">User manual</a></li> <li><a href="architecture.html">Architecture</a></li> <li><a href="route-template.html">RouteTemplate</a></li> </ul> </nav> <div class="edit-this-page"><a href="https://github.com/apache/camel/edit/main/docs/user-manual/modules/ROOT/pages/route-template.adoc">Edit this Page</a></div> </nav> <div class="content"> <article class="doc"> <h1 class="page">Route Template</h1> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>A Route template is as its name implies a template for a route, which is used to create routes from a set of input parameters. In other words, route templates are parameterized routes.</p> </div> <div class="paragraph"> <p><em>Route template</em> + <em>input parameters</em> &#8658; <em>route</em></p> </div> <div class="paragraph"> <p>From a route template, you can create one or more routes.</p> </div> </div> </div> <div class="sect1"> <h2 id="_defining_route_templates_in_the_dsl"><a class="anchor" href="#_defining_route_templates_in_the_dsl"></a>Defining route templates in the DSL</h2> <div class="sectionbody"> <div class="paragraph"> <p>Route templates are to be defined in the DSL (just like routes) as shown in the following:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyRouteTemplates extends RouteBuilder {

    @Override
    public void configure() throws Exception {
        // create a route template with the given name
        routeTemplate("myTemplate")
            // here we define the required input parameters (can have default values)
            .templateParameter("name")
            .templateParameter("greeting")
            .templateParameter("myPeriod", "3s")
            // here comes the route in the template
            // notice how we use {{name}} to refer to the template parameters
            // we can also use {{propertyName}} to refer to property placeholders
            .from("timer:{{name}}?period={{myPeriod}}")
                .setBody(simple("{{greeting}} ${body}"))
                .log("${body}");
    }
}</code></pre> </div> </div> <div class="paragraph"> <p>And in Spring XML DSL</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext&gt;
  &lt;routeTemplate id="myTemplate"&gt;
    &lt;templateParameter name="name"/&gt;
    &lt;templateParameter name="greeting"/&gt;
    &lt;templateParameter name="myPeriod" defaultValue="3s"/&gt;
    &lt;route&gt;
      &lt;from uri="timer:{{name}}?period={{myPeriod}}"/&gt;
      &lt;setBody&gt;&lt;simple&gt;{{greeting}} ${body}&lt;/simple&gt;&lt;/setBody&gt;
      &lt;log message="${body}"/&gt;
    &lt;/route&gt;
  &lt;/routeTemplate&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> <div class="paragraph"> <p>And in XML DSL</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;routeTemplates xmlns="http://camel.apache.org/schema/spring"&gt;
    &lt;routeTemplate id="myTemplate"&gt;
        &lt;templateParameter name="name"/&gt;
        &lt;templateParameter name="greeting"/&gt;
        &lt;templateParameter name="myPeriod" defaultValue="3s"/&gt;
        &lt;route&gt;
            &lt;from uri="timer:{{name}}?period={{myPeriod}}"/&gt;
            &lt;setBody&gt;&lt;simple&gt;{{greeting}} ${body}&lt;/simple&gt;&lt;/setBody&gt;
            &lt;log message="${body}"/&gt;
        &lt;/route&gt;
    &lt;/routeTemplate&gt;
&lt;/routeTemplates&gt;</code></pre> </div> </div> <div class="paragraph"> <p>In the examples above, there was one route template, but you can define as many as you want. Each template must have a unique id. The template parameters are used for defining the parameters the template accepts. As you can see, there are three parameters: <code><em>name</em></code>, <code><em>greeting</em></code>, and <code><em>myPeriod</em></code>. The first two parameters are mandatory, whereas <code><em>myPeriod</em></code> is optional as it has a default value of 3s.</p> </div> <div class="paragraph"> <p>The template parameters are then used in the route as regular property placeholders with the <code>{{ }}</code> syntax. Notice how we use <code>{{name}}</code> and <code>{{greeting}}</code> in the timer endpoint and the simple language.</p> </div> <div class="paragraph"> <p>The route can, of course, use regular property placeholders as well. Now imagine there was a property placeholder with the name greeting:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">greeting = Davs</code></pre> </div> </div> <div class="paragraph"> <p>Then Camel would normally have used this value <code>Davs</code> when creating the route. However, as the route template has defined a template parameter with the same name <code>greeting</code> then a value must be provided when creating routes from the template.</p> </div> <div class="paragraph"> <p>Template parameters take precedence over regular property placeholders.</p> </div> </div> </div> <div class="sect1"> <h2 id="_creating_a_route_from_a_route_template"><a class="anchor" href="#_creating_a_route_from_a_route_template"></a>Creating a route from a route template</h2> <div class="sectionbody"> <div class="paragraph"> <p>To create routes from route templates, then you should use <code>org.apache.camel.builder.TemplatedRouteBuilder</code>.</p> </div> <div class="paragraph"> <p>In the following code snippet, you can see how this is done with the builder:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// create two routes from the template
TemplatedRouteBuilder.builder(context, "myTemplate")
    .parameter("name", "one")
    .parameter("greeting", "Hello")
    .add();

TemplatedRouteBuilder.builder(context, "myTemplate")
    .parameter("name", "two")
    .parameter("greeting", "Bonjour")
    .parameter("myPeriod", "5s")
    .add();</code></pre> </div> </div> <div class="paragraph"> <p>And in Java DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">templatedRoute("myTemplate")
        .parameter("name", "one")
        .parameter("greeting", "Hello");
templatedRoute("myTemplate")
        .parameter("name", "two")
        .parameter("greeting", "Bonjour")
        .parameter("myPeriod", "5s");</code></pre> </div> </div> <div class="paragraph"> <p>And in Spring XML DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext&gt;
  &lt;templatedRoute routeTemplateRef="myTemplate"&gt;
    &lt;parameter name="name" value="one"/&gt;
    &lt;parameter name="greeting" value="Hello"/&gt;
  &lt;/templatedRoute&gt;
  &lt;templatedRoute routeTemplateRef="myTemplate"&gt;
    &lt;parameter name="name" value="two"/&gt;
    &lt;parameter name="greeting" value="Bonjour"/&gt;
    &lt;parameter name="myPeriod" value="5s"/&gt;
  &lt;/templatedRoute&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> <div class="paragraph"> <p>And in XML DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;templatedRoutes xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;templatedRoute routeTemplateRef="myTemplate"&gt;
    &lt;parameter name="name" value="one"/&gt;
    &lt;parameter name="greeting" value="Hello"/&gt;
  &lt;/templatedRoute&gt;
  &lt;templatedRoute routeTemplateRef="myTemplate"&gt;
    &lt;parameter name="name" value="two"/&gt;
    &lt;parameter name="greeting" value="Bonjour"/&gt;
    &lt;parameter name="myPeriod" value="5s"/&gt;
  &lt;/templatedRoute&gt;
&lt;/templatedRoutes&gt;</code></pre> </div> </div> <div class="paragraph"> <p>And in YAML DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">- templated-route:
    route-template-ref: "myTemplate"
    parameters:
      - name: "name"
        value: "one"
      - name: "greeting"
        value: "Hello"
- templated-route:
    route-template-ref: "myTemplate"
    parameters:
      - name: "name"
        value: "two"
      - name: "greeting"
        value: "Bonjour"
      - name: "myPeriod"
        value: "5s"</code></pre> </div> </div> <div class="paragraph"> <p>The returned value from <code>add</code> is the route id of the new route that was added. However <code>null</code> is returned if the route is not yet created and added, which can happen if <code>CamelContext</code> is not started yet.</p> </div> <div class="paragraph"> <p>If no route id is provided, then Camel will auto assign a route id. In the example above then Camel would assign route ids such as <code>route1</code>, <code>route2</code> to these routes.</p> </div> <div class="paragraph"> <p>If you want to specify a route id, then use <code>routeId</code> as follows, where the id is set to myCoolRoute:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">TemplatedRouteBuilder.builder(context, "myTemplate")
    .routeId("myCoolRoute")
    .parameter("name", "one")
    .parameter("greeting", "hello")
    .parameter("myPeriod", "5s")
    .add();</code></pre> </div> </div> <div class="paragraph"> <p>And in Java DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">templatedRoute("myTemplate")
        .routeId("myCoolRoute")
        .parameter("name", "one")
        .parameter("greeting", "hello")
        .parameter("myPeriod", "5s");</code></pre> </div> </div> <div class="paragraph"> <p>And in Spring XML DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext&gt;
  &lt;templatedRoute routeTemplateRef="myTemplate" routeId="myCoolRoute"&gt;
    &lt;parameter name="name" value="one"/&gt;
    &lt;parameter name="greeting" value="hello"/&gt;
    &lt;parameter name="myPeriod" value="5s"/&gt;
  &lt;/templatedRoute&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> <div class="paragraph"> <p>And in XML DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;templatedRoutes xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;templatedRoute routeTemplateRef="myTemplate" routeId="myCoolRoute"&gt;
    &lt;parameter name="name" value="one"/&gt;
    &lt;parameter name="greeting" value="hello"/&gt;
    &lt;parameter name="myPeriod" value="5s"/&gt;
  &lt;/templatedRoute&gt;
&lt;/templatedRoutes&gt;</code></pre> </div> </div> <div class="paragraph"> <p>And in YAML DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">- templated-route:
    route-template-ref: "myTemplate"
    route-id: "myCoolRoute"
    parameters:
      - name: "name"
        value: "one"
      - name: "greeting"
        value: "hello"
      - name: "myPeriod"
        value: "5s"</code></pre> </div> </div> <div class="sect2"> <h3 id="_using_template_parameters_with_java_dsl_simple_builder"><a class="anchor" href="#_using_template_parameters_with_java_dsl_simple_builder"></a>Using template parameters with Java DSL simple builder</h3> <div class="paragraph"> <p>When using Java DSL and simple language, then beware that you should not use the <em>simple fluent builder</em> when defining the simple expressions/predicates.</p> </div> <div class="paragraph"> <p>For example, given the following route template in Java DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyRouteTemplates extends RouteBuilder {

    @Override
    public void configure() throws Exception {
        routeTemplate("myTemplate")
            .templateParameter("name")
            .templateParameter("color")
            .from("direct:{{name}}")
                .choice()
                    .when(simple("{{color}}").isEqualTo("red"))
                        .to("direct:red")
                    .otherwise()
                        .to("color:other")
                .end();
    }
}</code></pre> </div> </div> <div class="paragraph"> <p>Then notice how the simple predicate is using <em>simple fluent builder</em> <code>simple("{{color}}").isEqualTo("red")</code>. This is <strong>not supported</strong> with route templates and would not work when creating multiple routes from the template.</p> </div> <div class="paragraph"> <p>Instead, the simple expression should be a literal String value <em>only</em> as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre>    .when(simple("'{{color}}' == 'red'")</pre> </div> </div> </div> <div class="sect2"> <h3 id="_using_hardcoded_node_ids_in_route_templates"><a class="anchor" href="#_using_hardcoded_node_ids_in_route_templates"></a>Using hardcoded node IDs in route templates</h3> <div class="paragraph"> <p>If route templates contain hardcoded node IDs, then routes created from templates will use the same IDs. Therefore, if two or more routes are created from the same template, you will have <em>duplicate id detected</em> error.</p> </div> <div class="paragraph"> <p>Given the route template below, then it has hardcoded ID (<code><em>new-order</em></code>) in node calling the http services.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyRouteTemplates extends RouteBuilder {

    @Override
    public void configure() throws Exception {
        routeTemplate("orderTemplate")
            .templateParameter("queue")
            .from("jms:{{queue}}")
                .to("http:orderserver.acme.com/neworder").id("new-order")
                .log("Processing order");
    }
}</code></pre> </div> </div> <div class="paragraph"> <p>When creating routes from templates, you can then provide a <em>prefix</em> which is used for all node IDs. This allows to create 2 or more routes without <em>duplicate id</em> errors.</p> </div> <div class="paragraph"> <p>For example in the following, we create a new route <code><em>myCoolRoute</em></code> from the <code><em>myTemplate</em></code> template, and use a prefix of <code><em>web</em></code>.</p> </div> <div class="paragraph"> <p>And in Java DSL</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">templatedRoute("orderTemplate")
        .routeId("webOrder")
        .prefixId("web")
        .parameter("queue", "order.web");</code></pre> </div> </div> <div class="paragraph"> <p>Then we can create a 2nd route:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">templatedRoute("orderTemplate")
        .routeId("ftpOrder")
        .prefixId("ftp")
        .parameter("queue", "order.ftp");</code></pre> </div> </div> <div class="paragraph"> <p>And in Spring XML DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext&gt;
  &lt;templatedRoute routeTemplateRef="orderTemplate" routeId="webOrder" prefixId="web"&gt;
    &lt;parameter name="queue" value="web"/&gt;
  &lt;/templatedRoute&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> <div class="paragraph"> <p>And in XML DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;templatedRoutes xmlns="http://camel.apache.org/schema/spring"&gt;
  &lt;templatedRoute routeTemplateRef="orderTemplate" routeId="webOrder" prefixId="web"&gt;
    &lt;parameter name="queue" value="web"/&gt;
  &lt;/templatedRoute&gt;
&lt;/templatedRoutes&gt;</code></pre> </div> </div> <div class="paragraph"> <p>And in YAML DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">- templated-route:
    route-template-ref: "orderTemplate"
    route-id: "webOrder"
    prefix-id: "web"
    parameters:
      - name: "queue"
        value: "web"</code></pre> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="_binding_beans_to_route_template"><a class="anchor" href="#_binding_beans_to_route_template"></a>Binding beans to route template</h2> <div class="sectionbody"> <div class="paragraph"> <p>The route template allows binding beans that are locally scoped and only used as part of creating routes from the template. This allows using the same template to create multiple routes, where beans are local (private) for each created route.</p> </div> <div class="paragraph"> <p>For example, given the following route template where we use <code>templateBean</code> to set up the local bean as shown:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">routeTemplate("s3template")
    .templateParameter("region")
    .templateParameter("bucket")
    .templateBean("myClient", S3Client.class, rtc -&gt;
            S3Client.builder().region(rtc.getProperty("region", Region.class)).build();
    )
    .from("direct:s3-store")
     // must refer to the bean with {{myClient}}
    .to("aws2-s3:{{bucket}}?amazonS3Client=#{{myClient}}")</code></pre> </div> </div> <div class="paragraph"> <p>The template has two parameters to specify the AWS region and the S3 bucket. To connect to S3 then a <code>software.amazon.awssdk.services.s3.S3Client</code> bean is necessary.</p> </div> <div class="paragraph"> <p>To create this bean, we specify this with the <code>templateBean</code> DSL where we specify the bean id as <code>myClient</code>. The type of the bean can be specified (<code>S3Client.class</code>), however, it is optional (can be used if you need to let beans be discovered by type and not by name).</p> </div> <div class="paragraph"> <p>This ensures that the code creating the bean is executed later (when Camel is creating a route from the template), then the code must be specified as a <em>supplier</em>. Because we want during creation of the bean access to template parameters, we use a Camel <code>BeanSupplier</code> which gives access to <code>RouteTemplateContext</code> that is the <code><em>rtc</em></code> variable in the code above.</p> </div> <div class="admonitionblock important"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> <td class="content"> The local bean with id <code>myClient</code> <strong>must</strong> be referred to using Camel&#8217;s property placeholder syntax, eg <code>{{myClient}}</code> in the route template, as shown above with the <em>to</em> endpoint. This is because the local bean must be made unique and Camel will internally re-assign the bean id to use a unique id instead of <code>myClient</code>. And this is done with the help of the property placeholder functionality. </td> </tr> </table></div> </div> <div class="paragraph"> <p>If multiple routes are created from this template, then each of the created routes have their own <code>S3Client</code> bean created.</p> </div> <div class="sect2"> <h3 id="_binding_beans_to_route_templates_from_template_builder"><a class="anchor" href="#_binding_beans_to_route_templates_from_template_builder"></a>Binding beans to route templates from template builder</h3> <div class="paragraph"> <p>The <code>TemplatedRouteBuilder</code> also allows to bind local beans (which allows specifying those beans) when creating routes from existing templates.</p> </div> <div class="paragraph"> <p>Suppose the route template below is defined in XML:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext&gt;
  &lt;routeTemplate id="s3template"&gt;
    &lt;templateParameter name="region"/&gt;
    &lt;templateParameter name="bucket"/&gt;
    &lt;route&gt;
      &lt;from uri="direct:s3-store"/&gt;
      &lt;to uri="aws2-s3:{{bucket}}?amazonS3Client=#{{myClient}}"/&gt;
    &lt;/route&gt;
  &lt;/routeTemplate&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> <div class="paragraph"> <p>The template has no bean bindings for <code>#{{myClient}}</code> which would be required for creating the template.</p> </div> <div class="paragraph"> <p>When creating routes form the template via <code>TemplatedRouteBuilder</code> then you can provide the bean binding if you desire the bean to be locally scoped (not shared with others):</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">TemplatedRouteBuilder.builder(context, "s3template")
    .parameter("region", "US-EAST-1")
    .parameter("bucket", "myBucket")
    .bean("myClient", S3Client.class,
                S3Client.builder()
                    .region(rtc.getProperty("region", Region.class))
                    .build())
    .routeId("mys3route")
    .add();</code></pre> </div> </div> <div class="paragraph"> <p>As you can see the binding is similar to when using <code>templateBean</code> directly in the route template.</p> </div> <div class="paragraph"> <p>And in Java DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">templatedRoute("s3template")
        .parameter("region", "US-EAST-1")
        .parameter("bucket", "myBucket")
        .bean("myClient", S3Client.class,
                rtc -&gt; S3Client.builder() <i class="conum" data-value="1"></i><b>(1)</b>
                    .region(rtc.getProperty("region", Region.class))
                    .build())
        .routeId("mys3route");</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>Note that the third parameter of the <code>bean</code> method is not directly the bean but rather a factory method that will be used to create the bean, here we use a lambda expression as factory method.</td> </tr> </table></div> </div> <div class="paragraph"> <p>And in XML DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">  &lt;templatedRoute routeTemplateRef="s3template" routeId="mys3route"&gt;
    &lt;parameter name="region" value="US-EAST-1"/&gt;
    &lt;parameter name="bucket" value="myBucket"/&gt;
    &lt;bean name="myClient" type="software.amazon.awssdk.services.s3.S3Client"
          scriptLanguage="groovy"&gt; <i class="conum" data-value="1"></i><b>(1)</b>
        &lt;script&gt;
            import software.amazon.awssdk.services.s3.S3Client
            S3Client.builder()
                .region(rtc.getProperty("region", Region.class))
                .build()
        &lt;/script&gt;
    &lt;/bean&gt;
  &lt;/templatedRoute&gt;</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>For non-Java DSL, in case of a complex bean factory, you can still rely on a language like <code>groovy</code> to define your bean factory inside a <code>script</code> element.</td> </tr> </table></div> </div> <div class="paragraph"> <p>And in YAML DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">- templated-route:
    route-template-ref: "s3template"
    route-id: "mys3route"
    parameters:
      - name: "region"
        value: "US-EAST-1"
      - name: "bucket"
        value: "myBucket"
    beans:
      - name: "myClient"
        type: "software.amazon.awssdk.services.s3.S3Client"
        scriptLanguage: "groovy"
        script: | <i class="conum" data-value="1"></i><b>(1)</b>
            import software.amazon.awssdk.services.s3.S3Client
            S3Client.builder()
                .region(rtc.getProperty("region", Region.class))
                .build()</code></pre> </div> </div> <div class="colist arabic"> <div class="table-wrapper"><table> <tr> <td><i class="conum" data-value="1"></i><b>1</b></td> <td>For non-Java DSL, in case of a complex bean factory, you can still rely on a language like <code>groovy</code> to define your bean factory as value of the <code>script</code> key.</td> </tr> </table></div> </div> <div class="paragraph"> <p>Instead of binding the beans from the template builder, you could also create the bean outside the template, and bind it by reference.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">final S3Client myClient = S3Client.builder().region(Region.US_EAST_1).build();

TemplatedRouteBuilder.builder(context, "s3template")
    .parameter("region", Region.US_EAST_1)
    .parameter("bucket", "myBucket")
    .bean("myClient", myClient)
    .routeId("mys3route")
    .add();</code></pre> </div> </div> <div class="paragraph"> <p>And in Java DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">templatedRoute("s3template")
        .parameter("region", "US-EAST-1")
        .parameter("bucket", "myBucket")
        .bean("myClient", S3Client.class, rtc -&gt; myClient)
        .routeId("mys3route");</code></pre> </div> </div> <div class="paragraph"> <p>You should prefer to create the local beans directly from within the template (if possible) because this ensures the route template has this out of the box. Otherwise, the bean must be created or provided every time a new route is created from the route template. However, the latter gives freedom to create the bean in any other custom way.</p> </div> </div> <div class="sect2"> <h3 id="_binding_beans_to_route_templates_using_bean_types"><a class="anchor" href="#_binding_beans_to_route_templates_using_bean_types"></a>Binding beans to route templates using bean types</h3> <div class="paragraph"> <p>You can create a local bean by referring to a fully qualified class name which Camel will use to create a new local bean instance. When using this, the created bean is created via default constructor of the class.</p> </div> <div class="paragraph"> <p>The bean instance can be configured with properties via getter/setter style. The previous example with creating the AWS S3Client would not support this kind as this uses <em>fluent builder</em> pattern (not getter/setter).</p> </div> <div class="admonitionblock tip"> <div class="table-wrapper"><table> <tr> <td class="icon"> <i class="fa icon-tip" title="Tip"></i> </td> <td class="content"> In <strong>Camel 4.6</strong> onwards, you can also use constructor arguments for beans </td> </tr> </table></div> </div> <div class="paragraph"> <p>So suppose we have a class as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyBar {
    private String name;
    private String address;

    // getter/setter omitted

    public String location() {
        return "The bar " + name + " is located at " + address;
    }
}</code></pre> </div> </div> <div class="paragraph"> <p>Then we can use the <code>MyBar</code> class as a local bean in a route template as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">routeTemplate("barTemplate")
    .templateParameter("bar")
    .templateParameter("street")
    .templateBean("myBar")
        .typeClass("com.foo.MyBar")
        .property("name", "{{bar}}")
        .property("address", "{{street}}")
    .end()
    .from("direct:going-out")
    .to("bean:{{myBar}}")</code></pre> </div> </div> <div class="paragraph"> <p>With Java DSL, you can also refer to the bean class using type safe way:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">.templateBean("myBar")
    .typeClass(MyBar.class)
    .property("name", "{{bar}}")
    .property("address", "{{street}}")
.end()</code></pre> </div> </div> <div class="paragraph"> <p>In XML DSL you would do:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt;
    &lt;routeTemplate id="myBar"&gt;
        &lt;templateParameter name="bar"/&gt;
        &lt;templateParameter name="street"/&gt;
        &lt;templateBean name="myBean" type="#class:com.foo.MyBar"&gt;
            &lt;properties&gt;
                &lt;property key="name" value="{{bar}}"/&gt;
                &lt;property key="address" value="{{street}}"/&gt;
            &lt;/properties&gt;
        &lt;/templateBean&gt;
        &lt;route&gt;
            &lt;from uri="direct:going-out"/&gt;
            &lt;to uri="bean:{{myBar}}"/&gt;
        &lt;/route&gt;
    &lt;/routeTemplate&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_binding_beans_to_route_templates_using_scripting_languages"><a class="anchor" href="#_binding_beans_to_route_templates_using_scripting_languages"></a>Binding beans to route templates using scripting languages</h3> <div class="paragraph"> <p>You can use scripting languages like groovy, java, mvel to create the bean. This allows defining route templates with the scripting language built-in (such as groovy).</p> </div> <div class="paragraph"> <p>For example, creating the AWS S3 client can be done as shown in Java (with inlined groovy code):</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">routeTemplate("s3template")
    .templateParameter("region")
    .templateParameter("bucket")
    .templateBean("myClient", "groovy",
            "software.amazon.awssdk.services.s3.S3Client.S3Client.builder()
            .region(rtc.getProperty("region", Region.class))
            .build()"
    )
    .from("direct:s3-store")
     // must refer to the bean with {{myClient}}
    .to("aws2-s3:{{bucket}}?amazonS3Client=#{{myClient}}")</code></pre> </div> </div> <div class="paragraph"> <p>The groovy code can be externalized into a file on the classpath or file system, by using <code>resource:</code> as prefix, such as:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">routeTemplate("s3template")
    .templateParameter("region")
    .templateParameter("bucket")
    .templateBean("myClient", "groovy", "resource:classpath:s3bean.groovy")
    .from("direct:s3-store")
     // must refer to the bean with {{myClient}}
    .to("aws2-s3:{{bucket}}?amazonS3Client=#{{myClient}}")</code></pre> </div> </div> <div class="paragraph"> <p>Then create the file <code>s3bean.groovy</code> in the classpath root:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">import software.amazon.awssdk.services.s3.S3Client
S3Client.builder()
    .region(rtc.getProperty("region", Region.class))
    .build()</code></pre> </div> </div> <div class="paragraph"> <p>The route template in XML DSL can then also use groovy language to create the bean as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext&gt;
  &lt;routeTemplate id="s3template"&gt;
    &lt;templateParameter name="region"/&gt;
    &lt;templateParameter name="bucket"/&gt;
    &lt;templateBean name="myClient" type="groovy"&gt;
        &lt;script&gt;
            import software.amazon.awssdk.services.s3.S3Client
            S3Client.builder()
                .region(rtc.getProperty("region", Region.class))
                .build()
        &lt;/script&gt;
    &lt;/templateBean&gt;
    &lt;route&gt;
      &lt;from uri="direct:s3-store"/&gt;
      &lt;to uri="aws2-s3:{{bucket}}?amazonS3Client=#{{myClient}}"/&gt;
    &lt;/route&gt;
  &lt;/routeTemplate&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> <div class="paragraph"> <p>Notice how the groovy code can be inlined directly in the route template in XML also. Of course, you can also externalize the bean creation code to an external file, by using <code>resource:</code> as prefix:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext&gt;
  &lt;routeTemplate id="s3template"&gt;
    &lt;templateParameter name="region"/&gt;
    &lt;templateParameter name="bucket"/&gt;
    &lt;templateBean name="myClient" type="groovy"&gt;
        &lt;script&gt;resource:classpath:s3bean.groovy&lt;/script&gt;
    &lt;/templateBean&gt;
    &lt;route&gt;
      &lt;from uri="direct:s3-store"/&gt;
      &lt;to uri="aws2-s3:{{bucket}}?amazonS3Client=#{{myClient}}"/&gt;
    &lt;/route&gt;
  &lt;/routeTemplate&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> <div class="paragraph"> <p>The languages supported are:</p> </div> <div class="table-wrapper"><table class="tableblock frame-all grid-all stretch"> <colgroup> <col> <col> </colgroup> <thead> <tr> <th class="tableblock halign-left valign-top">Type</th> <th class="tableblock halign-left valign-top">Description</th> </tr> </thead> <tbody> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>bean</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Calling a method on a Java class to create the bean.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>groovy</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Using a groovy script to create the bean.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>java</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">Java code which is runtime compiled (using jOOR library) to create the bean.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>mvel</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To use a Mvel template script to create the bean.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ognl</strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To use OGNL template script to create the bean.</p></td> </tr> <tr> <td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>name</em></strong></p></td> <td class="tableblock halign-left valign-top"><p class="tableblock">To use a third-party language by the given <code><em>name</em></code> to create the bean.</p></td> </tr> </tbody> </table></div> <div class="paragraph"> <p>Camel will bind <code>RouteTemplateContext</code> as the root object with name <code>rtc</code> when evaluating the script. This means you can get access to all the information from <code>RouteTemplateContext</code> and <code>CamelContext</code> via <code>rtc</code>.</p> </div> <div class="paragraph"> <p>This is what we have done in the scripts in the previous examples where we get hold of a template parameter with:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">    rtc.getProperty('region', String.class)</code></pre> </div> </div> <div class="paragraph"> <p>To get access to <code>CamelContext</code> you can do:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">    var cn = rtc.getCamelContext().getName()</code></pre> </div> </div> <div class="paragraph"> <p>The most powerful languages to use are groovy and java. The other languages are limited in flexibility as they are not complete programming languages, but are more suited for templating needs.</p> </div> <div class="paragraph"> <p>It is recommended to either use groovy or java, if creating the local bean requires coding, and the route templates are not defined using Java code.</p> </div> <div class="paragraph"> <p>The bean language can be used when creating the local bean from an existing Java method (static or not-static method), and the route templates are not defined using Java code.</p> </div> <div class="paragraph"> <p>For example suppose there is a class named <code>com.foo.MyAwsHelper</code> that has a method called <code>createS3Client</code> then you can call this method from the route template in XML DSL:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext&gt;
  &lt;routeTemplate id="s3template"&gt;
    &lt;templateParameter name="region"/&gt;
    &lt;templateParameter name="bucket"/&gt;
    &lt;templateBean name="myClient" type="bean"&gt;
        &lt;script&gt;com.foo.MyAwsHelper?method=createS3Client&lt;/script&gt;
    &lt;/templateBean&gt;
    &lt;route&gt;
      &lt;from uri="direct:s3-store"/&gt;
      &lt;to uri="aws2-s3:{{bucket}}?amazonS3Client=#{{myClient}}"/&gt;
    &lt;/route&gt;
  &lt;/routeTemplate&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> <div class="paragraph"> <p>The method signature of createS3Client must then have one parameter for the <code>RouteTemplateContext</code> as shown:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public static S3Client createS3Client(RouteTemplateContext rtc) {
    return S3Client.builder()
        .region(rtc.getProperty("region", Region.class))
        .build();
}</code></pre> </div> </div> <div class="paragraph"> <p>If you are using pure Java code (both template and creating local bean), then you can create the local bean using Java lambda style as previously documented.</p> </div> <div class="sect3"> <h4 id="_configuring_the_type_of_the_created_bean"><a class="anchor" href="#_configuring_the_type_of_the_created_bean"></a>Configuring the type of the created bean</h4> <div class="paragraph"> <p>The <code>type</code> must be set to define what FQN class the created bean.</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;camelContext&gt;
  &lt;routeTemplate id="s3template"&gt;
    &lt;templateParameter name="region"/&gt;
    &lt;templateParameter name="bucket"/&gt;
    &lt;templateBean name="myClient" scriptLanguage="bean" type="software.amazon.awssdk.services.s3.S3Client"&gt;
        &lt;script&gt;com.foo.MyAwsHelper?method=createS3Client&lt;/script&gt;
    &lt;/templateBean&gt;
    &lt;route&gt;
      &lt;from uri="direct:s3-store"/&gt;
      &lt;to uri="aws2-s3:{{bucket}}?amazonS3Client=#{{myClient}}"/&gt;
    &lt;/route&gt;
  &lt;/routeTemplate&gt;
&lt;/camelContext&gt;</code></pre> </div> </div> <div class="paragraph"> <p>And in Java DSL you can do:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">routeTemplate("s3template")
    .templateParameter("region")
    .templateParameter("bucket")
    .templateBean("myClient", S3Client.class, "bean", "com.foo.MyAwsHelper?method=createS3Client")
    .from("direct:s3-store")
     // must refer to the bean with {{myClient}}
    .to("aws2-s3:{{bucket}}?amazonS3Client=#{{myClient}}")</code></pre> </div> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="_configuring_route_templates_when_creating_route"><a class="anchor" href="#_configuring_route_templates_when_creating_route"></a>Configuring route templates when creating route</h2> <div class="sectionbody"> <div class="paragraph"> <p>There may be some special situations where you want to be able to do some custom configuration/code when a route is about to be created from a route template. To support this you can use the <code>configure</code> in the route template DSL where you can specify the code to execute as show:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">routeTemplate("myTemplate")
    .templateParameter("myTopic")
    .configure((RouteTemplateContext rtc) -&gt;
        // do some custom code here
    )
    .from("direct:to-topic")
    .to("kafka:{{myTopic}}");</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_jmx_management"><a class="anchor" href="#_jmx_management"></a>JMX management</h2> <div class="sectionbody"> <div class="paragraph"> <p>The route templates can be dumped as XML from the <code>ManagedCamelContextMBean</code> MBean via the <code>dumpRouteTemplatesAsXml</code> operation.</p> </div> </div> </div> <div class="sect1"> <h2 id="_creating_routes_from_a_properties_file"><a class="anchor" href="#_creating_routes_from_a_properties_file"></a>Creating routes from a properties file</h2> <div class="sectionbody"> <div class="paragraph"> <p>When using <code>camel-main</code> you can specify the parameters for route templates in <code>application.properties</code> file.</p> </div> <div class="paragraph"> <p>For example, given the route template below (from a <code>RouteBuilder</code> class):</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">routeTemplate("mytemplate")
    .templateParameter("input")
    .templateParameter("result")
    .from("direct:{{input}}")
        .to("mock:{{result}}");</code></pre> </div> </div> <div class="paragraph"> <p>Then we can create two routes from this template by configuring the values in the <code>application.properties</code> file:</p> </div> <div class="listingblock"> <div class="content"> <pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">camel.route-template[0].template-id=mytemplate
camel.route-template[0].input=foo
camel.route-template[0].result=cheese

camel.route-template[1].template-id=mytemplate
camel.route-template[1].input=bar
camel.route-template[1].result=cheese</code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_creating_routes_from_custom_sources_of_template_parameters"><a class="anchor" href="#_creating_routes_from_custom_sources_of_template_parameters"></a>Creating routes from custom sources of template parameters</h2> <div class="sectionbody"> <div class="paragraph"> <p>The SPI interface <code>org.apache.camel.spi.RouteTemplateParameterSource</code> can be used to implement custom sources that are used during startup of Camel to create routes via the templates with parameters from the custom source(s).</p> </div> <div class="paragraph"> <p>For example, a custom source can be implemented to read parameters from a shared database that Camel uses during startup to create routes. This allows externalizing these parameters and as well to easily add more routes with varying parameters.</p> </div> <div class="paragraph"> <p>To let Camel discover custom sources, then register the source into the Camel registry.</p> </div> </div> </div> <div class="sect1"> <h2 id="_see_also"><a class="anchor" href="#_see_also"></a>See Also</h2> <div class="sectionbody"> <div class="paragraph"> <p>See the example <a href="https://github.com/apache/camel-examples/tree/main/routetemplate">camel-examples/examples/routetemplate/</a>.</p> </div> </div> </div> </article> <aside class="toc sidebar" aria-label="Table of contents" data-title="Contents" data-levels="2"> <div class="toc-menu"></div> </aside> </div> </main> </div> <div class="footer-tools"> <a href="#top" title="Reach the top of the page">Back to top</a> </div> <footer> <div class="footer"> <figure class="logo"> <img src="../_/img/logo-d-a567cee6fa.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <input id="footer-toggle-overview" type="checkbox" title="Show/Hide Overview section"> <dl> <dt><label for="footer-toggle-overview">Overview</label><label for="footer-toggle-overview">&#65291;</label></dt> <dd><a href="../blog/">Blog</a></dd> <dd><a href="../docs/">Documentation</a></dd> <dd><a href="../community/support/">Community</a></dd> <dd><a href="../download/">Download</a></dd> </dl> <input id="footer-toggle-documentation" type="checkbox" title="Show/Hide Documentation section"> <dl> <dt><label for="footer-toggle-documentation">Documentation</label><label for="footer-toggle-documentation">&#65291;</label></dt> <dd><a href="../manual/">User Manual</a></dd> <dd><a href="../components/next/index.html">Components</a></dd> <dd><a href="../camel-k/next/">Camel-K</a></dd> <dd><a href="../camel-kafka-connector/next/">Camel Kafka Connector</a></dd> <dd><a href="../camel-quarkus/next/">Camel Quarkus</a></dd> <dd><a href="../camel-spring-boot/next/">Camel Spring Boot</a></dd> <dd><a href="../camel-karaf/3.22.x/">Camel Karaf</a></dd> <dd><a href="../manual/faq/index.html">FAQ</a></dd> </dl> <input id="footer-toggle-community" type="checkbox" title="Show/Hide Community section"> <dl> <dt><label for="footer-toggle-community">Community</label><label for="footer-toggle-community">&#65291;</label></dt> <dd><a href="../community/support/">Support</a></dd> <dd><a href="../community/contributing/">Contributing</a></dd> <dd><a href="../community/mailing-list/">Mailing Lists</a></dd> <dd><a href="../community/user-stories/">User stories</a></dd> <dd><a href="../community/articles/">Articles</a></dd> <dd><a href="../community/books/">Books</a></dd> <dd><a href="../community/team/">Team</a></dd> </dl> <input id="footer-toggle-about" type="checkbox" title="Show/Hide Acknowledgements section"> <dl> <dt><label for="footer-toggle-about">About</label><label for="footer-toggle-about">&#65291;</label></dt> <dd><a href="../acknowledgments/">Acknowledgments</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/events/current-event.html" title="Apache Events">Apache Events</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/licenses/" title="License">License</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/security/" title="Security">Security</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/sponsorship.html" title="Sponsorship">Sponsorship</a></dd> <dd><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/thanks.html" title="Thanks">Thanks</a></dd> </dl> <p class="remark"> &copy; 2004-2024 The <a href="https://apache.org">Apache Software Foundation</a>.<br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. </p> <div class="resources"> <div class="context"> <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a> </div> <div class="context"> <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.apache.org/foundation/policies/conduct">Code of Conduct</a> </div> <div class="context"> <a href="../sitemap/">Sitemap</a> </div> </div> <div class="footer-icons"> <a rel="noopener noreferrer nofollow" href="https://github.com/apache/camel/" title="Collaborate on GitHub"><svg class="brand-icon" focusable="false"><use xlink:href="../_/img/brand-logos-f2e689f4d4.svg#github"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://camel.zulipchat.com" title="Chat on Zulip"><svg class="brand-icon" focusable="false"><use xlink:href="../_/img/brand-logos-f2e689f4d4.svg#zulip"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://twitter.com/ApacheCamel" title="Follow Apache Camel on Twitter"><svg class="brand-icon" focusable="false"><use xlink:href="../_/img/brand-logos-f2e689f4d4.svg#twitter"/></svg></a> <a rel="noopener noreferrer nofollow" href="https://www.linkedin.com/groups/2447439/" title="Apache Camel group on Linkedin"><svg class="brand-icon" focusable="false"><use xlink:href="../_/img/brand-logos-f2e689f4d4.svg#linkedin"/></svg></a> </div> </div> </footer> <script src="../_/js/vendor/algoliasearch-bad45193e2.js"></script> <script src="../_/js/site-c215fb6972.js"></script> <script async src="../_/js/vendor/highlight-621a10fe1b.js"></script> <script async src="../_/js/vendor/svg4everybody-a0c573f2b9.js"></script> <script async src="../_/js/vendor/tabs-5aea11bcf5.js" data-sync-storage-key="preferred-tab"></script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Organization", "name": "Apache Camel", "url": "https://camel.apache.org", "sameAs": [ "https://twitter.com/ApacheCamel" ], "logo": "../_/img/logo-d-a567cee6fa.svg", "description": "Apache Camel  is a versatile open-source integration framework based on known Enterprise Integration Patterns. Camel empowers you to define routing and mediation rules in a variety of domain-specific languages, including a Java-based Fluent API, Spring or Blueprint XML Configuration files, and a Scala DSL." } </script> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "BreadcrumbList", "itemListElement": [{ "@type": "ListItem", "position": 1, "name": "Apache Camel", "item": "https://camel.apache.org/" }, { "@type": "ListItem", "position": 2, "name": "User manual", "item": "https://camel.apache.org/manual/index.html" }, { "@type": "ListItem", "position": 3, "name": "default", "item": "https://camel.apache.org/manual/index.html" }, { "@type": "ListItem", "position": 4, "name": "Architecture", "item": "https://camel.apache.org/manual/architecture.html" }, { "@type": "ListItem", "position": 5, "name": "RouteTemplate", "item": "https://camel.apache.org/manual/route-template.html" }] } </script> </body> </html> 